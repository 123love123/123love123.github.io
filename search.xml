<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>飞机大战源码</title>
    <url>/posts/8792c10a/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>很久之前整理的小东西，这个是从我个人博客网站拷过来的<a href="https://trhsy.github.io/aircraft_war.html">地址</a></p>
<a id="more"></a>

<p>下面是源码</p>
<h1 id="Plane"><a href="#Plane" class="headerlink" title="Plane"></a>Plane</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.plane;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Plane</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002415:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Plane</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 定义一个飞机</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 15:07 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    Image planeImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x = <span class="number">300</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y = <span class="number">700</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> lifeCount = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 给飞机附图片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 15:19 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> []</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Plane</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            planeImage = ImageIO.read(Plane.class.getClassLoader().getResourceAsStream("images/plane.png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 画飞机图片</span></span><br><span class="line">        g.drawImage(planeImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 飞机移动</span></span><br><span class="line">        <span class="keyword">this</span>.move();</span><br><span class="line">        <span class="comment">// 血条</span></span><br><span class="line">        <span class="keyword">if</span> (lifeCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            g.setColor(Color.WHITE);</span><br><span class="line">            g.fillRect(<span class="number">20</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line">            g.setColor(Color.red);</span><br><span class="line">            g.fillRect(<span class="number">20</span>, <span class="number">80</span>, (<span class="number">100</span> / <span class="number">5</span>) * lifeCount, <span class="number">10</span>);</span><br><span class="line">            g.setColor(Color.blue);</span><br><span class="line">            g.setFont(<span class="keyword">new</span> Font(<span class="string">"幼圆"</span>, Font.BOLD, <span class="number">30</span>));</span><br><span class="line">            g.drawString(<span class="string">"Score:"</span> + Play.count, <span class="number">20</span>, <span class="number">60</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isUP &amp;&amp; !isDown &amp;&amp; !isLeft &amp;&amp; !isRight) &#123;</span><br><span class="line">            <span class="comment">//上</span></span><br><span class="line">            y = y - <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isUP &amp;&amp; isDown &amp;&amp; !isLeft &amp;&amp; !isRight) &#123;</span><br><span class="line">            <span class="comment">//下</span></span><br><span class="line">            y = y + <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isUP &amp;&amp; !isDown &amp;&amp; isLeft &amp;&amp; !isRight) &#123;</span><br><span class="line">            <span class="comment">//左</span></span><br><span class="line">            x = x - <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isUP &amp;&amp; !isDown &amp;&amp; !isLeft &amp;&amp; isRight) &#123;</span><br><span class="line">            <span class="comment">//右</span></span><br><span class="line">            x = x + <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isUP &amp;&amp; !isDown &amp;&amp; isLeft &amp;&amp; !isRight) &#123;</span><br><span class="line">            <span class="comment">//左上</span></span><br><span class="line">            x = x - <span class="number">5</span>;</span><br><span class="line">            y = y - <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isUP &amp;&amp; isDown &amp;&amp; isLeft &amp;&amp; !isRight) &#123;</span><br><span class="line">            <span class="comment">//左下</span></span><br><span class="line">            x = x - <span class="number">5</span>;</span><br><span class="line">            y = y + <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isUP &amp;&amp; !isDown &amp;&amp; !isLeft &amp;&amp; isRight) &#123;</span><br><span class="line">            <span class="comment">//右上</span></span><br><span class="line">            x = x + <span class="number">5</span>;</span><br><span class="line">            y = y - <span class="number">5</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isUP &amp;&amp; isDown &amp;&amp; !isLeft &amp;&amp; isRight) &#123;</span><br><span class="line">            <span class="comment">//右下</span></span><br><span class="line">            x = x + <span class="number">5</span>;</span><br><span class="line">            y = y + <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> isUP = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">boolean</span> isDown = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">boolean</span> isLeft = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">boolean</span> isRight = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 按下</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 15:21 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [e]</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyCode = e.getKeyCode();</span><br><span class="line">        <span class="keyword">if</span> (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) &#123;</span><br><span class="line">            isRight = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) &#123;</span><br><span class="line">            isLeft = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) &#123;</span><br><span class="line">            isUP = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) &#123;</span><br><span class="line">            isDown = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 松开</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 15:24 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [e]</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyCode = e.getKeyCode();</span><br><span class="line">        <span class="keyword">if</span> (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) &#123;</span><br><span class="line">            isRight = <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) &#123;</span><br><span class="line">            isLeft = <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) &#123;</span><br><span class="line">            isUP = <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) &#123;</span><br><span class="line">            isDown = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, planeImage.getWidth(<span class="keyword">null</span>), planeImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="PlaneStatus类"><a href="#PlaneStatus类" class="headerlink" title="PlaneStatus类"></a>PlaneStatus类</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.util;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> PlaneStatus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo 0 游戏开始前 1 第一关 -1 游戏结束</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002415:28</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlaneStatus</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> roleNum = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> playStatus = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Power类"><a href="#Power类" class="headerlink" title="Power类"></a>Power类</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.power;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Power</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo 血瓶类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002415:29</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Power</span> </span>&#123;</span><br><span class="line">    Image PowerImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//初始位置</span></span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Power</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = (<span class="keyword">int</span>) (Math.random() * <span class="number">540</span>) + <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            PowerImage = ImageIO.read(Gift<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line">                    .getResourceAsStream("images/power.png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 画血瓶图片</span></span><br><span class="line">        g.drawImage(PowerImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 血瓶移动</span></span><br><span class="line">        y++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, PowerImage.getWidth(<span class="keyword">null</span>), PowerImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Gift"><a href="#Gift" class="headerlink" title="Gift"></a>Gift</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.power;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.Rectangle;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Gift</span> </span>&#123;</span><br><span class="line">    Image GiftImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Gift</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = (<span class="keyword">int</span>) (Math.random() * <span class="number">540</span>) + <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            GiftImage = ImageIO.read(Gift<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line">                    .getResourceAsStream("images/blood.png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 画血瓶图片</span></span><br><span class="line">        g.drawImage(GiftImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 血瓶移动</span></span><br><span class="line">        y++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, GiftImage.getWidth(<span class="keyword">null</span>), GiftImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Diji"><a href="#Diji" class="headerlink" title="Diji"></a>Diji</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.plane;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.Rectangle;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Diji</span> </span>&#123;</span><br><span class="line">    Image dijiImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y = -<span class="number">20</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *20 ~ 760</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> r;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Diji</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = (<span class="keyword">int</span>) (Math.random() * <span class="number">540</span>) + <span class="number">40</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            r = (<span class="keyword">int</span>) (Math.random() * <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">            dijiImage = ImageIO.read(Diji<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line">                    .getResourceAsStream("images/diji_" + r + ".png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//画 敌机图片</span></span><br><span class="line">        g.drawImage(dijiImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//敌机移动</span></span><br><span class="line">        <span class="keyword">if</span> (r == <span class="number">1</span>) &#123;</span><br><span class="line">            y += <span class="number">4</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r == <span class="number">2</span>) &#123;</span><br><span class="line">            y += <span class="number">4</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (r == <span class="number">3</span>) &#123;</span><br><span class="line">            y += <span class="number">7</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, dijiImage.getWidth(<span class="keyword">null</span>), dijiImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="play类"><a href="#play类" class="headerlink" title="play类"></a>play类</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.plane;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.bullet.DijiZiDan;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.bullet.MyZiDan;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.power.Gift;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.power.Power;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.util.PlaneStatus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Play</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002415:40</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Play</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    Image bgImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 战机</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:11 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    Plane plane = <span class="keyword">new</span> Plane();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 战机子弹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:11 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    List&lt;MyZiDan&gt; mzds = <span class="keyword">new</span> ArrayList&lt;MyZiDan&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 敌机</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:11 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    List&lt;Diji&gt; dijis = <span class="keyword">new</span> ArrayList&lt;Diji&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 敌机子弹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:11 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    List&lt;DijiZiDan&gt; dijizidans = <span class="keyword">new</span> ArrayList&lt;DijiZiDan&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 血瓶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:11 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    List&lt;Gift&gt; gifts = <span class="keyword">new</span> ArrayList&lt;Gift&gt;();</span><br><span class="line"></span><br><span class="line">    List&lt;Power&gt; powers = <span class="keyword">new</span> ArrayList&lt;Power&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bgImage = ImageIO.read(Play.class.getClassLoader().getResourceAsStream("images/bg_01.jpg"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> bgY1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> bgY2 = -<span class="number">600</span>;</span><br><span class="line">    <span class="keyword">int</span> fireTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 画背景图片</span></span><br><span class="line">        g.drawImage(bgImage, <span class="number">0</span>, bgY1, <span class="keyword">null</span>);</span><br><span class="line">        bgY1 += <span class="number">5</span>;</span><br><span class="line">        bgY1 = <span class="number">0</span>;</span><br><span class="line">        g.drawImage(bgImage, <span class="number">0</span>, bgY2, <span class="keyword">null</span>);</span><br><span class="line">        bgY2 += <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span> (bgY2 &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            bgY2 = -<span class="number">600</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 清理战机子弹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mzds.size(); i++) &#123;</span><br><span class="line">            MyZiDan myZidan = mzds.get(i);</span><br><span class="line">            <span class="keyword">if</span> (myZidan.x &gt; <span class="number">800</span>) &#123;</span><br><span class="line">                mzds.remove(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 添加子弹</span></span><br><span class="line">        <span class="keyword">if</span> (isFire1 == <span class="keyword">true</span> &amp;&amp; flag == <span class="keyword">false</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fireTime % <span class="number">8</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                mzds.add(<span class="keyword">new</span> MyZiDan(plane.x + <span class="number">25</span>, plane.y + <span class="number">0</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            fireTime++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isFire1 == <span class="keyword">true</span> &amp;&amp; flag == <span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fireTime % <span class="number">4</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">            mzds.add(<span class="keyword">new</span> MyZiDan(plane.x + <span class="number">8</span>, plane.y + <span class="number">0</span>));</span><br><span class="line">            mzds.add(<span class="keyword">new</span> MyZiDan(plane.x + <span class="number">52</span>, plane.y + <span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        fireTime++;</span><br><span class="line">        <span class="comment">// 画战机子弹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mzds.size(); i++) &#123;</span><br><span class="line">            MyZiDan myZidan = mzds.get(i);</span><br><span class="line">            myZidan.draw(g);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 清理敌机</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dijis.size(); i++) &#123;</span><br><span class="line">            Diji dj = dijis.get(i);</span><br><span class="line">            <span class="keyword">if</span> (dj.x &lt; -<span class="number">100</span>) &#123;</span><br><span class="line">                dijis.remove(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 抽奖:添加敌机</span></span><br><span class="line">        dijis.add(<span class="keyword">new</span> Diji());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 抽奖：添加血瓶</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">int</span>) (Math.random() * <span class="number">1000</span>) == <span class="number">5</span>) &#123;</span><br><span class="line">            gifts.add(<span class="keyword">new</span> Gift());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; gifts.size(); i++) &#123;</span><br><span class="line">            Gift gift = gifts.get(i);</span><br><span class="line">            gift.draw(g);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//抽奖：添加power</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="keyword">int</span>) (Math.random() * <span class="number">1000</span>) == <span class="number">5</span>) &#123;</span><br><span class="line">            powers.add(<span class="keyword">new</span> Power());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; powers.size(); i++) &#123;</span><br><span class="line">            Power power = powers.get(i);</span><br><span class="line">            power.draw(g);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 画敌机</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dijis.size(); i++) &#123;</span><br><span class="line">            Diji dj = dijis.get(i);</span><br><span class="line">            dj.draw(g);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 画飞机</span></span><br><span class="line">        plane.draw(g);</span><br><span class="line">        <span class="comment">// 判断战机相撞</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dijis.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// 先得到每一个敌机</span></span><br><span class="line">            Diji dj = dijis.get(i);</span><br><span class="line">            Rectangle r1 = dj.getRectangle();</span><br><span class="line">            Rectangle r2 = plane.getRectangle();</span><br><span class="line">            <span class="keyword">if</span> (r1.intersects(r2)) &#123;</span><br><span class="line">                dijis.remove(i);</span><br><span class="line">                plane.lifeCount = plane.lifeCount - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (plane.lifeCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (plane.lifeCount &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    PlaneStatus.playStatus = -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 判断战机和血瓶相撞</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> q = <span class="number">0</span>; q &lt; gifts.size(); q++) &#123;</span><br><span class="line">                <span class="comment">// 先得到每一个血瓶</span></span><br><span class="line">                Gift gift = gifts.get(q);</span><br><span class="line">                Rectangle rectangle = gift.getRectangle();</span><br><span class="line">                Rectangle rectangle1 = plane.getRectangle();</span><br><span class="line">                <span class="keyword">if</span> (rectangle.intersects(rectangle1)) &#123;</span><br><span class="line">                    gifts.remove(q);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (plane.lifeCount &lt; <span class="number">5</span>) &#123;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                plane.lifeCount = plane.lifeCount + <span class="number">1</span>;</span><br><span class="line">                <span class="comment">//// 判断战机和Power相撞</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> w = <span class="number">0</span>; w &lt; powers.size(); w++) &#123;</span><br><span class="line">                    <span class="comment">// 先得到每一个power</span></span><br><span class="line">                    Power power = powers.get(w);</span><br><span class="line">                    Rectangle rectangle2 = power.getRectangle();</span><br><span class="line">                    Rectangle rectangle3 = plane.getRectangle();</span><br><span class="line">                    <span class="keyword">if</span> (rectangle2.intersects(rectangle3)) &#123;</span><br><span class="line">                        powers.remove(w);</span><br><span class="line">                        flag = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 判断敌机在中弹</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> e = <span class="number">0</span>; e &lt; mzds.size(); e++) &#123;</span><br><span class="line">                    <span class="comment">// 得到每个战机子弹</span></span><br><span class="line">                    MyZiDan myzidan = mzds.get(e);</span><br><span class="line">                    Rectangle rectangle2 = myzidan.getRectangle();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; dijis.size(); j++) &#123;</span><br><span class="line">                        <span class="comment">// 每一个敌机</span></span><br><span class="line">                        Diji diji = dijis.get(j);</span><br><span class="line">                        Rectangle rectangle3 = diji.getRectangle();</span><br><span class="line">                        <span class="keyword">if</span> (rectangle2.intersects(rectangle3)) &#123;</span><br><span class="line">                            mzds.remove(i);</span><br><span class="line">                            dijis.remove(j);</span><br><span class="line">                            count++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> isFire1 = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">boolean</span> isFire2 = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        plane.keyPressed(e);</span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_J) &#123;</span><br><span class="line">            isFire1 = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="comment">/*if (e.getKeyCode() == KeyEvent.VK_K) &#123; isFire2 = true; &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        plane.keyReleased(e);</span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_J) &#123;</span><br><span class="line">            isFire1 = <span class="keyword">false</span>;</span><br><span class="line">            fireTime = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="comment">/*if (e.getKeyCode() == KeyEvent.VK_K) &#123; isFire2 = false; fireTime = 0; &#125;*/</span></span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_P) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dijis.size(); i++) &#123;</span><br><span class="line">                dijis.remove(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="over类"><a href="#over类" class="headerlink" title="over类"></a>over类</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Over</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002416:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Over</span> </span>&#123;</span><br><span class="line">    Image obg=<span class="keyword">null</span>;</span><br><span class="line">    Image ng=<span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Over</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            obg=ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/obg.jpg"));</span><br><span class="line">            ng=ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/ng.png")); &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span></span>&#123;</span><br><span class="line">        g.drawImage(obg, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line">        g.drawImage(ng, <span class="number">120</span>,<span class="number">100</span>, <span class="keyword">null</span>);</span><br><span class="line">        g.setColor(Color.black);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> Font(<span class="string">"幼圆"</span>, Font.BOLD, <span class="number">40</span>));</span><br><span class="line">        g.drawString(<span class="string">"游戏结束啦！"</span>,<span class="number">200</span> ,<span class="number">600</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="MainFrame主类"><a href="#MainFrame主类" class="headerlink" title="MainFrame主类"></a>MainFrame主类</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.trhsy.cn.plane.Play;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.util.Before;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.util.Over;</span><br><span class="line"><span class="keyword">import</span> com.trhsy.cn.util.PlaneStatus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyAdapter;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> MainFrame</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> todo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Administrator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/24 002416:04</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainFrame</span> <span class="keyword">extends</span> <span class="title">JFrame</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    Before before =<span class="keyword">new</span> Before();</span><br><span class="line">    Play play = <span class="keyword">new</span> Play();</span><br><span class="line">    Over over = <span class="keyword">new</span> Over();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainFrame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//设 置标题</span></span><br><span class="line">        <span class="keyword">this</span>.setTitle(<span class="string">" 让子弹飞一会~"</span>);</span><br><span class="line">        <span class="comment">//设置大小</span></span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">600</span>, <span class="number">800</span>);</span><br><span class="line">        <span class="comment">//定位居中</span></span><br><span class="line">        <span class="keyword">this</span>.setLocationRelativeTo(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//添加关闭操作</span></span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="comment">//禁止重置大小z</span></span><br><span class="line">        <span class="keyword">this</span>.setResizable(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//添加键盘监听器 KeyListener --&gt;KeyAdapter</span></span><br><span class="line">        <span class="keyword">this</span>.addKeyListener(<span class="keyword">new</span> KeyAdapter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(PlaneStatus.playStatus == <span class="number">0</span>)&#123;</span><br><span class="line">                    before.keyPressed(e);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus ==<span class="number">1</span>)&#123;</span><br><span class="line">                    play.keyPressed(e);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus==-<span class="number">1</span>)&#123;</span><br><span class="line">                    over.keyPressed(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(PlaneStatus.playStatus == <span class="number">0</span>)&#123;</span><br><span class="line">                    before.keyReleased(e);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus ==<span class="number">1</span>)&#123;</span><br><span class="line">                    play.keyReleased(e);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus==-<span class="number">1</span>)&#123;</span><br><span class="line">                    over.keyReleased(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//启 动一个线程:每隔20 毫秒执行一次</span></span><br><span class="line">        <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    MainFrame.<span class="keyword">this</span>.repaint();</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">20</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start(); <span class="comment">//显示</span></span><br><span class="line">        <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Image bufferImage =<span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> //TODO 这个方法也是20毫秒执行一次</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 16:10 2020/3/24 0024</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [g]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(bufferImage==<span class="keyword">null</span>)&#123;</span><br><span class="line">            bufferImage = <span class="keyword">this</span>.createImage(<span class="number">600</span>, <span class="number">800</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Graphics g4Image = bufferImage.getGraphics();</span><br><span class="line">        g4Image.setColor(Color.BLACK);</span><br><span class="line">        g4Image.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">600</span>, <span class="number">800</span>);</span><br><span class="line">        <span class="keyword">this</span>.draw(g4Image);</span><br><span class="line">        g.drawImage(bufferImage, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(PlaneStatus.playStatus == <span class="number">0</span>)&#123;</span><br><span class="line">            before.draw(g);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus ==<span class="number">1</span>)&#123;</span><br><span class="line">            play.draw(g);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(PlaneStatus.playStatus==-<span class="number">1</span>)&#123;</span><br><span class="line">            over.draw(g);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> MainFrame();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="MyZiDan"><a href="#MyZiDan" class="headerlink" title="MyZiDan"></a>MyZiDan</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.bullet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.Rectangle;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyZiDan</span> </span>&#123;</span><br><span class="line">    Image zidanImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyZiDan</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zidanImage = ImageIO.read(MyZiDan.class.getClassLoader().getResourceAsStream("images/zidan.png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 画我军子弹图片</span></span><br><span class="line">        g.drawImage(zidanImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 我的飞机子弹移动速度</span></span><br><span class="line">        y -= <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, zidanImage.getWidth(<span class="keyword">null</span>), zidanImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="DijiZiDan"><a href="#DijiZiDan" class="headerlink" title="DijiZiDan"></a>DijiZiDan</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.bullet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.Rectangle;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DijiZiDan</span> </span>&#123;</span><br><span class="line">    Image zidanImage = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">    <span class="keyword">int</span> fangxiang = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DijiZiDan</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">        fangxiang = (<span class="keyword">int</span>) (Math.random() * <span class="number">5</span>);<span class="comment">//0 ~ 7</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            zidanImage = ImageIO.read(DijiZiDan<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span></span><br><span class="line">                    .getResourceAsStream("images/dijizidan.jpg"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//画 敌机子弹图片</span></span><br><span class="line">        g.drawImage(zidanImage, x, y, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//移动</span></span><br><span class="line">        <span class="keyword">this</span>.move();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fangxiang == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//下</span></span><br><span class="line">            y = y + <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fangxiang == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//左</span></span><br><span class="line">            x = x - <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fangxiang == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">//右</span></span><br><span class="line">            x = x + <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fangxiang == <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="comment">//左下</span></span><br><span class="line">            x = x - <span class="number">2</span>;</span><br><span class="line">            y = y + <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fangxiang == <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="comment">// 右下</span></span><br><span class="line">            x = x + <span class="number">2</span>;</span><br><span class="line">            y = y + <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rectangle <span class="title">getRectangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rectangle(x, y, zidanImage.getWidth(<span class="keyword">null</span>), zidanImage.getHeight(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.trhsy.cn.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> fan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO 游戏开始之前加载</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 16:07 2020/3/24 0024</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Param</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Before</span> </span>&#123;</span><br><span class="line">    Image bg = <span class="keyword">null</span>;</span><br><span class="line">    Image wfeiji = <span class="keyword">null</span>;</span><br><span class="line">    Image kdiji1 = <span class="keyword">null</span>;</span><br><span class="line">    Image kdiji2 = <span class="keyword">null</span>;</span><br><span class="line">    Image kdiji3 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bg = ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/bg.jpg"));</span><br><span class="line">            wfeiji = ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/feiji_1.png"));</span><br><span class="line">            kdiji1 = ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/kdiji_01.png"));</span><br><span class="line">            kdiji2 = ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/kdiji_02.png"));</span><br><span class="line">            kdiji3 = ImageIO.read(Before.class.getClassLoader().getResourceAsStream("images/kdiji_03.png"));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (PlaneStatus.roleNum == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 画妹妹</span></span><br><span class="line">            g.drawImage(bg, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(wfeiji, <span class="number">260</span>, <span class="number">600</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji1, <span class="number">200</span>, <span class="number">50</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji1, <span class="number">400</span>, <span class="number">50</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji1, <span class="number">150</span>, <span class="number">480</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji1, <span class="number">400</span>, <span class="number">480</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji2, <span class="number">100</span>, <span class="number">200</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji2, <span class="number">300</span>, <span class="number">100</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji2, <span class="number">480</span>, <span class="number">200</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji3, <span class="number">300</span>, <span class="number">300</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji3, <span class="number">70</span>, <span class="number">400</span>, <span class="keyword">null</span>);</span><br><span class="line">            g.drawImage(kdiji3, <span class="number">510</span>, <span class="number">400</span>, <span class="keyword">null</span>);</span><br><span class="line">            <span class="comment">//画回车符</span></span><br><span class="line">            time++;</span><br><span class="line">            g.setColor(Color.YELLOW);</span><br><span class="line">            g.setFont(<span class="keyword">new</span> Font(<span class="string">"幼圆"</span>, Font.BOLD, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (time &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">            g.drawString(<span class="string">"[Enter]&gt;&gt;"</span>, <span class="number">50</span>, <span class="number">750</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (time &lt;= <span class="number">20</span>) &#123;</span><br><span class="line">            g.drawString(<span class="string">"[Enter] &gt;&gt;"</span>, <span class="number">50</span>, <span class="number">750</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (time &lt;= <span class="number">30</span>) &#123;</span><br><span class="line">            g.drawString(<span class="string">"[Enter] &gt;&gt;"</span>, <span class="number">50</span>, <span class="number">750</span>);</span><br><span class="line">            <span class="keyword">if</span> (time == <span class="number">30</span>) &#123;</span><br><span class="line">                time = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> keyCode = e.getKeyCode();</span><br><span class="line">        <span class="keyword">if</span> (keyCode == KeyEvent.VK_ENTER) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_RIGHT) &#123;</span><br><span class="line">            PlaneStatus.roleNum = <span class="number">3</span> - PlaneStatus.roleNum;</span><br><span class="line">            <span class="comment">//1~2 互换</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>源码</tag>
      </tags>
  </entry>
  <entry>
    <title>给自己的博客添加点击爱心效果</title>
    <url>/posts/990a9cda/</url>
    <content><![CDATA[<h1 id="给自己的博客添加点击爱心效果"><a href="#给自己的博客添加点击爱心效果" class="headerlink" title="给自己的博客添加点击爱心效果"></a>给自己的博客添加点击爱心效果</h1><p>github+hexo+next主题搭建的博客，反正我的是被我搞的没话说啥都往里面加了<a href="https://trhsy.github.io/hexo_gethub_build.html">机票</a></p>
<p>这里记录的是加入一个小东西点击出现爱心的效果<br>具体地方不知的从哪里找到的，换记性不如烂笔头我也记一下</p>
<a id="more"></a>

<p>#js文件<br>在你的项目文件<code>/themes/next/source/js/src</code>下新建js文件名字叫love,当然你也可以随便起；代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">"left:"</span>+d[e].x+<span class="string">"px;top:"</span>+d[e].y+<span class="string">"px;opacity:"</span>+d[e].alpha+<span class="string">";transform:scale("</span>+d[e].scale+<span class="string">","</span>+d[e].scale+<span class="string">") rotate(45deg);background:"</span>+d[e].color+<span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">"function"</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"div"</span>);a.className=<span class="string">"heart"</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"style"</span>);a.type=<span class="string">"text/css"</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">"rgb("</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">")"</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;setTimeout(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<h1 id="修改主题配置"><a href="#修改主题配置" class="headerlink" title="修改主题配置"></a>修改主题配置</h1><p>目录<code>\themes\next\layout\_layout.swig</code> 文件末尾也好哪里都行，最后末尾添加：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- 页面点击小红心 --&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/love.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="给底部添加会跳的心"><a href="#给底部添加会跳的心" class="headerlink" title="给底部添加会跳的心"></a>给底部添加会跳的心</h1><p>目录<code>\themes\next\layout\_partials</code> 下footer.swig中找到</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-&#123;&#123; theme.footer.icon &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改外层span</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"with-love"</span> <span class="attr">id</span>=<span class="string">"heart"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-&#123;&#123; theme.footer.icon &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>之后到目录<code>next\source\css\_custom</code>下custom.styl新增</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//底部爱心小图标跳动</span><br><span class="line"><span class="keyword">@keyframes</span> heartAnimate &#123;</span><br><span class="line">    0%,100%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);&#125;</span><br><span class="line">    10%,30%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.9</span>);&#125;</span><br><span class="line">    20%,40%,60%,80%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.1</span>);&#125;</span><br><span class="line">    50%,70%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.1</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//图标所对应的span中的ID</span><br><span class="line"><span class="selector-id">#heart</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: heartAnimate <span class="number">1.33s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.with-love</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">113</span>, <span class="number">113</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主题文件中<code>footer.icon:heart</code></p>
<h3 id="InstantClick"><a href="#InstantClick" class="headerlink" title="InstantClick"></a>InstantClick</h3><p>介绍请看官网，先下载我修改后的 <span class="exturl" data-url="aHR0cHM6Ly95aXhpdWVyLm1lL2luc3RhbnRjbGljay5qcw==">instantclick.js<i class="fa fa-external-link-alt"></i></span>（浏览器右键保存为），再放到<code>~/themes/next/source/js/src/</code>下，然后添加代码：<br>文件位置：<code>~/themes/next/layout/_layout.swig</code></p>
]]></content>
      <categories>
        <category>心</category>
      </categories>
      <tags>
        <tag>心</tag>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>记录custom.stuyl</title>
    <url>/posts/e44ff9df/</url>
    <content><![CDATA[<h1 id="记录custom-stuyl"><a href="#记录custom-stuyl" class="headerlink" title="记录custom.stuyl"></a>记录custom.stuyl</h1><p>位置<code>themes\next\source\css\_custom\custom.styl</code><br>代码奉上</p>
<a id="more"></a>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// Custom styles.</span><br><span class="line"><span class="comment">/*******************首页样式*****************************/</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"/images/bg.jpg"</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line">// 顶栏宽度</span><br><span class="line"><span class="comment">/*.container .header-inner &#123;</span></span><br><span class="line"><span class="comment">    width: 100%;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">// 页面顶部行高</span></span><br><span class="line"><span class="comment">.header &#123;</span></span><br><span class="line"><span class="comment">    line-height: 1.5;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 页面背景色</span></span><br><span class="line"><span class="comment">.container &#123;</span></span><br><span class="line"><span class="comment">     background-image: ;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 页面留白更改</span></span><br><span class="line"><span class="comment">.header-inner &#123;</span></span><br><span class="line"><span class="comment">    padding-top: 35px;</span></span><br><span class="line"><span class="comment">    padding-bottom: 0px;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="selector-class">.posts-expand</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-button</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line">//缩略图指定宽度值显示。</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-class">.img-topic</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 主页文章添加阴影效果</span><br><span class="line"> <span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">   <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">//图标所对应的span中的ID</span><br><span class="line"><span class="selector-id">#heart</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: heartAnimate <span class="number">1.33s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.with-love</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">113</span>, <span class="number">113</span>);</span><br><span class="line">&#125;</span><br><span class="line">//底部爱心小图标跳动</span><br><span class="line"><span class="selector-tag">keyframes</span> <span class="selector-tag">heartAnimate</span> &#123;</span><br><span class="line">    0%,100%&#123;transform:scale(1);&#125;</span><br><span class="line">    10%,30%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.9</span>);&#125;</span><br><span class="line">    20%,40%,60%,80%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.1</span>);&#125;</span><br><span class="line">    50%,70%&#123;<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.1</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 鼠标样式</span><br><span class="line">  * &#123;</span><br><span class="line">      //cursor: url("http://om8u46rmb.bkt.clouddn.com/sword2.ico"),auto!important</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">      //cursor: url("http://om8u46rmb.bkt.clouddn.com/sword1.ico"),auto!important</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*******************文章样式*****************************/</span></span><br><span class="line">  // 文章``代码块的自定义样式</span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 文章···代码块顶部样式</span><br><span class="line"><span class="selector-class">.highlight</span> <span class="selector-tag">figcaption</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0em</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#e9e9e9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span> <span class="selector-tag">figcaption</span> <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>); &#125; </span><br><span class="line">// 文章···代码块diff样式 </span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.addition</span> &#123; <span class="attribute">background</span>: <span class="number">#e6ffed</span>; &#125; </span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.deletion</span> &#123; <span class="attribute">background</span>: <span class="number">#ffeef0</span>; &#125;</span><br><span class="line"></span><br><span class="line">// 文章标题字体</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 文章标题动态效果</span><br><span class="line"> <span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title-link</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, #a166ab <span class="number">0%</span>, #ef4e7b <span class="number">25%</span>, #f37055 <span class="number">50%</span>, #ef4e7b <span class="number">75%</span>, #a166ab <span class="number">100%</span>); &#125;</span><br><span class="line">// 文章元数据（meta）留白更改</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 文章的描述</span><br><span class="line"><span class="selector-tag">description</span> <span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> <span class="selector-class">.post-description</span> &#123; <span class="attribute">font-style</span>: italic; <span class="attribute">font-size</span>: <span class="number">14px</span>; <span class="attribute">margin-top</span>: <span class="number">30px</span>; <span class="attribute">margin-bottom</span>: <span class="number">0px</span>; <span class="attribute">color</span>: <span class="number">#666</span>; &#125;</span><br><span class="line"></span><br><span class="line">//文章内链接文本样式 </span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>&#123; </span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#0593d3</span>; </span><br><span class="line">	<span class="attribute">border-bottom</span>: none; </span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>; </span><br><span class="line">	&amp;:hover &#123; </span><br><span class="line">		<span class="selector-tag">color</span>: <span class="selector-id">#fc6423</span>;</span><br><span class="line">		<span class="selector-tag">border-bottom</span>: <span class="selector-tag">none</span>; </span><br><span class="line">		<span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fc6423</span>; </span><br><span class="line">	&#125; </span><br><span class="line"> &#125;</span><br><span class="line"> // [Read More]按钮样式</span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transition-property</span>: unset;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, #a166ab <span class="number">0%</span>, #ef4e7b <span class="number">25%</span>, #f37055 <span class="number">50%</span>, #ef4e7b <span class="number">75%</span>, #a166ab <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line">// 去除在页面文章之间的分割线</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-eof</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">// 去除页面底部页码上面的横线</span><br><span class="line"><span class="selector-class">.pagination</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 文章内标题样式（左边的竖线） </span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123; <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); <span class="attribute">margin-left</span>: -<span class="number">36px</span>; <span class="attribute">padding-left</span>: <span class="number">32px</span>; &#125;</span><br><span class="line">// 去掉图片边框</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 自定义的文章摘要图片样式</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-class">.img-topic</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*************************侧栏样式****************************/</span></span><br><span class="line">// 自定义的侧栏时间样式</span><br><span class="line"><span class="selector-id">#days</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 右下角侧栏按钮样式</span><br><span class="line"> <span class="selector-class">.sidebar-toggle</span> &#123; <span class="attribute">right</span>: <span class="number">10px</span>; <span class="attribute">bottom</span>: <span class="number">43px</span>; <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.75</span>); <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>); &#125; </span><br><span class="line"> <span class="selector-class">.page-post-detail</span> <span class="selector-class">.sidebar-toggle-line</span> &#123; <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); &#125;</span><br><span class="line"> // 右下角返回顶部按钮样式 </span><br><span class="line"> <span class="selector-class">.back-to-top</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.5</span>; <span class="attribute">right</span>: <span class="number">10px</span>; <span class="attribute">padding-right</span>: <span class="number">5px</span>; <span class="attribute">padding-left</span>: <span class="number">5px</span>; <span class="attribute">padding-top</span>: <span class="number">2.5px</span>; <span class="attribute">padding-bottom</span>: <span class="number">2.5px</span>; <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">247</span>, <span class="number">149</span>, <span class="number">51</span>, <span class="number">0.75</span>); <span class="attribute">border-radius</span>: <span class="number">5px</span>; <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>); &#125; </span><br><span class="line"> // 侧栏 </span><br><span class="line"> <span class="selector-class">.sidebar</span> &#123; <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>); <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.75</span>); &#125; </span><br><span class="line"> <span class="selector-class">.sidebar-inner</span> &#123; <span class="attribute">margin-top</span>: <span class="number">30px</span>; &#125;</span><br><span class="line"> // 侧栏顶部文字 </span><br><span class="line"> <span class="selector-class">.sidebar-nav</span> <span class="selector-tag">li</span> &#123; <span class="attribute">font-size</span>: <span class="number">15px</span>; <span class="attribute">font-weight</span>: bold; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); &#125; </span><br><span class="line"> <span class="selector-class">.sidebar-nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125;</span><br><span class="line"> <span class="selector-class">.sidebar-nav</span> <span class="selector-class">.sidebar-nav-active</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); <span class="attribute">border-bottom-width</span>: <span class="number">1.5px</span>; &#125; </span><br><span class="line"> <span class="selector-class">.sidebar-nav</span> <span class="selector-class">.sidebar-nav-active</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); &#125; </span><br><span class="line"> // 侧栏站点作者名</span><br><span class="line"> <span class="selector-class">.site-author-name</span> &#123; <span class="attribute">display</span>: none; &#125;</span><br><span class="line"> // 侧栏站点描述 </span><br><span class="line"> <span class="selector-class">.site-description</span> &#123; <span class="attribute">letter-spacing</span>: <span class="number">5px</span>; <span class="attribute">font-size</span>: <span class="number">15px</span>; <span class="attribute">font-weight</span>: bold; <span class="attribute">margin-top</span>: <span class="number">15px</span>; <span class="attribute">margin-left</span>: <span class="number">13px</span>; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">243</span>, <span class="number">112</span>, <span class="number">85</span>); &#125; </span><br><span class="line"> // 侧栏站点文章、分类、标签 </span><br><span class="line"> <span class="selector-class">.site-state</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.3</span>; <span class="attribute">margin-left</span>: <span class="number">12px</span>; &#125; </span><br><span class="line"> <span class="selector-class">.site-state-item</span> &#123; <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">15px</span>; <span class="attribute">border-left</span>: <span class="number">1.5px</span> solid <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125;</span><br><span class="line"> // 侧栏RSS按钮样式 </span><br><span class="line"> <span class="selector-class">.feed-link</span> &#123; <span class="attribute">margin-top</span>: <span class="number">15px</span>; <span class="attribute">margin-left</span>: <span class="number">7px</span>; &#125; </span><br><span class="line"> <span class="selector-class">.feed-link</span> <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">158</span>, <span class="number">158</span>, <span class="number">158</span>) <span class="meta">!important</span>; <span class="attribute">border-radius</span>: <span class="number">15px</span>; &#125; </span><br><span class="line"> <span class="selector-class">.feed-link</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125; <span class="selector-class">.feed-link</span> <span class="selector-tag">a</span> <span class="selector-tag">i</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); &#125; </span><br><span class="line"> // 侧栏社交链接 </span><br><span class="line"> <span class="selector-class">.links-of-author</span> &#123; <span class="attribute">margin-top</span>: <span class="number">0px</span>; &#125; </span><br><span class="line"> // 侧栏友链标题 </span><br><span class="line"> <span class="selector-class">.links-of-blogroll-title</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">10px</span>; <span class="attribute">margin-top</span>: <span class="number">15px</span>; <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>, <span class="number">0.75</span>); <span class="attribute">margin-left</span>: <span class="number">6px</span>; <span class="attribute">font-size</span>: <span class="number">15px</span>; <span class="attribute">font-weight</span>: bold; &#125;</span><br><span class="line"> // 侧栏超链接样式（友链的样式）</span><br><span class="line"> <span class="selector-class">.sidebar</span> <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: <span class="number">#ccc</span>; <span class="attribute">border-bottom</span>: none; &#125; </span><br><span class="line"> <span class="selector-class">.sidebar</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); &#125;</span><br><span class="line"> // 自定义的侧栏时间样式 </span><br><span class="line"> <span class="selector-id">#days</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); <span class="attribute">font-size</span>: <span class="number">13px</span>; <span class="attribute">margin-top</span>: <span class="number">15px</span>; &#125; </span><br><span class="line"> // 侧栏目录链接样式 </span><br><span class="line"> <span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">7</span>, <span class="number">179</span>, <span class="number">155</span>); <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">96</span>, <span class="number">125</span>, <span class="number">139</span>); &#125; </span><br><span class="line"> <span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125; </span><br><span class="line"> // 侧栏目录链接样式之当前目录 </span><br><span class="line"> <span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125;</span><br><span class="line"> <span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.active</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>); &#125; </span><br><span class="line"> <span class="comment">/* 修侧栏目录bug，如果主题配置文件_config.yml的toc是wrap: true */</span> </span><br><span class="line"> <span class="selector-class">.post-toc</span> <span class="selector-tag">ol</span> &#123; <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">10px</span> <span class="number">5px</span> <span class="number">10px</span>; &#125; </span><br><span class="line"> <span class="comment">/* 侧栏目录默认全展开，已注释 .post-toc .nav .nav-child &#123; display: block; &#125; */</span></span><br><span class="line"> <span class="comment">/************************移动端样式*******************************/</span> </span><br><span class="line"> <span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">1023px</span>) &#123; </span><br><span class="line"> <span class="selector-class">.container</span> &#123; </span><br><span class="line"> <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line"> &#125; </span><br><span class="line"> <span class="selector-class">.sidebar</span> &#123; </span><br><span class="line"> // box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.5);</span><br><span class="line"> <span class="selector-tag">border-top-left-radius</span>: 5<span class="selector-tag">px</span>;</span><br><span class="line"> <span class="selector-tag">border-bottom-left-radius</span>: 5<span class="selector-tag">px</span>; </span><br><span class="line"> &#125; <span class="selector-class">.feed-link</span> &#123; <span class="attribute">display</span>: none <span class="meta">!important</span>; &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">767px</span>) &#123; <span class="selector-class">.main</span> &#123; <span class="attribute">padding-bottom</span>: <span class="number">120px</span>; &#125; <span class="selector-class">.posts-expand</span> &#123; <span class="attribute">margin</span>: <span class="number">0px</span>; <span class="attribute">padding-top</span>: <span class="number">10px</span>; &#125; <span class="selector-class">.posts-expand</span> <span class="selector-class">.post-title</span> &#123; <span class="attribute">font-size</span>: <span class="number">22px</span>; &#125; <span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123; <span class="attribute">font-size</span>: <span class="number">10px</span>; &#125; <span class="selector-class">.post</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">30px</span> <span class="meta">!important</span>; <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">15px</span> <span class="number">15px</span> <span class="number">15px</span> <span class="meta">!important</span>; &#125; <span class="selector-class">.post-body</span> <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123; <span class="attribute">margin-left</span>: -<span class="number">15px</span>; <span class="attribute">padding-left</span>: <span class="number">11px</span>; &#125; <span class="selector-class">.posts-expand</span> <span class="selector-class">.post-tags</span> &#123; <span class="attribute">margin-top</span>: <span class="number">10px</span>; &#125; <span class="selector-class">.post-widgets</span> &#123; <span class="attribute">margin-top</span>: <span class="number">10px</span>; &#125; <span class="selector-class">.comments</span> &#123; <span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">0px</span> <span class="number">40px</span> <span class="number">0px</span> <span class="meta">!important</span>; &#125; <span class="selector-class">.footer</span> &#123; </span><br><span class="line">// box-shadow: 0px -5px 10px 0px rgba(0, 0, 0, 0.5);</span><br><span class="line"> &#125; &#125;</span><br><span class="line"><span class="selector-class">.sidebar-active</span> <span class="selector-id">#sidebar-dimmer</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 移动端左上角菜单按钮 </span><br><span class="line"><span class="selector-class">.site-nav-toggle</span> &#123; <span class="attribute">top</span>: <span class="number">35px</span>; <span class="attribute">left</span>: <span class="number">91px</span>; </span><br><span class="line">// background-color: #222; </span><br><span class="line">&#125; <span class="selector-class">.btn-bar</span> &#123; <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>); &#125;</span><br><span class="line">// 移动端菜单 </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">767px</span>) &#123; <span class="selector-class">.menu</span> &#123; <span class="attribute">text-align</span>: center; </span><br><span class="line">// box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.5); </span><br><span class="line">&#125; <span class="selector-class">.site-nav</span> &#123; <span class="attribute">top</span>: initial; <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>); <span class="attribute">border-top</span>: none; <span class="attribute">border-bottom</span>: none; <span class="attribute">position</span>: relative; <span class="attribute">z-index</span>: <span class="number">1024</span>; &#125; &#125;</span><br><span class="line">//移动端顶部 </span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">767px</span>) &#123; <span class="selector-class">.site-title</span> &#123; <span class="attribute">font-size</span>: <span class="number">28px</span> <span class="meta">!important</span>; <span class="attribute">letter-spacing</span>: <span class="number">0px</span> <span class="meta">!important</span>; &#125; <span class="selector-class">.site-subtitle</span>&#123; <span class="attribute">letter-spacing</span>: <span class="number">0px</span> <span class="meta">!important</span>; <span class="attribute">padding-bottom</span>: <span class="number">0px</span> <span class="meta">!important</span>; &#125; <span class="selector-class">.site-meta</span> &#123;</span><br><span class="line"> // box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.5); </span><br><span class="line"> &#125; <span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> &#123; <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">10px</span> <span class="meta">!important</span>; &#125; &#125;</span><br></pre></td></tr></table></figure>
<h1 id="设置动态title"><a href="#设置动态title" class="headerlink" title="设置动态title"></a>设置动态title</h1><p><code>themes/next/source/js/src</code>下创建dytitle.js：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">var OriginTitile = document.title;</span><br><span class="line">var titleTime;</span><br><span class="line">document.addEventListener('visibilitychange', function () &#123;</span><br><span class="line">    if (document.hidden) &#123;</span><br><span class="line">        $('[rel="shortcut icon"]').attr('href', "/TEP.png");</span><br><span class="line">        document.title = 'w(ﾟДﾟ)w 出BUG啦！！！！';</span><br><span class="line">        clearTimeout(titleTime);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        $('[rel="shortcut icon"]').attr('href', "/favicon.png");</span><br><span class="line">        document.title = '♪(^∇^*)又好了。。。 ' + OriginTitile;</span><br><span class="line">        titleTime = setTimeout(function () &#123;</span><br><span class="line">            document.title = OriginTitile;</span><br><span class="line">        &#125;, 2000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>修改<code>themes/next/layout/layout.swing</code>,在 之前添加：<code>&lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/dytitle.js&quot;&gt;&lt;/script&gt;</code></p>
<h1 id="侧栏加入已运行的时间"><a href="#侧栏加入已运行的时间" class="headerlink" title="侧栏加入已运行的时间"></a>侧栏加入已运行的时间</h1><p>修改文件:<code>themes/next/layout/_custom/sidebar.swig</code>，加入一下代码：</p>
<p><code>BirthDay=new Date(&quot;05/27/2017 15:13:14&quot;)</code>; 日期修改为自己的</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"days"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">show_date_time</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.setTimeout(<span class="string">"show_date_time()"</span>,<span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript">BirthDay=<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"05/27/2017 15:13:14"</span>);</span></span><br><span class="line"><span class="javascript">today=<span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line">timeold=(today.getTime()-BirthDay.getTime());</span><br><span class="line">sectimeold=timeold/1000</span><br><span class="line"><span class="javascript">secondsold=<span class="built_in">Math</span>.floor(sectimeold);</span></span><br><span class="line">msPerDay=24*60*60*1000</span><br><span class="line">e_daysold=timeold/msPerDay</span><br><span class="line"><span class="javascript">daysold=<span class="built_in">Math</span>.floor(e_daysold);</span></span><br><span class="line">e_hrsold=(e_daysold-daysold)*24;</span><br><span class="line"><span class="javascript">hrsold=setzero(<span class="built_in">Math</span>.floor(e_hrsold));</span></span><br><span class="line">e_minsold=(e_hrsold-hrsold)*60;</span><br><span class="line"><span class="javascript">minsold=setzero(<span class="built_in">Math</span>.floor((e_hrsold-hrsold)*<span class="number">60</span>));</span></span><br><span class="line"><span class="javascript">seconds=setzero(<span class="built_in">Math</span>.floor((e_minsold-minsold)*<span class="number">60</span>));</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">'days'</span>).innerHTML=<span class="string">"已运行"</span>+daysold+<span class="string">"天"</span>+hrsold+<span class="string">"小时"</span>+minsold+<span class="string">"分"</span>+seconds+<span class="string">"秒"</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">setzero</span><span class="params">(i)</span></span>&#123;</span></span><br><span class="line">if (i&lt;10)</span><br><span class="line"><span class="actionscript">&#123;i=<span class="string">"0"</span> + i&#125;;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> i;</span></span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改文件<code>themes/next/layout/_macro/sidebar.swig</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">        &#123;# Blogroll #&#125;</span><br><span class="line">        &#123;% if theme.links %&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"links-of-blogroll motion-element &#123;&#123; "</span><span class="attr">links-of-blogroll-</span>" + <span class="attr">theme.links_layout</span> | <span class="attr">default</span>('<span class="attr">inline</span>') &#125;&#125;"&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"links-of-blogroll-title"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa  fa-fw fa-&#123;&#123; theme.links_icon | default('globe') | lower &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              &#123;&#123; theme.links_title &#125;&#125;<span class="symbol">&amp;nbsp;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa  fa-fw fa-&#123;&#123; theme.links_icon | default('globe') | lower &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"links-of-blogroll-list"</span>&gt;</span></span><br><span class="line">              &#123;% for name, link in theme.links %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"links-of-blogroll-item"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; link &#125;&#125;"</span> <span class="attr">title</span>=<span class="string">"&#123;&#123; name &#125;&#125;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              &#123;% endfor %&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">+        &#123;% include '../_custom/sidebar.swig' %&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">         &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">-        &#123;% include '../_custom/sidebar.swig' %&#125;</span><br></pre></td></tr></table></figure>
<h1 id="增加站内文章搜索功能"><a href="#增加站内文章搜索功能" class="headerlink" title="增加站内文章搜索功能"></a>增加站内文章搜索功能</h1><p>安装插件hexo-generator-searchdb,执行以下命令:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<h1 id="修改hexo-config-yml站点配置文件-末尾新增以下代码"><a href="#修改hexo-config-yml站点配置文件-末尾新增以下代码" class="headerlink" title="修改hexo/_config.yml站点配置文件,末尾新增以下代码:"></a>修改hexo/_config.yml站点配置文件,末尾新增以下代码:</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>
<p>修改<code>themes/next/_config.yml</code>主题配置文件，搜索关键字local_search找到如下代码，将enable设置为true，如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>custom</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>网站搭建</tag>
        <tag>笔记</tag>
        <tag>custom</tag>
      </tags>
  </entry>
  <entry>
    <title>博客添加在线联系 DaoVoice</title>
    <url>/posts/ad3db428/</url>
    <content><![CDATA[<h1 id="博客添加在线联系-DaoVoice"><a href="#博客添加在线联系-DaoVoice" class="headerlink" title="博客添加在线联系 DaoVoice"></a>博客添加在线联系 DaoVoice</h1><p>去注册,<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHAlM0ElMkYlMkZkYXNoYm9hcmQuZGFvdm9pY2UuaW8lMkY=">注册<i class="fa fa-external-link-alt"></i></span>需要<span class="exturl" data-url="aHR0cDovL2Rhc2hib2FyZC5kYW92b2ljZS5pby9nZXQtc3RhcnRlZD9pbnZpdGVfY29kZT0wNjU5MWFhNA==">邀请码<i class="fa fa-external-link-alt"></i></span>,我给出我的<code>06591aa4</code>;<br>查看<code>app_id</code></p>
<a id="more"></a>
<p><img src="https://trhsy.github.io/img/app_id.png" alt="app_id"><br>复制<code>app_id</code>,打开目录<code>/themes/next/layout/_partials/head.swig</code>,添加代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.daovoice %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  (<span class="function"><span class="keyword">function</span>(<span class="params">i,s,o,g,r,a,m</span>)</span>&#123;i[<span class="string">"DaoVoiceObject"</span>]=r;i[r]=i[r]||<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;(i[r].q=i[r].q||[]).push(<span class="built_in">arguments</span>)&#125;,i[r].l=<span class="number">1</span>*<span class="keyword">new</span> <span class="built_in">Date</span>();a=s.createElement(o),m=s.getElementsByTagName(o)[<span class="number">0</span>];a.async=<span class="number">1</span>;a.src=g;a.charset=<span class="string">"utf-8"</span>;m.parentNode.insertBefore(a,m)&#125;)(<span class="built_in">window</span>,<span class="built_in">document</span>,<span class="string">"script"</span>,(<span class="string">'https:'</span> == <span class="built_in">document</span>.location.protocol ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">"//widget.daovoice.io/widget/0f81ff2f.js"</span>,<span class="string">"daovoice"</span>)</span></span><br><span class="line"><span class="actionscript">  daovoice(<span class="string">'init'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">      app_id: <span class="string">"&#123;&#123;theme.daovoice_app_id&#125;&#125;"</span></span></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">  daovoice(<span class="string">'update'</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>打开主题配置文件，加入</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Online contact</span><br><span class="line">daovoice: true</span><br><span class="line">daovoice_app_id: &#123;你刚刚复制的 app_id&#125;</span><br></pre></td></tr></table></figure>
<p>样式修改的话可以在刚刚，应用设置-聊天设置修改<br><img src="https://trhsy.github.io/img/daovoice.png" alt="daovoice"></p>
<p>欧了部署试试<br><img src="https://trhsy.github.io/img/f01.png" alt="daovoice"></p>
]]></content>
      <categories>
        <category>DaoVoice</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>DaoVoice</tag>
      </tags>
  </entry>
  <entry>
    <title>dangdang的扩展 sharding-jdbc实现动态数据源分库分表分页查询</title>
    <url>/posts/96a1f9bb/</url>
    <content><![CDATA[<h1 id="dangdang的分库分表扩展-sharding-jdbc"><a href="#dangdang的分库分表扩展-sharding-jdbc" class="headerlink" title="dangdang的分库分表扩展 sharding-jdbc"></a>dangdang的分库分表扩展 sharding-jdbc</h1><p>这段时间应公司需求需要分库查询数据，还好不是分表<br>研究了一下sharding-jdbc<br>我这里需求有点复杂，说是数据源不固定，随时添加一个数据源我就想到不能配置到项目文件中，就在业务库中新建一个表用来存储数据源的信息<br><img src="https://trhsy.github.io/img/data1.png" alt="表信息"></p>
<a id="more"></a>

<p>用最原始的jdbc连接数据库的方式实现分库查询</p>
<h1 id="封装的DBUtil"><a href="#封装的DBUtil" class="headerlink" title="封装的DBUtil"></a>封装的DBUtil</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.rule.DataSourceRule;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.rule.ShardingRule;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.rule.TableRule;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.strategy.database.DatabaseShardingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.strategy.table.TableShardingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.jdbc.core.datasource.ShardingDataSource;</span><br><span class="line"><span class="keyword">import</span> com.maven.znly.entity.NewDataSource;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> DBUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 为了方便建立数据库链接 只为查询封装</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Created by asus on 2018/11/1917:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Page <span class="title">getPage</span><span class="params">(List&lt;NewDataSource&gt; dataSourceList, String sql,PageRequest pageRequest)</span></span>&#123;</span><br><span class="line">        ResultSet rs=<span class="keyword">null</span>;</span><br><span class="line">        Connection conn=<span class="keyword">null</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Integer pageNo=pageRequest.getPageNumber();<span class="comment">//第几页</span></span><br><span class="line">        Integer pageSize=pageRequest.getPageSize();<span class="comment">//一页几条</span></span><br><span class="line">        Integer count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Map&lt;String, DataSource&gt; dataSourceMap = createDataSourceMap(dataSourceList);</span><br><span class="line">            DataSourceRule dataSourceRule = <span class="keyword">new</span> DataSourceRule(dataSourceMap);</span><br><span class="line">            TableRule[] tableRules=<span class="keyword">new</span> TableRule[dataSourceList.size()];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;dataSourceList.size() ; i++) &#123;</span><br><span class="line">                TableRule tableRule = TableRule.builder(<span class="string">"device_log"</span>).actualTables(Arrays.asList(<span class="string">"device_log"</span>)).dataSourceRule(dataSourceRule).build();</span><br><span class="line">                tableRules[i]=tableRule;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;TableRule&gt; newTableRule=Arrays.asList(tableRules);</span><br><span class="line">            <span class="comment">//TableRule orderTableRule = TableRule.builder("device_log").actualTables(Arrays.asList("device_log")).dataSourceRule(dataSourceRule).build();</span></span><br><span class="line">            ShardingRule shardingRule = ShardingRule.builder().dataSourceRule(dataSourceRule).tableRules(newTableRule)</span><br><span class="line">                    .databaseShardingStrategy(<span class="keyword">new</span> DatabaseShardingStrategy(<span class="string">"create_time"</span>, <span class="keyword">new</span> ModuloDatabaseShardingAlgorithm()))</span><br><span class="line">                    .tableShardingStrategy(<span class="keyword">new</span> TableShardingStrategy(<span class="string">"create_time"</span>, <span class="keyword">new</span> ModuloTableShardingAlgorithm())).build();</span><br><span class="line">            DataSource dataSource = <span class="keyword">new</span> ShardingDataSource(shardingRule);</span><br><span class="line">            <span class="comment">//2.获得数据库的连接</span></span><br><span class="line">            conn=dataSource.getConnection();</span><br><span class="line">            <span class="comment">//构造一个statement对象来执行sql语句：主要有Statement，PreparedStatement，CallableStatement三种实例来实现</span></span><br><span class="line"><span class="comment">//            stmt=conn.createStatement();</span></span><br><span class="line">            <span class="comment">//获得总个数</span></span><br><span class="line">            String countSql = <span class="string">"select count(*) totalCount from ("</span> + sql + <span class="string">" ) cout"</span>;</span><br><span class="line">            PreparedStatement pstmt = conn.prepareStatement(countSql);</span><br><span class="line">            rs=pstmt.executeQuery();</span><br><span class="line">            count=rs.getInt(<span class="string">"totalCount"</span>);</span><br><span class="line">            StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="string">"SELECT * FROM "</span>);</span><br><span class="line">            sb.append(<span class="string">"( "</span>);</span><br><span class="line">            sb.append(sql);</span><br><span class="line">            sb.append(<span class="string">") A limit "</span> + ( pageNo* pageSize) + <span class="string">","</span> +  pageSize + <span class="string">""</span>);</span><br><span class="line">            PreparedStatement pstmts = conn.prepareStatement(sb.toString());</span><br><span class="line">            rs=pstmts.executeQuery();</span><br><span class="line">            <span class="comment">//PreparedStatement pstmt = conn.prepareStatement(sql);</span></span><br><span class="line">            <span class="comment">//执行sql并返还结束 ；</span></span><br><span class="line"></span><br><span class="line">            ResultSetMetaData md = rs.getMetaData(); <span class="comment">//获得结果集结构信息,元数据</span></span><br><span class="line">            <span class="keyword">int</span> columnCount = md.getColumnCount();   <span class="comment">//获得列数</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Map&lt;String,Object&gt; rowData = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                    rowData.put(md.getColumnName(i), rs.getObject(i));</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(rowData);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(rs !=<span class="keyword">null</span>)&#123;<span class="comment">//11.关闭记录集</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn !=<span class="keyword">null</span>)&#123;<span class="comment">//13.关闭连接 （记住一定要先关闭前面的11.12.然后在关闭连接，就像关门一样，先关里面的，最后关最外面的）</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyPage(pageRequest, list, count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将获得的数据库与java的链接返回（返回的类型为Connection）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Map&lt;String,Object&gt;&gt; getConnection(List&lt;NewDataSource&gt; dataSourceList, String sql)&#123;</span><br><span class="line">        ResultSet rs=<span class="keyword">null</span>;</span><br><span class="line">        Connection conn=<span class="keyword">null</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Integer count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Map&lt;String, DataSource&gt; dataSourceMap = createDataSourceMap(dataSourceList);</span><br><span class="line">            DataSourceRule dataSourceRule = <span class="keyword">new</span> DataSourceRule(dataSourceMap);</span><br><span class="line">            TableRule[] tableRules=<span class="keyword">new</span> TableRule[dataSourceList.size()];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;dataSourceList.size() ; i++) &#123;</span><br><span class="line">                TableRule tableRule = TableRule.builder(<span class="string">"device_log"</span>).actualTables(Arrays.asList(<span class="string">"device_log"</span>)).dataSourceRule(dataSourceRule).build();</span><br><span class="line">                tableRules[i]=tableRule;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;TableRule&gt; newTableRule=Arrays.asList(tableRules);</span><br><span class="line">            <span class="comment">//TableRule orderTableRule = TableRule.builder("device_log").actualTables(Arrays.asList("device_log")).dataSourceRule(dataSourceRule).build();</span></span><br><span class="line">            ShardingRule shardingRule = ShardingRule.builder().dataSourceRule(dataSourceRule).tableRules(newTableRule)</span><br><span class="line">                    .databaseShardingStrategy(<span class="keyword">new</span> DatabaseShardingStrategy(<span class="string">"create_time"</span>, <span class="keyword">new</span> ModuloDatabaseShardingAlgorithm()))</span><br><span class="line">                    .tableShardingStrategy(<span class="keyword">new</span> TableShardingStrategy(<span class="string">"create_time"</span>, <span class="keyword">new</span> ModuloTableShardingAlgorithm())).build();</span><br><span class="line">            DataSource dataSource = <span class="keyword">new</span> ShardingDataSource(shardingRule);</span><br><span class="line">            <span class="comment">//2.获得数据库的连接</span></span><br><span class="line">            conn=dataSource.getConnection();</span><br><span class="line">            PreparedStatement pstmt = conn.prepareStatement(sql);</span><br><span class="line">            rs=pstmt.executeQuery();</span><br><span class="line">            ResultSetMetaData md = rs.getMetaData(); <span class="comment">//获得结果集结构信息,元数据</span></span><br><span class="line">            <span class="keyword">int</span> columnCount = md.getColumnCount();   <span class="comment">//获得列数</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                Map&lt;String,Object&gt; rowData = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                    rowData.put(md.getColumnName(i), rs.getObject(i));</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(rowData);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(rs !=<span class="keyword">null</span>)&#123;<span class="comment">//11.关闭记录集</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn !=<span class="keyword">null</span>)&#123;<span class="comment">//13.关闭连接 （记住一定要先关闭前面的11.12.然后在关闭连接，就像关门一样，先关里面的，最后关最外面的）</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> DataSource <span class="title">createDataSource</span><span class="params">(NewDataSource dataSource)</span> </span>&#123;</span><br><span class="line">        BasicDataSource result = <span class="keyword">new</span> BasicDataSource();</span><br><span class="line">        result.setDriverClassName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        String URL=<span class="string">"jdbc:mysql://"</span>+dataSource.getDataIp()+<span class="string">":"</span>+dataSource.getDataCode()+<span class="string">"/"</span>+dataSource.getDataDbName()+<span class="string">"?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=CONVERT_TO_NULL&amp;autoReconnect=true&amp;useSSL=false&amp;serverTimezone=GMT%2B8"</span>;</span><br><span class="line">        result.setUrl(URL);</span><br><span class="line">        result.setUsername(dataSource.getDataUserName());</span><br><span class="line">        result.setPassword(dataSource.getDataUserPassword());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, DataSource&gt; <span class="title">createDataSourceMap</span><span class="params">(List&lt;NewDataSource&gt; dataSourceList)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, DataSource&gt; mapList = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dataSourceList.size(); i++) &#123;</span><br><span class="line">            NewDataSource dataSource=dataSourceList.get(i);</span><br><span class="line">            DataSource dataSource1=createDataSource(dataSource);</span><br><span class="line">            mapList.put(dataSource.getDataDbName(),dataSource1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mapList;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPage</span> <span class="keyword">implements</span> <span class="title">Page</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> PageRequest pageRequest;</span><br><span class="line">        <span class="keyword">private</span> List&lt;Map&lt;String, Object&gt;&gt; objectList;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> total;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyPage</span><span class="params">(PageRequest pageRequest, List&lt;Map&lt;String,Object&gt;&gt; objectList, <span class="keyword">int</span> total)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.pageRequest = pageRequest;</span><br><span class="line">            <span class="keyword">this</span>.objectList = objectList;</span><br><span class="line">            <span class="keyword">this</span>.total = total;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageNumber();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageSize();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTotalPages</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (total % pageRequest.getPageSize() == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> total/pageRequest.getPageSize();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> total/pageRequest.getPageSize()+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumberOfElements</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getTotalElements</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.total;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Page <span class="title">map</span><span class="params">(Converter converter)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Iterator&lt;Map&lt;String,Object&gt;&gt; iterator() &#123;</span><br><span class="line">            <span class="keyword">return</span> objectList.iterator();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; getContent() &#123;</span><br><span class="line">            <span class="keyword">return</span> objectList;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> objectList!=<span class="keyword">null</span>&amp;&amp;objectList.size()&gt;<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Sort <span class="title">getSort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageNumber() == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageNumber()==getTotalPages()-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageNumber()&lt;getTotalPages()-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrevious</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pageRequest.getPageNumber() &gt;<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Pageable <span class="title">nextPageable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Pageable <span class="title">previousPageable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>因为我需要分页所以这里就再次封装一个</p>
<h1 id="ModuloDatabaseShardingAlgorithm"><a href="#ModuloDatabaseShardingAlgorithm" class="headerlink" title="ModuloDatabaseShardingAlgorithm"></a>ModuloDatabaseShardingAlgorithm</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.ShardingValue;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.strategy.database.SingleKeyDatabaseShardingAlgorithm;</span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Range;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> ModuloDatabaseShardingAlgorithm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Created by asus on 2018/12/1012:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModuloDatabaseShardingAlgorithm</span> <span class="keyword">implements</span> <span class="title">SingleKeyDatabaseShardingAlgorithm</span>&lt;<span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doEqualSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String each : collection) &#123;</span><br><span class="line">            <span class="keyword">if</span> (each.endsWith(shardingValue.getValue() % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> each;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">doInSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        Collection&lt;String&gt; result = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(collection.size());</span><br><span class="line">        <span class="keyword">for</span> (Integer value : shardingValue.getValues()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String tableName : collection) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tableName.endsWith(value % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                    result.add(tableName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">doBetweenSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        Collection&lt;String&gt; result = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(collection.size());</span><br><span class="line">        Range&lt;Integer&gt; range = (Range&lt;Integer&gt;) shardingValue.getValueRange();</span><br><span class="line">        <span class="keyword">for</span> (Integer i = range.lowerEndpoint(); i &lt;= range.upperEndpoint(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String each : collection) &#123;</span><br><span class="line">                <span class="keyword">if</span> (each.endsWith(i % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                    result.add(each);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ModuloTableShardingAlgorithm"><a href="#ModuloTableShardingAlgorithm" class="headerlink" title="ModuloTableShardingAlgorithm"></a>ModuloTableShardingAlgorithm</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.ShardingValue;</span><br><span class="line"><span class="keyword">import</span> com.dangdang.ddframe.rdb.sharding.api.strategy.table.SingleKeyTableShardingAlgorithm;</span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Range;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> ModuloTableShardingAlgorithm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Created by asus on 2018/12/1012:13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModuloTableShardingAlgorithm</span> <span class="keyword">implements</span> <span class="title">SingleKeyTableShardingAlgorithm</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doEqualSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String each : collection) &#123;</span><br><span class="line">            <span class="keyword">if</span> (each.endsWith(shardingValue.getValue() % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> each;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">doInSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        Collection&lt;String&gt; result = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(collection.size());</span><br><span class="line">        <span class="keyword">for</span> (Integer value : shardingValue.getValues()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String tableName : collection) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tableName.endsWith(value % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                    result.add(tableName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">doBetweenSharding</span><span class="params">(Collection&lt;String&gt; collection, ShardingValue&lt;Integer&gt; shardingValue)</span> </span>&#123;</span><br><span class="line">        Collection&lt;String&gt; result = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(collection.size());</span><br><span class="line">        Range&lt;Integer&gt; range = (Range&lt;Integer&gt;) shardingValue.getValueRange();</span><br><span class="line">        <span class="keyword">for</span> (Integer i = range.lowerEndpoint(); i &lt;= range.upperEndpoint(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String each : collection) &#123;</span><br><span class="line">                <span class="keyword">if</span> (each.endsWith(i % <span class="number">2</span> + <span class="string">""</span>)) &#123;</span><br><span class="line">                    result.add(each);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我把table的也给贴出来了<br>引用的时候<br>先查出动态的数据源信息 dataSourceList和编写好sql</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt; mapList=DBUtil.getConnection(dataSourceList,sql);</span><br></pre></td></tr></table></figure>
<p>就可以得到查出的map集合,下面是我封装的分页<br>pageRequest就是这样来的<br><img src="https://trhsy.github.io/img/fy.png" alt="分页"><br>分页调用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Page&lt;Map&lt;String,Object&gt;&gt; pageInfo = DBUtil.getPage(dataSourceList,sql,pageRequest);</span><br></pre></td></tr></table></figure>

<p>到此动态数据源分库分页查询就结束了</p>
]]></content>
      <categories>
        <category>sharding-jdbc</category>
      </categories>
      <tags>
        <tag>sharding-jdbc</tag>
        <tag>dangdang</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>如何为next主题添加不蒜子统计</title>
    <url>/posts/b55a1469/</url>
    <content><![CDATA[<h1 id="如何为next主题添加不蒜子统计"><a href="#如何为next主题添加不蒜子统计" class="headerlink" title="如何为next主题添加不蒜子统计"></a>如何为next主题添加不蒜子统计</h1><p>打开next主题配置文件_config.yml<br>搜索busuanzi_count修改为</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  # count values only if the other configs are false</span><br><span class="line">  enable: true</span><br><span class="line">  # custom uv span for the whole site</span><br><span class="line">  site_uv: true</span><br><span class="line">  site_uv_header: <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 本站访问数</span><br><span class="line">  site_uv_footer: 人</span><br><span class="line">  # custom pv span for the whole site</span><br><span class="line">  site_pv: true</span><br><span class="line">  site_pv_header: <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-eye"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 本站总访问量</span><br><span class="line">  site_pv_footer: 次</span><br><span class="line">  # custom pv span for one page only</span><br><span class="line">  page_pv: false</span><br><span class="line">  page_pv_header: <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-file-o"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 本文总阅读量</span><br><span class="line">  page_pv_footer: 次</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<p>完了之后你会发现并不能统计为啥呢，当时我也是一脑袋懵<br>后来找度娘才发信原来是<span class="exturl" data-url="aHR0cDovL2J1c3VhbnppLmlicnVjZS5pbmZvLz9zcG09YTJjNGUuMTExNTM5NDAuYmxvZ2NvbnQ2NDgzNTcuNi4xMDkyMzFjYnFkR0M4bw==">官网地址<i class="fa fa-external-link-alt"></i></span>变了<br>那就改吧，没办法只能自己搞了<br><code>themes\next\layout\_third-party\analytics\busuanzi-counter.swig</code><br>你项目的地址找到这个文件打开<br><img src="https://trhsy.github.io/img/busuanzi.png" alt="busuanzi"><br>我们发现跟官网上不一样白链接替换成<br><span class="exturl" data-url="aHR0cHM6Ly9idXN1YW56aS5pYnJ1Y2UuaW5mby9idXN1YW56aS8yLjMvYnVzdWFuemkucHVyZS5taW5pLmpz">https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js<i class="fa fa-external-link-alt"></i></span><br>之后</p>
<h2 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h2><p>用于统计文章的字数以及分析出阅读时间。<br>在主题配置文件中，搜索<code>wordcount</code>，设置为下面这样就可以了：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Post wordcount display settings</span><br><span class="line"># Dependencies: https://github.com/willin/hexo-wordcount</span><br><span class="line">post_wordcount:</span><br><span class="line">  item_text: true</span><br><span class="line">  min2read: true</span><br><span class="line">  wordcount: true</span><br><span class="line">  separated_meta: true</span><br></pre></td></tr></table></figure>
<p>再打开<code>\themes\next\layout\_macro\post.swig</code>文件，在leancloud-visitors-count后面位置添加一个分割符 |</p>
<p>另外，在<code>/themes/next/layout/_partials/footer.swig</code>文件endif %}前加上下面代码可以实现在站点底部统计全站字数：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;theme-info&quot;&gt;</span><br><span class="line">  &lt;span class&#x3D;&quot;post-count&quot;&gt;Total Words:&#123;&#123; totalcount(site) &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<p>如果无法显示可能是hexo-wordcount插件没有安装，git bash在网站根目录安装一下就可以：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>
<h2 id="增加版权信息"><a href="#增加版权信息" class="headerlink" title="增加版权信息"></a>增加版权信息</h2><p>在目录<code>themes/next/layout/_macro/</code>下添加my-copyright.swig，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% if page.copyright %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my_post_copyright"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- JS库 sweetalert 可修改路径 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/sweetalert/dist/sweetalert.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>本文标题:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(page.path) &#125;&#125;"</span>&gt;</span>&#123;&#123; page.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>文章作者:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">title</span>=<span class="string">"访问 &#123;&#123; theme.author &#125;&#125; 的个人博客"</span>&gt;</span>&#123;&#123; theme.author &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>发布时间:<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; page.date.format("YYYY年MM月DD日 - HH:MM") &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>最后更新:<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#123; page.updated.format("YYYY年MM月DD日 - HH:MM") &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>原始链接:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(page.path) &#125;&#125;"</span> <span class="attr">title</span>=<span class="string">"&#123;&#123; page.title &#125;&#125;"</span>&gt;</span>&#123;&#123; page.permalink &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"copy-path"</span>  <span class="attr">title</span>=<span class="string">"点击复制文章链接"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-clipboard"</span> <span class="attr">data-clipboard-text</span>=<span class="string">"&#123;&#123; page.permalink &#125;&#125;"</span>  <span class="attr">aria-label</span>=<span class="string">"复制成功！"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>许可协议:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-creative-commons"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">rel</span>=<span class="string">"license"</span> <span class="attr">href</span>=<span class="string">"https://creativecommons.org/licenses/by-nc-nd/4.0/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">title</span>=<span class="string">"Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"</span>&gt;</span>署名-非商业性使用-禁止演绎 4.0 国际<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 转载请保留原文链接及作者。<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">'.fa-clipboard'</span>);</span></span><br><span class="line"><span class="javascript">    $(<span class="string">".fa-clipboard"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">      clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">        swal(&#123;   </span><br><span class="line"><span class="actionscript">          title: <span class="string">""</span>,   </span></span><br><span class="line"><span class="actionscript">          text: <span class="string">'复制成功'</span>,</span></span><br><span class="line"><span class="actionscript">          icon: <span class="string">"success"</span>, </span></span><br><span class="line"><span class="actionscript">          showConfirmButton: <span class="literal">true</span></span></span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;);  </span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>在目录<code>themes/next/source/css/_common/components/post/</code>下添加my-post-copyright.styl：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.my_post_copyright</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">45em</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2.8em</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span> <span class="number">1.0em</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d3d3d3</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.93rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.6em</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.4</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">p</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5.2em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#b5b5b5</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.raw</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#808080</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a3d2a3</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.fa-clipboard</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.post-url</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.copy-path</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span>;</span><br><span class="line">  +mobile()&#123;display:none;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_post_copyright</span> <span class="selector-class">.copy-path</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#808080</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改<code>themes/next/layout/_macro/post.swig</code>，在代码:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.wechat_subscriber.enabled and not is_index %&#125;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">       &#123;% include 'wechat-subscriber.swig' %&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;% if not is_index %&#125;</span><br><span class="line">        &#123;% include 'my-copyright.swig' %&#125;</span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改<code>themes/next/source/css/_common/components/post/post.styl</code>文件，在最后一行增加代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">"my-post-copyright"</span></span><br></pre></td></tr></table></figure>
<p>最后到站点根目录<code>/scaffolds/post.md</code>，在两个—中间增加一行：<code>copyright: true</code></p>
<h2 id="个性化优化"><a href="#个性化优化" class="headerlink" title="个性化优化"></a>个性化优化</h2><h3 id="设置字体"><a href="#设置字体" class="headerlink" title="设置字体"></a>设置字体</h3><p>在主题配置文件中设置，例如：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">font:</span><br><span class="line">  enable: true</span><br><span class="line"></span><br><span class="line">  # Uri of fonts host. E.g. //fonts.googleapis.com (Default).</span><br><span class="line">  host: https://fonts.cat.net</span><br><span class="line"></span><br><span class="line">  # Font options:</span><br><span class="line">  # `external: true` will load this font family from `host` above.</span><br><span class="line">  # `family: Times New Roman`. Without any quotes.</span><br><span class="line">  # `size: xx`. Use `px` as unit.</span><br><span class="line"></span><br><span class="line">  # 全局字体，应用在 body 元素上 Global font settings used on <span class="tag">&lt;<span class="name">body</span>&gt;</span> element.</span><br><span class="line">  global:</span><br><span class="line">    external: true</span><br><span class="line">    family: Monda</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # Font settings for Headlines (h1, h2, h3, h4, h5, h6).</span><br><span class="line">  # Fallback to `global` font settings.</span><br><span class="line">  headings:</span><br><span class="line">    external: true</span><br><span class="line">    family: Roboto Slab</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # Font settings for posts.</span><br><span class="line">  #  文章字体Fallback to `global` font settings.</span><br><span class="line">  posts:</span><br><span class="line">    external: true</span><br><span class="line">    family:</span><br><span class="line"></span><br><span class="line">  # Font settings for Logo.</span><br><span class="line">  # Fallback to `global` font settings.</span><br><span class="line">  logo:</span><br><span class="line">    external: true</span><br><span class="line">    family: Lobster Two</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # 代码字体，应用于 code 以及代码块 Font settings for <span class="tag">&lt;<span class="name">code</span>&gt;</span> and code blocks.</span><br><span class="line">  codes:</span><br><span class="line">    external: true</span><br><span class="line">    family: PT Mono</span><br><span class="line">    size:</span><br></pre></td></tr></table></figure>
<h3 id="设置代码高亮主题"><a href="#设置代码高亮主题" class="headerlink" title="设置代码高亮主题"></a>设置代码高亮主题</h3><p>NexT 默认使用的是 normal 主题，可选的值有 normal，night， night blue， night bright， night eighties：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Code Highlight theme</span><br><span class="line"># Available value:</span><br><span class="line">#    normal | night | night eighties | night blue | night bright</span><br><span class="line"># https://github.com/chriskempson/tomorrow-theme</span><br><span class="line">highlight_theme: normal</span><br></pre></td></tr></table></figure>
<h3 id="设置小型代码块颜色"><a href="#设置小型代码块颜色" class="headerlink" title="设置小型代码块颜色"></a>设置小型代码块颜色</h3><p>修改<code>\themes\next\source\css\_variables\base.styl</code>文件，修改$code-background和$code-foreground的值：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">$black-deep   = #222</span><br><span class="line">$red          = #ff2a2a</span><br><span class="line">$blue-bright  = #87daff</span><br><span class="line">$blue         = #0684bd</span><br><span class="line">$blue-deep    = #262a30</span><br><span class="line">$orange       = #fc6423</span><br><span class="line">// 自定义的颜色</span><br><span class="line">$my-code-foreground = #dd0055  // 用``围出的代码块字体颜色</span><br><span class="line">$my-code-background = #eee  // 用``围出的代码块背景颜色</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// Code &amp; Code Blocks</span><br><span class="line">// --------------------------------------------------</span><br><span class="line">$code-font-family               = $font-family-monospace</span><br><span class="line">$code-font-size                 = 13px</span><br><span class="line">$code-font-size                 = unit(hexo-config('font.codes.size'), px) if hexo-config('font.codes.size') is a 'unit'</span><br><span class="line">$code-border-radius             = 3px</span><br><span class="line">//$code-foreground                = $black-light</span><br><span class="line">//$code-background                = $gainsboro</span><br><span class="line"></span><br><span class="line">$code-background = $my-code-background </span><br><span class="line">$code-foreground = $my-code-foreground</span><br></pre></td></tr></table></figure>
<p>修改<code>themes\next\source\css\_custom\custom.styl</code>文件，加入自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 文章``代码块的自定义样式</span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改<code>themes\next\source\css\_custom\custom.styl</code>文件，加入自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//文章内链接文本样式</span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#fc6423</span>;</span><br><span class="line">    <span class="selector-tag">border-bottom</span>: <span class="selector-tag">none</span>;</span><br><span class="line">    <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fc6423</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改<code>themes\next\source\css\_custom\custom.styl</code>文件，加入自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// [Read More]按钮样式</span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transition-property</span>: unset;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, #a166ab <span class="number">0%</span>, #ef4e7b <span class="number">25%</span>, #f37055 <span class="number">50%</span>, #ef4e7b <span class="number">75%</span>, #a166ab <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="左上角或右上角的Github样式"><a href="#左上角或右上角的Github样式" class="headerlink" title="左上角或右上角的Github样式"></a>左上角或右上角的Github样式</h3><p>具体实现方式便是到<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHAlM0ElMkYlMkZ0aG9sbWFuLmNvbSUyRmdpdGh1Yi1jb3JuZXJzJTJG">样式1<i class="fa fa-external-link-alt"></i></span>或者<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmJsb2clMkYyNzMtZ2l0aHViLXJpYmJvbnM=">样式2<i class="fa fa-external-link-alt"></i></span>的网站中选择你喜欢的样式，复制其中的代码到<code>themes/next/layout/_layout.swig</code>文件中(放在<code>&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;</code>的下面)，并把href改为你的github地址。</p>
<h3 id="添加背景动画"><a href="#添加背景动画" class="headerlink" title="添加背景动画"></a>添加背景动画</h3><p>NexT已经自带了多种背景动画效果，你只需要根据需求在主题配置文件修改其中一个为true即可。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Canvas-nest </span><br><span class="line">canvas_nest: true</span><br><span class="line"></span><br><span class="line"># three_waves</span><br><span class="line">three_waves: false</span><br><span class="line"></span><br><span class="line"># canvas_lines</span><br><span class="line">canvas_lines: false</span><br><span class="line"></span><br><span class="line"># canvas_sphere</span><br><span class="line">canvas_sphere: false</span><br><span class="line"></span><br><span class="line"># Only fit scheme Pisces</span><br><span class="line"># Canvas-ribbon</span><br><span class="line">canvas_ribbon: false</span><br></pre></td></tr></table></figure>
<h3 id="添加顶部加载条"><a href="#添加顶部加载条" class="headerlink" title="添加顶部加载条"></a>添加顶部加载条</h3><p>在主题配置文件中搜索pace：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Progress bar in the top during page loading.</span><br><span class="line">pace: true</span><br><span class="line"># Themes list:</span><br><span class="line">#pace-theme-big-counter</span><br><span class="line">#pace-theme-bounce</span><br><span class="line">#pace-theme-barber-shop</span><br><span class="line">#pace-theme-center-atom</span><br><span class="line">#pace-theme-center-circle</span><br><span class="line">#pace-theme-center-radar</span><br><span class="line">#pace-theme-center-simple</span><br><span class="line">#pace-theme-corner-indicator</span><br><span class="line">#pace-theme-fill-left</span><br><span class="line">#pace-theme-flash</span><br><span class="line">#pace-theme-loading-bar</span><br><span class="line">#pace-theme-mac-osx</span><br><span class="line">#pace-theme-minimal</span><br><span class="line"># For example</span><br><span class="line"># pace_theme: pace-theme-center-simple</span><br><span class="line">pace_theme: pace-theme-flash</span><br></pre></td></tr></table></figure>
<h3 id="修改文章内链接文本样式"><a href="#修改文章内链接文本样式" class="headerlink" title="修改文章内链接文本样式"></a>修改文章内链接文本样式</h3><p>修改文件 <code>themes\next\source\css\_common\components\post\post.styl</code>，在末尾添加如下css样式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 文章内链接文本样式</span><br><span class="line">.post-body p a&#123;</span><br><span class="line">  color: #0593d3;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">  border-bottom: 1px solid #0593d3;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: #fc6423;</span><br><span class="line">    border-bottom: none;</span><br><span class="line">    border-bottom: 1px solid #fc6423;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改文章底部标签样式"><a href="#修改文章底部标签样式" class="headerlink" title="修改文章底部标签样式"></a>修改文章底部标签样式</h3><p>修改<code>/themes/next/layout/_macro/post.swig</code>，搜索 <code>rel=&quot;tag&quot;&gt;#</code>，将 <code>#</code> 换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>
<h3 id="文章末尾统一添加“本文结束”标记"><a href="#文章末尾统一添加“本文结束”标记" class="headerlink" title="文章末尾统一添加“本文结束”标记"></a>文章末尾统一添加“本文结束”标记</h3><p>在路径<code>\themes\next\layout\_macro</code>中新建<code>passage-end-tag.swig</code>文件,并添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #555;font-size:14px;"</span>&gt;</span>-------------The End-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着打开\themes\next\layout_macro\post.swig文件，在这个位置<code>wechat-subscriber.swig</code>上方添加代码：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后打开主题配置文件，在末尾添加：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 文章末尾添加“本文结束”标记</span><br><span class="line">passage_end_tag:</span><br><span class="line">  enabled: true</span><br></pre></td></tr></table></figure>
<h3 id="修改作者头像并旋转"><a href="#修改作者头像并旋转" class="headerlink" title="修改作者头像并旋转"></a>修改作者头像并旋转</h3><p>打开<code>\themes\next\source\css\_common\components\sidebar\sidebar-author.styl</code>，在里面添加如下代码:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  <span class="comment">/* 头像圆形 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#333</span>sf;</span><br><span class="line">  <span class="comment">/* 设置循环动画 [animation: (play)动画名称 (2s)动画播放时长单位秒或微秒 (ase-out)动画播放的速度曲线为以低速结束 </span></span><br><span class="line"><span class="comment">    (1s)等待1秒然后开始动画 (1)动画播放次数(infinite为循环播放) ]*/</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度 */</span></span><br><span class="line">  <span class="attribute">-webkit-transition</span>: -webkit-transform <span class="number">1.0s</span> ease-out;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: -moz-transform <span class="number">1.0s</span> ease-out;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1.0s</span> ease-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 鼠标经过停止头像旋转 </span></span><br><span class="line"><span class="comment">  -webkit-animation-play-state:paused;</span></span><br><span class="line"><span class="comment">  animation-play-state:paused;*/</span></span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度 */</span></span><br><span class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(<span class="number">360deg</span>);</span><br><span class="line">  <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(<span class="number">360deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Z 轴旋转动画 */</span></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(-<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(-<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(-<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="文章添加阴影效果"><a href="#文章添加阴影效果" class="headerlink" title="文章添加阴影效果"></a>文章添加阴影效果</h2><p>打开<code>\themes\next\source\css\_custom\custom.styl</code>,向里面加入：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">// 主页文章添加阴影效果</span><br><span class="line"> .post &#123;</span><br><span class="line">   margin-top: 60px;</span><br><span class="line">   margin-bottom: 60px;</span><br><span class="line">   padding: 25px;</span><br><span class="line">   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改打赏部分字体动画"><a href="#修改打赏部分字体动画" class="headerlink" title="修改打赏部分字体动画"></a>修改打赏部分字体动画</h3><p>Next打赏部分的动画是鬼畜一般的不停地抖动，看着很难受，所以博主把它改为只循环三遍，打开文件<code>themes/next/source/css/_common/components/post/post-reward.styl</code>，把微信和支付宝的改为如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#wechat</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">    <span class="attribute">-moz-animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#alipay</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">    <span class="attribute">-moz-animation</span>: roll <span class="number">0.1s</span> <span class="number">3</span> linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义鼠标样式"><a href="#自定义鼠标样式" class="headerlink" title="自定义鼠标样式"></a>自定义鼠标样式</h3><p>打开<code>themes/next/source/css/_custom/custom.styl</code>，添加代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 鼠标样式</span><br><span class="line">  * &#123;</span><br><span class="line">      <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">"http://om8u46rmb.bkt.clouddn.com/sword2.ico"</span>),auto<span class="meta">!important</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">      <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">"http://om8u46rmb.bkt.clouddn.com/sword1.ico"</span>),auto<span class="meta">!important</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>其中 url 里面必须是 ico 图片，ico 图片可以上传到网上（推荐七牛云图床），然后获取外链，复制到 url 里就行了。</p>
<h3 id="修改文章页宽"><a href="#修改文章页宽" class="headerlink" title="修改文章页宽"></a>修改文章页宽</h3><p>打开themes/next/source/css/_variables/base.styl，找到以下字段并修改为合适的宽度：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//$content-desktop-large          = 900px</span><br><span class="line">$content-desktop-large          = 1000px</span><br></pre></td></tr></table></figure>
<p>修改<code>themes/next/layout/page.swig</code>文件，加入自定义样式:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;&#123; tagcloud(&#123;min_font: 13, max_font: 31, amount: 1000, color: true, start_color: '#9733EE', end_color: '#FF512F'&#125;) &#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="隐藏底部”强力驱动”内容"><a href="#隐藏底部”强力驱动”内容" class="headerlink" title="隐藏底部”强力驱动”内容"></a>隐藏底部”强力驱动”内容</h3><p>修改<code>themes/next/_config.yml</code>文件,将powered和enable设置为false</p>
<p>最后</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>更新后你就会发现可以了</p>
]]></content>
      <categories>
        <category>不蒜子</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>网站搭建</tag>
        <tag>不蒜子</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo编辑器HexoEditor1</title>
    <url>/posts/undefined/</url>
    <content><![CDATA[<script type="text/javascript" src="/js/src/bai.js"></script>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>编辑器</tag>
      </tags>
  </entry>
  <entry>
    <title>安装Git和配置好Git环境</title>
    <url>/posts/c84c2baa/</url>
    <content><![CDATA[<h1 id="安装Git和配置好Git环境"><a href="#安装Git和配置好Git环境" class="headerlink" title="安装Git和配置好Git环境"></a>安装Git和配置好Git环境</h1><p><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZA==">点击这里可以直接跳转到git下载页面<i class="fa fa-external-link-alt"></i></span><br>安装之前先确定电脑上没有安装Git</p>
<a id="more"></a>

<p>win+R 输入cmd 回车打开Dos命令行；<br>输入git或者git –version，回车，<br><img src="https://trhsy.github.io/img/git-version.png" alt="git-version"></p>
<h2 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h2><h3 id="双击打开下载好的安装包，点击下一步"><a href="#双击打开下载好的安装包，点击下一步" class="headerlink" title="双击打开下载好的安装包，点击下一步"></a>双击打开下载好的安装包，点击下一步</h3><p><img src="https://trhsy.github.io/img/git-1.png" alt="git-14"></p>
<h3 id="自定义安装目录"><a href="#自定义安装目录" class="headerlink" title="自定义安装目录"></a>自定义安装目录</h3><p><img src="https://trhsy.github.io/img/git-2.png" alt="git-14"></p>
<h3 id="默认选项可以不用修改"><a href="#默认选项可以不用修改" class="headerlink" title="默认选项可以不用修改"></a>默认选项可以不用修改</h3><p><img src="https://trhsy.github.io/img/git-3.png" alt="git-14"></p>
<h3 id="直接下一步"><a href="#直接下一步" class="headerlink" title="直接下一步"></a>直接下一步</h3><p><img src="https://trhsy.github.io/img/git-4.png" alt="git-14"></p>
<h3 id="文件夹为Git，建议不要修改，下一步"><a href="#文件夹为Git，建议不要修改，下一步" class="headerlink" title="文件夹为Git，建议不要修改，下一步"></a>文件夹为Git，建议不要修改，下一步</h3><p><img src="https://trhsy.github.io/img/git-5.png" alt="git-14"></p>
<h3 id="这里建议选择第二项，下一步"><a href="#这里建议选择第二项，下一步" class="headerlink" title="这里建议选择第二项，下一步"></a>这里建议选择第二项，下一步</h3><p><img src="https://trhsy.github.io/img/git-6.png" alt="git-14"></p>
<h3 id="默认勾选第一项，下一步"><a href="#默认勾选第一项，下一步" class="headerlink" title="默认勾选第一项，下一步"></a>默认勾选第一项，下一步</h3><p><img src="https://trhsy.github.io/img/git-7.png" alt="git-14"></p>
<h3 id="默认勾选第一项，下一步-1"><a href="#默认勾选第一项，下一步-1" class="headerlink" title="默认勾选第一项，下一步"></a>默认勾选第一项，下一步</h3><p><img src="https://trhsy.github.io/img/git-8.png" alt="git-14"></p>
<h3 id="默认就行，下一步"><a href="#默认就行，下一步" class="headerlink" title="默认就行，下一步"></a>默认就行，下一步</h3><p><img src="https://trhsy.github.io/img/git-9.png" alt="git-14"></p>
<h3 id="默认就行，下一步-1"><a href="#默认就行，下一步-1" class="headerlink" title="默认就行，下一步"></a>默认就行，下一步</h3><p><img src="https://trhsy.github.io/img/git-10.png" alt="git-14"></p>
<h3 id="默认就行，点击Install，进行安装；"><a href="#默认就行，点击Install，进行安装；" class="headerlink" title="默认就行，点击Install，进行安装；"></a>默认就行，点击Install，进行安装；</h3><p><img src="https://trhsy.github.io/img/git-11.png" alt="git-14"></p>
<h3 id="等待安装完成"><a href="#等待安装完成" class="headerlink" title="等待安装完成"></a>等待安装完成</h3><p><img src="https://trhsy.github.io/img/git-12.png" alt="git-14"></p>
<h3 id="安装完成"><a href="#安装完成" class="headerlink" title="安装完成"></a>安装完成</h3><p><img src="https://trhsy.github.io/img/git-13.png" alt="git-14"></p>
<p>安装其实没啥，更换安装路径就行一路下一步就好</p>
<h2 id="配置git"><a href="#配置git" class="headerlink" title="配置git"></a>配置git</h2><p>其实就是检查一下Git能不能用，这里要重新打开cmd，输入<br>输入git或者git –version，回车，<br><img src="https://trhsy.github.io/img/git-14.png" alt="git-14"></p>
<p>好了到这里就全部配置完成了<br>如果要使用TortoiseGit,配合git使用<a href="https://trhsy.github.io/tortoisegit">请移步</a></p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo+GitHub搭建个人博客</title>
    <url>/posts/1764703/</url>
    <content><![CDATA[<h1 id="hexo-GitHub搭建个人博客"><a href="#hexo-GitHub搭建个人博客" class="headerlink" title="hexo+GitHub搭建个人博客"></a>hexo+GitHub搭建个人博客</h1><p>前言：看别人有一个自己的博客挺好的，反正都是程序员，为啥咱搞不出来，所以就网上搜索资料，依靠GitHub提供服务配合Hexo搭建个人博客，说来惭愧16年就有GitHub账号，一直不知道还有可以搭建博客的事情，哎<del>~</del>言归正传</p>
<a id="more"></a>
<h2 id="相关步骤："><a href="#相关步骤：" class="headerlink" title="相关步骤："></a>相关步骤：</h2><h3 id="准备工作-开始"><a href="#准备工作-开始" class="headerlink" title="准备工作 开始"></a>准备工作 开始</h3><p>win+R 输入cmd 回车<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\Users\骚爷&gt;npm -v</span><br><span class="line">6.4.1</span><br></pre></td></tr></table></figure>
<p>若没有出现版本号，进入nodejs官网：<span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==">https://nodejs.org/en/<i class="fa fa-external-link-alt"></i></span>，下载并安装好：<br><img src="https://trhsy.github.io/img/nodejs.jpg" alt="nodejs官网"></p>
<p>为啥要检查这个呢，往下看↓<br>安装Git和配置好Git环境，<a href="https://trhsy.github.io/git">请移步</a><br>查看一下版本<br><img src="https://trhsy.github.io/img/git_version.jpg" alt="git版本"><br>你若安装了可以跳过这一步骤<br>揭下来就是Github账户注册和新建项目，项目必须要遵守格式：账户名.github.io，不然接下来会有很多麻烦。<br>账户注册很简单，可能会耗时间这里就不讲了，直接新建项目，主要右上角有个加号，点击选择new repository<br><img src="https://trhsy.github.io/img/new_repository.jpg" alt="创建项目"><br>输入名字，注意名字一定要以 账户名.github.io的格式<br><img src="https://trhsy.github.io/img/create.jpg" alt="账户名"><br>在建好的项目右侧有个settings按钮，点击它，向下拉到GitHub Pages，你会看到那边有个网址就是https://你的项目名.github.io，访问它，你将会惊奇的发现该项目已经被部署到网络上，能够通过外网来访问它。<br><img src="https://trhsy.github.io/img/pages.jpg" alt="page"></p>
<h3 id="准备工作结束"><a href="#准备工作结束" class="headerlink" title="准备工作结束"></a>准备工作结束</h3><h2 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h2><p>到这里准备工作已经结束了，咱们开始安装hexo<br>我是为了方便存储直接放到了我的移动硬盘里，你也可在D盘下新建一个文件夹在cmd中切换到该目录下<br>下面是我的目录<br><img src="https://trhsy.github.io/img/myml.jpg" alt="我的目录"><br>之后直接输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo -g</span><br></pre></td></tr></table></figure>
<p>开始安装hexo,等待结束<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure>
<p><img src="https://trhsy.coding.me/img/hexo.jpg" alt="hexo版本"><br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo init</span><br><span class="line">&#96;</span><br></pre></td></tr></table></figure>
<p>初始化该文件夹，估计要等一下<br>看到后面的“Start blogging with Hexo！”，说明安装成功了<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>，安装所需要的组件<br>然后输入 <code>hexo g</code> 这个是生成文件，之后输入<code>hexo s</code><br>本地部署启动<br><img src="https://trhsy.coding.me/img/hexos.jpg" alt="hexo部署"><br>如出现下面的页面说明配置成功了<br><img src="https://trhsy.coding.me/img/hexohtml.png" alt="hexo成功"></p>
<h2 id="hexo与GitHub联系起来"><a href="#hexo与GitHub联系起来" class="headerlink" title="hexo与GitHub联系起来"></a>hexo与GitHub联系起来</h2><p>在你刚才创建的目录上右键 git Bash Here<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;你的github用户名&quot;</span><br><span class="line">git config --global user.email &quot;你的github邮箱&quot;</span><br></pre></td></tr></table></figure>
<p>设置Git的user name和email</p>
<p>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd ~&#x2F;.ssh</span><br></pre></td></tr></table></figure>
<p>，检查是否由.ssh的文件夹<br><img src="https://trhsy.coding.me/img/bash.jpg" alt="bash"><br>输入命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;你的邮箱&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://trhsy.coding.me/img/ssh.jpg" alt="ssh"><br>回车，回车输入Y,回车回车回车~~就能生成密钥默认存储路径C:\Users\用户.ssh<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">eval &quot;$(ssh-agent -s)&quot;</span><br><span class="line">ssh-add ~&#x2F;.ssh&#x2F;id_rsa</span><br></pre></td></tr></table></figure>
<p>添加密钥到ssh-agent,添加生成的SSH key到ssh-agent<br><img src="https://trhsy.coding.me/img/id_rsa.jpg" alt="id_rsa.jpg"><br>我们把刚才生成的密钥添加到github中，登录到github,右上角头像settings,<br><img src="https://trhsy.coding.me/img/settings.jpg" alt="settings.jpg"><br>左边菜单ssh and GPG keys 新建new ssh key<br><img src="https://trhsy.coding.me/img/sshkeys.jpg" alt="sshkeys.jpg"><br>把生成的id_rsa.pub文件记事本打开内容复制进去<br><img src="https://trhsy.coding.me/img/addkeys.jpg" alt="addkeys.jpg"><br>输入ssh -T <span class="exturl" data-url="bWFpbHRvOmdpdEBnaXRodWIuY29t">git@github.com<i class="fa fa-external-link-alt"></i></span>，测试添加ssh是否成功。<br><img src="https://trhsy.coding.me/img/hi.jpg" alt="hi.jpg"><br>如果看到Hi后面是你的用户名，就说明成功了<br>准备工作也好了，下面要配置怎么把hexo部署到github了</p>
<h2 id="部署hexo"><a href="#部署hexo" class="headerlink" title="部署hexo"></a>部署hexo</h2><p>首先到你创建的目录下找到_config.yml文件<br>修改完善 deploy</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:123love123/123love123.github.io.git</span></span><br><span class="line">  <span class="attr">brabch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p>repository值就是你创建的github项目下的ssh<br><img src="https://trhsy.coding.me/img/sshurl.jpg" alt="sshurl.jpg"><br>在生成部署之前需要安装一个扩展插件<br>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p><img src="https://trhsy.coding.me/img/kz.jpg" alt="kz.jpg"><br>好了之后就开始部署了<br>别人都是用命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d -g</span><br></pre></td></tr></table></figure>
<p>我不着用，为啥，我觉得有一个缺陷不知道是缓存还是什么每次都要等老长时间才能显示更新的东西，所以我认为是缺陷<br>我是这么干的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>拆开来，先生成，再部署<br><img src="https://trhsy.coding.me/img/hexo_gggg.jpg" alt="hexo_gggg.jpg"><br><img src="https://trhsy.coding.me/img/hexo_ddd.jpg" alt="hexo_ddd.jpg"><br>部署成功后访问你的地址：http://用户名.github.io<br>我之后修改了很多，修改了主题用的是next，<span class="exturl" data-url="aHR0cHM6Ly90cmhzeS5jb2RpbmcubWUvaGV4b19uZXh0">机票<i class="fa fa-external-link-alt"></i></span>,还添加了live2d，<span class="exturl" data-url="aHR0cHM6Ly90cmhzeS5jb2RpbmcubWUvbGl2ZTJk">机票<i class="fa fa-external-link-alt"></i></span>看板娘，而且是俩，为啥是俩呢本来自己看官方配置了一个挺好的，但是无意间看到别人整的还可以换衣服，我又找了度娘学习了一下，<span class="exturl" data-url="aHR0cHM6Ly90cmhzeS5jb2RpbmcubWU=">这是我的<i class="fa fa-external-link-alt"></i></span> 博客地址，后续我会把我制作博客的过程全部记录下来，今天就就到这里</p>
]]></content>
      <categories>
        <category>网站搭建</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>网站搭建</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>libgcc_s.so.1:无法打开共享对象文件:没有那个文件或目录</title>
    <url>/posts/14b7a388/</url>
    <content><![CDATA[<h1 id="libgcc-s-so-1-无法打开共享对象文件-没有那个文件或目录"><a href="#libgcc-s-so-1-无法打开共享对象文件-没有那个文件或目录" class="headerlink" title="libgcc_s.so.1: 无法打开共享对象文件: 没有那个文件或目录"></a>libgcc_s.so.1: 无法打开共享对象文件: 没有那个文件或目录</h1><p>错误前景，新的linux环境下配置jdk,tomcat启动之后动态验证码加载302</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">14</span>:<span class="number">37</span>:<span class="number">10.921</span> [catalina-exec-<span class="number">7</span>] ERROR o.s.b.w.s.ErrorPageFilter - [forwardToErrorPage,<span class="number">176</span>] - Forwarding to error page from request [/captcha/kaptcha.jpg] due to exception [Servlet execution threw an exception]</span><br><span class="line">javax.servlet.ServletException: Servlet execution threw an exception</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">326</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:<span class="number">52</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:<span class="number">108</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:<span class="number">137</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">125</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:<span class="number">108</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:<span class="number">137</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">125</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:<span class="number">61</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:<span class="number">108</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:<span class="number">137</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">125</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:<span class="number">66</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:<span class="number">449</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AbstractShiroFilter$<span class="number">1</span>.call(AbstractShiroFilter.java:<span class="number">365</span>)</span><br><span class="line">	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:<span class="number">90</span>)</span><br><span class="line">	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:<span class="number">83</span>)</span><br><span class="line">	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:<span class="number">383</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:<span class="number">362</span>)</span><br><span class="line">	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">125</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:<span class="number">83</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:<span class="number">99</span>)</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">107</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:<span class="number">105</span>)</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">107</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:<span class="number">81</span>)</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">107</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:<span class="number">197</span>)</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">107</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:<span class="number">115</span>)</span><br><span class="line">	at org.springframework.boot.web.support.ErrorPageFilter.access$<span class="number">000</span>(ErrorPageFilter.java:<span class="number">59</span>)</span><br><span class="line">	at org.springframework.boot.web.support.ErrorPageFilter$<span class="number">1</span>.doFilterInternal(ErrorPageFilter.java:<span class="number">90</span>)</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class="number">107</span>)</span><br><span class="line">	at org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:<span class="number">108</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">241</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">208</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:<span class="number">218</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:<span class="number">110</span>)</span><br><span class="line">	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:<span class="number">506</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:<span class="number">169</span>)</span><br><span class="line">	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:<span class="number">103</span>)</span><br><span class="line">	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:<span class="number">962</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:<span class="number">116</span>)</span><br><span class="line">	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:<span class="number">452</span>)</span><br><span class="line">	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:<span class="number">1087</span>)</span><br><span class="line">	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:<span class="number">637</span>)</span><br><span class="line">	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:<span class="number">316</span>)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class="number">1149</span>)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class="number">624</span>)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:<span class="number">61</span>)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: java.lang.UnsatisfiedLinkError: /home/yubin.fan/java/jdk1<span class="number">.8</span><span class="number">.0_191</span>/jre/lib/i386/libfontmanager.so: libgcc_s.so<span class="number">.1</span>: 无法打开共享对象文件: 没有那个文件或目录</span><br><span class="line">	at java.lang.ClassLoader$NativeLibrary.load(Native Method)</span><br><span class="line">	at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:<span class="number">1941</span>)</span><br><span class="line">	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:<span class="number">1845</span>)</span><br><span class="line">	at java.lang.Runtime.loadLibrary0(Runtime.java:<span class="number">870</span>)</span><br><span class="line">	at java.lang.System.loadLibrary(System.java:<span class="number">1122</span>)</span><br><span class="line">	at sun.font.FontManagerNativeLibrary$<span class="number">1</span>.run(FontManagerNativeLibrary.java:<span class="number">61</span>)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.font.FontManagerNativeLibrary.&lt;clinit&gt;(FontManagerNativeLibrary.java:<span class="number">32</span>)</span><br><span class="line">	at sun.font.SunFontManager$<span class="number">1</span>.run(SunFontManager.java:<span class="number">339</span>)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.font.SunFontManager.&lt;clinit&gt;(SunFontManager.java:<span class="number">335</span>)</span><br><span class="line">	at java.lang.Class.forName0(Native Method)</span><br><span class="line">	at java.lang.Class.forName(Class.java:<span class="number">348</span>)</span><br><span class="line">	at sun.font.FontManagerFactory$<span class="number">1</span>.run(FontManagerFactory.java:<span class="number">82</span>)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:<span class="number">74</span>)</span><br><span class="line">	at java.awt.Font.getFont2D(Font.java:<span class="number">491</span>)</span><br><span class="line">	at java.awt.Font.access$<span class="number">000</span>(Font.java:<span class="number">224</span>)</span><br><span class="line">	at java.awt.Font$FontAccessImpl.getFont2D(Font.java:<span class="number">228</span>)</span><br><span class="line">	at sun.font.FontUtilities.getFont2D(FontUtilities.java:<span class="number">180</span>)</span><br><span class="line">	at sun.font.StandardGlyphVector.initFontData(StandardGlyphVector.java:<span class="number">1126</span>)</span><br><span class="line">	at sun.font.StandardGlyphVector.init(StandardGlyphVector.java:<span class="number">1115</span>)</span><br><span class="line">	at sun.font.StandardGlyphVector.&lt;init&gt;(StandardGlyphVector.java:<span class="number">167</span>)</span><br><span class="line">	at java.awt.Font.createGlyphVector(Font.java:<span class="number">2545</span>)</span><br><span class="line">	at com.google.code.kaptcha.text.impl.DefaultWordRenderer.renderWord(DefaultWordRenderer.java:<span class="number">66</span>)</span><br><span class="line">	at com.google.code.kaptcha.impl.DefaultKaptcha.createImage(DefaultKaptcha.java:<span class="number">43</span>)</span><br><span class="line">	at com.google.code.kaptcha.servlet.KaptchaServlet.doGet(KaptchaServlet.java:<span class="number">95</span>)</span><br><span class="line">	at javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class="number">624</span>)</span><br><span class="line">	at javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class="number">731</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">303</span>)</span><br><span class="line">	... <span class="number">69</span> common frames omitted</span><br></pre></td></tr></table></figure>
<p>以上是我的错误提示信息，可以看到<code>libgcc_s.so.1: 无法打开共享对象文件: 没有那个文件或目录</code><br>找度娘看了一下说是<code>libgcc-4.8.5-36.el7.i686.rpm</code>包没有需要更新<br><span class="exturl" data-url="aHR0cDovL3d3dy5ycG1maW5kLm5ldC9saW51eC9ycG0yaHRtbC9zZWFyY2gucGhwP3F1ZXJ5PWxpYmdjYw==">http://www.rpmfind.net/linux/rpm2html/search.php?query=libgcc<i class="fa fa-external-link-alt"></i></span><br>我下载的是这个版本，可以用了，你根据情况下载<br>下载完了放到linux下执行一下<br><code>rpm -ivh libgcc-4.8.5-36.el7.i686.rpm</code><br>就可以了</p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>网站使用next主题</title>
    <url>/posts/4a70c1c0/</url>
    <content><![CDATA[<h1 id="网站使用next主题"><a href="#网站使用next主题" class="headerlink" title="网站使用next主题"></a>网站使用next主题</h1><p>上一篇我记录了怎么使用hexo+next搭建GitHub的个人网站，<a href="https://trhsy.github.io/hexo_gethub_build">飞机票</a></p>
<a id="more"></a>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>首先我们要下载安装next<br>如何下载这里给两个方法，<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lpc3NuYW4vaGV4by10aGVtZS1uZXh0">https://github.com/iissnan/hexo-theme-next<i class="fa fa-external-link-alt"></i></span>这个github地址进去之后直接下载<br>另外一种方法我个人比较喜欢，为啥因为快，因为这样才是程序员下载东西的方法(▼へ▼メ)<br>首先我们先在d盘新建一个文件夹名字叫next,你随便都行等要用到<br>win+r输入cmd打开dos命令行切换到刚才你建的文件夹下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:</span><br><span class="line">cd D:&#x2F;next</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;iissnan&#x2F;hexo-theme-next themes&#x2F;next</span><br></pre></td></tr></table></figure>
<p>下载完了打开看到<br><img src="https://trhsy.github.io/img/next1.png" alt="next1"><br>嘻嘻，其实next主题安装很简单直接把你下载的next整个文件夹拷贝至站点目录的 themes 目录下，之后修改配置文件就可以了你想要啥样该啥样<br>之后我们打开_config.yml搜索theme,修改为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>
<p>我加入的功能<br>百度分享<br>阅读统计我用了LeanCloud和不蒜子<br>评论 Valine<br>话不多说我先上我的next主题下的_config.yml配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"><span class="comment"># ========================= ATTENTION! ==========================</span></span><br><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"><span class="comment"># NexT repository is moving here: https://github.com/theme-next</span></span><br><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"><span class="comment"># It's rebase to v6.0.0 and future maintenance will resume there</span></span><br><span class="line"><span class="comment"># ===============================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Theme Core Configuration Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set to true, if you want to fully override the default configuration.</span></span><br><span class="line"><span class="comment"># Useful if you don't want to inherit the theme _config.yml configurations.</span></span><br><span class="line"><span class="attr">override:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Site Information Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To get or check favicons visit: https://realfavicongenerator.net</span></span><br><span class="line"><span class="comment"># Put your favicons into `hexo-site/source/` (recommend) or `hexo-site/themes/next/source/images/` directory.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Default NexT favicons placed in `hexo-site/themes/next/source/images/` directory.</span></span><br><span class="line"><span class="comment"># And if you want to place your icons in `hexo-site/source/` root directory, you must remove `/images` prefix from pathes.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For example, you put your favicons into `hexo-site/source/images` directory.</span></span><br><span class="line"><span class="comment"># Then need to rename &amp; redefine they on any other names, otherwise icons from Next will rewrite your custom icons in Hexo.</span></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/apple-touch-icon-next.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.svg</span></span><br><span class="line">  <span class="comment">#android_manifest: /images/manifest.json</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /images/browserconfig.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set default keywords (Use a comma to separate)</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">"Hexo,trhsy"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set rss to false to disable feed link.</span></span><br><span class="line"><span class="comment"># Leave rss as empty to use site's feed link.</span></span><br><span class="line"><span class="comment"># Set rss to specific value if you have burned your feed already.</span></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup.</span></span><br><span class="line">  <span class="comment"># If not defined, current year will be used.</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2018</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">heart</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, will be used `author` from Hexo main config.</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">  <span class="comment"># -------------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Hexo link (Powered by Hexo).</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="comment"># Theme &amp; scheme info link (Theme - NexT.scheme).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Version info of NexT after scheme info (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># -------------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Any custom text can be defined here.</span></span><br><span class="line">  <span class="comment">#custom_text: Hosted by &lt;a target="_blank" href="https://pages.github.com"&gt;GitHub Pages&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># SEO Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.</span></span><br><span class="line"><span class="comment"># See: https://support.google.com/webmasters/answer/139066</span></span><br><span class="line"><span class="comment"># Tips: Before you open this tag, remember set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )</span></span><br><span class="line"><span class="attr">canonical:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change headers hierarchy on site-subtitle (will be main site description) and on all post/pages titles for better SEO-optimization.</span></span><br><span class="line"><span class="attr">seo:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If true, will add site-subtitle to index page, added in main hexo config.</span></span><br><span class="line"><span class="comment"># subtitle: Subtitle</span></span><br><span class="line"><span class="attr">index_with_subtitle:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash from link value (/archives -&gt; archives).</span></span><br><span class="line"><span class="comment"># Usage: `Key: /link/ || icon`</span></span><br><span class="line"><span class="comment"># Key is the name of menu item. If translate for this menu will find in languages - this translate will be loaded; if not - Key name will be used. Key is case-senstive.</span></span><br><span class="line"><span class="comment"># Value before `||` delimeter is the target link.</span></span><br><span class="line"><span class="comment"># Value after `||` delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, question icon will be loaded.</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable/Disable menu icons.</span></span><br><span class="line"><span class="attr">menu_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Icon Mapping.</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">home</span></span><br><span class="line">  <span class="comment">#about: user</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#commonweal: heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Scheme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links.</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimeter is the target permalink.</span></span><br><span class="line"><span class="comment"># Value after `||` delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, globe icon will be loaded.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/123love123</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="comment">#E-Mail: mailto:yourname@gmail.com || envelope</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || google</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/yourname || twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || facebook</span></span><br><span class="line">  <span class="comment">#VK Group: https://vk.com/yourname || vk</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || skype</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">https://weibo.com/3211691837/profile</span> <span class="string">||</span> <span class="string">weibo</span></span><br><span class="line">  <span class="attr">Taobao:</span> <span class="string">https://shop155378470.taobao.com/shop/view_shop.htm</span> <span class="string">||</span> <span class="string">gift</span></span><br><span class="line"></span><br><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icons_only:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span> <span class="literal">false</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">weibo</span></span><br><span class="line">  <span class="attr">Taobao:</span> <span class="string">taobao</span></span><br><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_icon:</span> <span class="string">link</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">Links</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line"><span class="comment">#links:</span></span><br><span class="line">  <span class="comment">#Title: http://example.com/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="comment"># in theme directory(source/images): /images/avatar.gif</span></span><br><span class="line"><span class="comment"># in site  directory(source/uploads): /uploads/avatar.gif</span></span><br><span class="line"><span class="comment">#avatar: /images/avatar.gif</span></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">/images/auser.jpg</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">範範</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">用我三生烟火；换你一世迷离</span></span><br><span class="line"><span class="comment"># Table Of Contents in the Sidebar</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># http://creativecommons.org/</span></span><br><span class="line"><span class="comment"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="comment">#creative_commons: by-nc-sa</span></span><br><span class="line"><span class="comment">#creative_commons:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position, available value: left | right (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="comment">#position: right</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display, available value (only for Muse | Mist):</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  <span class="comment">#  - remove  Totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  <span class="comment">#display: post</span></span><br><span class="line">  <span class="comment">#display: always</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">hide</span></span><br><span class="line">  <span class="comment">#display: remove</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Back to top in sidebar (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="attr">b2t:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Enable sidebar on narrow view (only for Muse | Mist).</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Post Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically scroll page to section which is under &lt;!-- more --&gt; mark.</span></span><br><span class="line"><span class="attr">scroll_to_more:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically saving scroll position on each post/page in cookies.</span></span><br><span class="line"><span class="attr">save_scroll:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically excerpt description in homepage as preamble text.</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="comment"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></span><br><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post meta display settings</span></span><br><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">created_at:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">updated_at:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/willin/hexo-wordcount</span></span><br><span class="line"><span class="attr">post_wordcount:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">totalcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Wechat Subscriber</span></span><br><span class="line"><span class="comment">#wechat_subscriber:</span></span><br><span class="line">  <span class="comment">#enabled: true</span></span><br><span class="line">  <span class="comment">#qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg</span></span><br><span class="line">  <span class="comment">#description: ex. subscribe to my blog by scanning my public wechat account</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="comment">#reward_comment: Donate comment here</span></span><br><span class="line"><span class="comment">#wechatpay: /images/wechatpay.jpg</span></span><br><span class="line"><span class="comment">#alipay: /images/alipay.jpg</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br><span class="line"><span class="comment"># Wechat Subscriber</span></span><br><span class="line"><span class="attr">wechat_subscriber:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">qcode:</span> <span class="string">/images/wechat-qcode.jpg</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">欢迎关注微信公众号，孬蛋等着你！</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span> <span class="string">坚持原创技术分享，您的支持将鼓励我继续创作！</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.png</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.jpg</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br><span class="line"><span class="comment"># Declare license on posts</span></span><br><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">3.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/3.0/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Misc Theme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Reduce padding / margin indents on devices with narrow width.</span></span><br><span class="line"><span class="attr">mobile_layout_economy:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Android Chrome header panel color ($black-deep).</span></span><br><span class="line"><span class="attr">android_chrome_color:</span> <span class="string">"#fff"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Custom Logo.</span></span><br><span class="line"><span class="comment"># !!Only available for Default Scheme currently.</span></span><br><span class="line"><span class="comment"># Options:</span></span><br><span class="line"><span class="comment">#   enabled: [true/false] - Replace with specific image</span></span><br><span class="line"><span class="comment">#   image: url-of-image   - Images's url</span></span><br><span class="line"><span class="attr">custom_logo:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Code Highlight theme</span></span><br><span class="line"><span class="comment"># Available value:</span></span><br><span class="line"><span class="comment">#    normal | night | night eighties | night blue | night bright</span></span><br><span class="line"><span class="comment"># https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">normal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Online contact</span></span><br><span class="line"><span class="attr">daovoice:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">daovoice_app_id:</span> <span class="string">06591aa4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Font Settings</span></span><br><span class="line"><span class="comment"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></span><br><span class="line"><span class="comment"># - All fonts set here will have the following styles:</span></span><br><span class="line"><span class="comment">#     light, light italic, normal, normal italic, bold, bold italic</span></span><br><span class="line"><span class="comment"># - Be aware that setting too much fonts will cause site running slowly</span></span><br><span class="line"><span class="comment"># - Introduce in 5.0.1</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># CAUTION! Safari Version 10.1.2 <span class="doctag">bug:</span> https://github.com/iissnan/hexo-theme-next/issues/1844</span></span><br><span class="line"><span class="comment"># To avoid space between header and sidebar in Pisces / Gemini themes recommended to use Web Safe fonts for `global` (and `logo`):</span></span><br><span class="line"><span class="comment"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host. E.g. //fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">https://fonts.cat.net</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: xx`. Use `px` as unit.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 全局字体，应用在 body 元素上 Global font settings used on &lt;body&gt; element.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Monda</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Headlines (h1, h2, h3, h4, h5, h6).</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Roboto</span> <span class="string">Slab</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts.</span></span><br><span class="line">  <span class="comment">#  文章字体Fallback to `global` font settings.</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for Logo.</span></span><br><span class="line">  <span class="comment"># Fallback to `global` font settings.</span></span><br><span class="line">  <span class="attr">logo:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Lobster</span> <span class="string">Two</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">13</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 代码字体，应用于 code 以及代码块 Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">PT</span> <span class="string">Mono</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Third Party Services Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MathJax Support</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">https://cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Han Support docs: https://hanzi.pro/</span></span><br><span class="line"><span class="attr">han:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Swiftype Search API Key</span></span><br><span class="line"><span class="comment">#swiftype_key:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Analytics ID</span></span><br><span class="line"><span class="comment">#baidu_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Duoshuo ShortName</span></span><br><span class="line"><span class="comment">#duoshuo_shortname:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disqus</span></span><br><span class="line"><span class="comment">#disqus:</span></span><br><span class="line"><span class="comment">#  enable: false</span></span><br><span class="line"><span class="comment">#  shortname:</span></span><br><span class="line"><span class="comment">#  count: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hypercomments</span></span><br><span class="line"><span class="comment">#hypercomments_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># changyan</span></span><br><span class="line"><span class="comment">#changyan:</span></span><br><span class="line"><span class="comment">#  enable: false</span></span><br><span class="line"><span class="comment">#  appid:</span></span><br><span class="line"><span class="comment">#  appkey:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Valine.</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://valine.js.org</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="string">FHlJsyQS9GAUQY4CCWYDbQDu-gzGzoHsz</span> <span class="comment"># your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">U6cbW9dzvbLCsRXvlpI3T6A2</span> <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">ヾﾉ≧∀≦)o来啊，快活啊!</span> <span class="comment"># comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">範範</span> <span class="comment"># gravatar style</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># pagination size</span></span><br><span class="line"><span class="attr">valine_modify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="string">FHlJsyQS9GAUQY4CCWYDbQDu-gzGzoHsz</span> <span class="comment"># your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">U6cbW9dzvbLCsRXvlpI3T6A2</span> <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">ヾﾉ≧∀≦)o来啊，快活啊!</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Support for youyan comments system.</span></span><br><span class="line"><span class="comment"># You can get your uid from http://www.uyan.cc</span></span><br><span class="line"><span class="comment">#youyan_uid: your uid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Support for LiveRe comments system.</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="comment">#livere_uid: your uid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Gitment</span></span><br><span class="line"><span class="comment"># Introduction: https://imsun.net/posts/gitment-introduction/</span></span><br><span class="line"><span class="comment"># You can get your Github ID from https://api.github.com/users/&lt;Github username&gt;</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mint:</span> <span class="literal">true</span> <span class="comment"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Show comments count in post meta area</span></span><br><span class="line">  <span class="attr">lazy:</span> <span class="literal">false</span> <span class="comment"># Comments lazy loading with a button</span></span><br><span class="line">  <span class="attr">cleanly:</span> <span class="literal">false</span> <span class="comment"># Hide 'Powered by ...' on footer, and more</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-Hans#</span> <span class="string">Force</span> <span class="string">language,</span> <span class="string">or</span> <span class="string">auto</span> <span class="string">switch</span> <span class="string">by</span> <span class="string">theme</span></span><br><span class="line">  <span class="attr">github_user:</span> <span class="comment"># MUST HAVE, Your Github ID</span></span><br><span class="line">  <span class="attr">github_repo:</span> <span class="comment"># MUST HAVE, The repo you use to store Gitment comments</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="comment"># MUST HAVE, Github client id for the Gitment</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="comment"># EITHER this or proxy_gateway, Github access secret token for the Gitment</span></span><br><span class="line">  <span class="attr">proxy_gateway:</span> <span class="comment"># Address of api proxy, See: https://github.com/aimingoo/intersect</span></span><br><span class="line">  <span class="attr">redirect_protocol:</span> <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint enabled</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Share</span></span><br><span class="line"><span class="comment"># Available value:</span></span><br><span class="line"><span class="comment">#    button | slide</span></span><br><span class="line"><span class="comment"># Warning: Baidu Share does not support https.</span></span><br><span class="line"><span class="attr">baidushare:</span> </span><br><span class="line">   <span class="attr">type:</span> <span class="string">button</span></span><br><span class="line">   <span class="attr">baidushare:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Share</span></span><br><span class="line"><span class="comment"># This plugin is more useful in China, make sure you known how to use it.</span></span><br><span class="line"><span class="comment"># And you can find the use guide at official webiste: http://www.jiathis.com/.</span></span><br><span class="line"><span class="comment"># Warning: JiaThis does not support https.</span></span><br><span class="line"><span class="comment">#jiathis:</span></span><br><span class="line">  <span class="comment">##uid: Get this uid from http://www.jiathis.com/</span></span><br><span class="line"><span class="comment">#add_this_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Share</span></span><br><span class="line"><span class="comment">#duoshuo_share: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NeedMoreShare2</span></span><br><span class="line"><span class="comment"># This plugin is a pure javascript sharing lib which is useful in China.</span></span><br><span class="line"><span class="comment"># See: https://github.com/revir/need-more-share2</span></span><br><span class="line"><span class="comment"># Also see: https://github.com/DzmVasileusky/needShareButton</span></span><br><span class="line"><span class="comment"># iconStyle: default | box</span></span><br><span class="line"><span class="comment"># boxForm: horizontal | vertical</span></span><br><span class="line"><span class="comment"># position: top / middle / bottom + Left / Center / Right</span></span><br><span class="line"><span class="comment"># networks: Weibo,Wechat,Douban,QQZone,Twitter,Linkedin,Mailto,Reddit,</span></span><br><span class="line"><span class="comment">#           Delicious,StumbleUpon,Pinterest,Facebook,GooglePlus,Slashdot,</span></span><br><span class="line"><span class="comment">#           Technorati,Posterous,Tumblr,GoogleBookmarks,Newsvine,</span></span><br><span class="line"><span class="comment">#           Evernote,Friendfeed,Vkontakte,Odnoklassniki,Mailru</span></span><br><span class="line"><span class="attr">needmoreshare2:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">postbottom:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">options:</span></span><br><span class="line">      <span class="attr">iconStyle:</span> <span class="string">box</span></span><br><span class="line">      <span class="attr">boxForm:</span> <span class="string">horizontal</span></span><br><span class="line">      <span class="attr">position:</span> <span class="string">bottomCenter</span></span><br><span class="line">      <span class="attr">networks:</span> <span class="string">Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span></span><br><span class="line">  <span class="attr">float:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">options:</span></span><br><span class="line">      <span class="attr">iconStyle:</span> <span class="string">box</span></span><br><span class="line">      <span class="attr">boxForm:</span> <span class="string">horizontal</span></span><br><span class="line">      <span class="attr">position:</span> <span class="string">middleRight</span></span><br><span class="line">      <span class="attr">networks:</span> <span class="string">Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="comment">#google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Analytics</span></span><br><span class="line"><span class="comment">#google_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bing Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.bing.com/webmaster/</span></span><br><span class="line"><span class="comment">#bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://webmaster.yandex.ru/</span></span><br><span class="line"><span class="comment">#yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CNZZ count</span></span><br><span class="line"><span class="comment">#cnzz_siteid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Application Insights</span></span><br><span class="line"><span class="comment"># See https://azure.microsoft.com/en-us/services/application-insights/</span></span><br><span class="line"><span class="comment"># application_insights:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Make duoshuo show UA</span></span><br><span class="line"><span class="comment"># user_id must NOT be null when admin_enable is true!</span></span><br><span class="line"><span class="comment"># you can visit http://dev.duoshuo.com get duoshuo user id.</span></span><br><span class="line"><span class="attr">duoshuo_info:</span></span><br><span class="line">  <span class="attr">ua_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">admin_enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">user_id:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">admin_nickname:</span> <span class="string">Author</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post widgets &amp; FB/VK comments settings.</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Facebook SDK Support.</span></span><br><span class="line"><span class="comment"># https://github.com/iissnan/hexo-theme-next/pull/410</span></span><br><span class="line"><span class="attr">facebook_sdk:</span></span><br><span class="line">  <span class="attr">enable:</span>       <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">fb_admin:</span>     <span class="comment">#&lt;user_id&gt;</span></span><br><span class="line">  <span class="attr">like_button:</span>  <span class="comment">#true</span></span><br><span class="line">  <span class="attr">webmaster:</span>    <span class="comment">#true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Facebook comments plugin</span></span><br><span class="line"><span class="comment"># This plugin depends on Facebook SDK.</span></span><br><span class="line"><span class="comment"># If facebook_sdk.enable is false, Facebook comments plugin is unavailable.</span></span><br><span class="line"><span class="attr">facebook_comments_plugin:</span></span><br><span class="line">  <span class="attr">enable:</span>       <span class="literal">true</span></span><br><span class="line">  <span class="attr">num_of_posts:</span> <span class="number">10</span>    <span class="comment"># min posts num is 1</span></span><br><span class="line">  <span class="attr">width:</span>        <span class="number">100</span><span class="string">%</span>  <span class="comment"># default width is 550px</span></span><br><span class="line">  <span class="attr">scheme:</span>       <span class="string">light</span> <span class="comment"># default scheme is light (light or dark)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># VKontakte API Support.</span></span><br><span class="line"><span class="comment"># To get your AppID visit https://vk.com/editapp?act=create</span></span><br><span class="line"><span class="attr">vkontakte_api:</span></span><br><span class="line">  <span class="attr">enable:</span>       <span class="literal">false</span></span><br><span class="line">  <span class="attr">app_id:</span>       <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">like:</span>         <span class="literal">true</span></span><br><span class="line">  <span class="attr">comments:</span>     <span class="literal">true</span></span><br><span class="line">  <span class="attr">num_of_posts:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Star rating support to each article.</span></span><br><span class="line"><span class="comment"># To get your ID visit https://widgetpack.com</span></span><br><span class="line"><span class="attr">rating:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">id:</span>     <span class="comment">#&lt;app_id&gt;</span></span><br><span class="line">  <span class="attr">color:</span>  <span class="string">fc6423</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">FHlJsyQS9GAUQY4CCWYDbQDu-gzGzoHsz</span></span><br><span class="line">  <span class="attr">app_key:</span> <span class="string">U6cbW9dzvbLCsRXvlpI3T6A2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Another tool to show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># visit https://console.firebase.google.com/u/0/ to get apiKey and projectId</span></span><br><span class="line"><span class="comment"># visit https://firebase.google.com/docs/firestore/ to get more information about firestore</span></span><br><span class="line"><span class="attr">firestore:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">collection:</span> <span class="string">articles</span> <span class="comment">#required, a string collection name to access firestore database</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="comment">#required</span></span><br><span class="line">  <span class="attr">projectId:</span> <span class="comment">#required</span></span><br><span class="line">  <span class="attr">bluebird:</span> <span class="literal">false</span> <span class="comment">#enable this if you want to include bluebird 3.5.1(core version) Promise polyfill</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Show PV/UV of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_uv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-user"&gt;&lt;/i&gt;</span> <span class="string">本站访问数</span></span><br><span class="line">  <span class="attr">site_uv_footer:</span> <span class="string">人</span></span><br><span class="line">  <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-eye"&gt;&lt;/i&gt;</span> <span class="string">本站总访问量</span></span><br><span class="line">  <span class="attr">site_pv_footer:</span> <span class="string">次</span></span><br><span class="line">  <span class="comment"># custom pv span for one page only</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-file-o"&gt;&lt;/i&gt;</span> <span class="string">本文总阅读量</span></span><br><span class="line">  <span class="attr">page_pv_footer:</span> <span class="string">次</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tencent analytics ID</span></span><br><span class="line"><span class="comment"># tencent_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tencent MTA ID</span></span><br><span class="line"><span class="comment"># tencent_mta:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO</span></span><br><span class="line"><span class="attr">baidu_push:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Calendar</span></span><br><span class="line"><span class="comment"># Share your recent schedule to others via calendar page</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># API Documentation:</span></span><br><span class="line"><span class="comment"># https://developers.google.com/google-apps/calendar/v3/reference/events/list</span></span><br><span class="line"><span class="attr">calendar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">calendar_id:</span> <span class="string">&lt;required&gt;</span></span><br><span class="line">  <span class="attr">api_key:</span> <span class="string">&lt;required&gt;</span></span><br><span class="line">  <span class="attr">orderBy:</span> <span class="string">startTime</span></span><br><span class="line">  <span class="attr">offsetMax:</span> <span class="number">24</span></span><br><span class="line">  <span class="attr">offsetMin:</span> <span class="number">4</span></span><br><span class="line">  <span class="attr">timeZone:</span></span><br><span class="line">  <span class="attr">showDeleted:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">singleEvents:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">maxResults:</span> <span class="number">250</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">"We didn't find any results for the search: $&#123;query&#125;"</span></span><br><span class="line">    <span class="attr">hits_stats:</span> <span class="string">"$&#123;hits&#125; results found in $&#123;time&#125; ms"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/flashlab/hexo-generator-search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Tags Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># External URL with BASE64 encrypt &amp; decrypt.</span></span><br><span class="line"><span class="comment"># Usage: &#123;% exturl text url "title" %&#125;</span></span><br><span class="line"><span class="comment"># Alias: &#123;% extlink text url "title" %&#125;</span></span><br><span class="line"><span class="attr">exturl:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Note tag (bs-callout).</span></span><br><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Label tag.</span></span><br><span class="line"><span class="attr">label:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tabs tag.</span></span><br><span class="line"><span class="attr">tabs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#! DO NOT EDIT THE FOLLOWING SETTINGS</span></span><br><span class="line"><span class="comment">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use velocity to animate everything.</span></span><br><span class="line"><span class="attr">motion:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">async:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="comment"># Transition variants:</span></span><br><span class="line">    <span class="comment"># fadeIn | fadeOut | flipXIn | flipXOut | flipYIn | flipYOut | flipBounceXIn | flipBounceXOut | flipBounceYIn | flipBounceYOut</span></span><br><span class="line">    <span class="comment"># swoopIn | swoopOut | whirlIn | whirlOut | shrinkIn | shrinkOut | expandIn | expandOut</span></span><br><span class="line">    <span class="comment"># bounceIn | bounceOut | bounceUpIn | bounceUpOut | bounceDownIn | bounceDownOut | bounceLeftIn | bounceLeftOut | bounceRightIn | bounceRightOut</span></span><br><span class="line">    <span class="comment"># slideUpIn | slideUpOut | slideDownIn | slideDownOut | slideLeftIn | slideLeftOut | slideRightIn | slideRightOut</span></span><br><span class="line">    <span class="comment"># slideUpBigIn | slideUpBigOut | slideDownBigIn | slideDownBigOut | slideLeftBigIn | slideLeftBigOut | slideRightBigIn | slideRightBigOut</span></span><br><span class="line">    <span class="comment"># perspectiveUpIn | perspectiveUpOut | perspectiveDownIn | perspectiveDownOut | perspectiveLeftIn | perspectiveLeftOut | perspectiveRightIn | perspectiveRightOut</span></span><br><span class="line">    <span class="attr">post_block:</span> <span class="string">fadeIn</span></span><br><span class="line">    <span class="attr">post_header:</span> <span class="string">slideDownIn</span></span><br><span class="line">    <span class="attr">post_body:</span> <span class="string">slideDownIn</span></span><br><span class="line">    <span class="attr">coll_header:</span> <span class="string">slideLeftIn</span></span><br><span class="line">    <span class="comment"># Only for Pisces | Gemini.</span></span><br><span class="line">    <span class="attr">sidebar:</span> <span class="string">slideUpIn</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fancybox</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line"><span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Themes list:</span></span><br><span class="line"><span class="comment">#pace-theme-big-counter</span></span><br><span class="line"><span class="comment">#pace-theme-bounce</span></span><br><span class="line"><span class="comment">#pace-theme-barber-shop</span></span><br><span class="line"><span class="comment">#pace-theme-center-atom</span></span><br><span class="line"><span class="comment">#pace-theme-center-circle</span></span><br><span class="line"><span class="comment">#pace-theme-center-radar</span></span><br><span class="line"><span class="comment">#pace-theme-center-simple</span></span><br><span class="line"><span class="comment">#pace-theme-corner-indicator</span></span><br><span class="line"><span class="comment">#pace-theme-fill-left</span></span><br><span class="line"><span class="comment">#pace-theme-flash</span></span><br><span class="line"><span class="comment">#pace-theme-loading-bar</span></span><br><span class="line"><span class="comment">#pace-theme-mac-osx</span></span><br><span class="line"><span class="comment">#pace-theme-minimal</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment"># pace_theme: pace-theme-center-simple</span></span><br><span class="line"><span class="attr">pace_theme:</span> <span class="string">pace-theme-flash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># three_waves</span></span><br><span class="line"><span class="attr">three_waves:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_lines</span></span><br><span class="line"><span class="attr">canvas_lines:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># canvas_sphere</span></span><br><span class="line"><span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Only fit scheme Pisces</span></span><br><span class="line"><span class="comment"># Canvas-ribbon</span></span><br><span class="line"><span class="comment"># size: The width of the ribbon.</span></span><br><span class="line"><span class="comment"># alpha: The transparency of the ribbon.</span></span><br><span class="line"><span class="comment"># zIndex: The display level of the ribbon.</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Script Vendors.</span></span><br><span class="line"><span class="comment"># Set a CDN address for the vendor you want to customize.</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment">#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js</span></span><br><span class="line"><span class="comment"># Be aware that you should use the same version as internal ones to avoid potential problems.</span></span><br><span class="line"><span class="comment"># Please use the https protocol of CDN files when you enable https on your site.</span></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># Internal path prefix. Please do not edit it.</span></span><br><span class="line">  <span class="attr">_internal:</span> <span class="string">lib</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 3.4.1</span></span><br><span class="line">  <span class="comment">#jquery: https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js</span></span><br><span class="line">  <span class="attr">jquery:</span> <span class="string">/js/src/jquery.min.js</span></span><br><span class="line">  <span class="comment"># Internal version: 2.1.5</span></span><br><span class="line">  <span class="comment"># See: http://fancyapps.com/fancybox/</span></span><br><span class="line">  <span class="comment">#fancybox: https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js</span></span><br><span class="line">  <span class="attr">fancybox:</span> <span class="string">/js/src/jquery.fancybox.min.js</span></span><br><span class="line">  <span class="comment">#fancybox_css: https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css</span></span><br><span class="line">  <span class="attr">fancybox_css:</span> <span class="string">/css/jquery.fancybox.min.css</span></span><br><span class="line">  <span class="comment"># Internal version: 1.0.6</span></span><br><span class="line">  <span class="comment"># See: https://github.com/ftlabs/fastclick</span></span><br><span class="line">  <span class="comment">#fastclick: https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js</span></span><br><span class="line">  <span class="attr">fastclick:</span> <span class="string">/js/src/fastclick.min.js</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment"># Internal version: 1.9.7</span></span><br><span class="line">  <span class="comment"># See: https://github.com/tuupola/jquery_lazyload</span></span><br><span class="line">  <span class="comment">#lazyload: https://cdnjs.cloudflare.com/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="string">/js/src/jquery.lazyload.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.2.1</span></span><br><span class="line">  <span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line">  <span class="comment">#velocity: https://cdnjs.cloudflare.com/ajax/libs/velocity/2.0.5/velocity.min.js</span></span><br><span class="line">  <span class="attr">velocity:</span> <span class="string">/js/src/velocity.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.2.1</span></span><br><span class="line">  <span class="comment"># See: http://VelocityJS.org</span></span><br><span class="line">  <span class="comment">#velocity_ui: https://cdnjs.cloudflare.com/ajax/libs/velocity/2.2.5/velocity.ui.min.js</span></span><br><span class="line">  <span class="attr">velocity_ui:</span> <span class="string">/js/src/velocity.ui.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 0.7.9</span></span><br><span class="line">  <span class="comment"># See: https://faisalman.github.io/ua-parser-js/</span></span><br><span class="line">  <span class="comment">#ua_parser: https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/0.7.20/ua-parser.min.js</span></span><br><span class="line">  <span class="attr">ua_parser:</span> <span class="string">/js/src/ua-parser.min.js</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 4.6.2</span></span><br><span class="line">  <span class="comment"># See: http://fontawesome.io/</span></span><br><span class="line">  <span class="comment">#fontawesome: https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css</span></span><br><span class="line">  <span class="attr">fontawesome:</span> <span class="string">/css/font-awesome.css</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1</span></span><br><span class="line">  <span class="comment"># https://www.algolia.com</span></span><br><span class="line">  <span class="attr">algolia_instant_js:</span></span><br><span class="line">  <span class="attr">algolia_instant_css:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.2</span></span><br><span class="line">  <span class="comment"># See: https://github.com/HubSpot/pace</span></span><br><span class="line">  <span class="comment"># Or use direct links below:</span></span><br><span class="line">  <span class="comment"># pace: //cdn.bootcss.com/pace/1.0.2/pace.min.js</span></span><br><span class="line">  <span class="comment"># pace_css: //cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</span></span><br><span class="line">  <span class="comment">#pace: https://cdn.bootcss.com/pace/1.11.4/pace.min.js</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="string">/js/src/pace.min.js</span></span><br><span class="line">  <span class="comment">#pace_css: https://cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css</span></span><br><span class="line">  <span class="attr">pace_css:</span> <span class="string">/css/pace-theme-flash.min.css</span></span><br><span class="line">  <span class="comment"># Internal version: 1.0.0</span></span><br><span class="line">  <span class="comment"># https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line">  <span class="attr">canvas_nest:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three</span></span><br><span class="line">  <span class="attr">three:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/three_waves</span></span><br><span class="line">  <span class="attr">three_waves:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/canvas_lines</span></span><br><span class="line">  <span class="attr">canvas_lines:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># three_waves</span></span><br><span class="line">  <span class="comment"># https://github.com/jjandxa/canvas_sphere</span></span><br><span class="line">  <span class="attr">canvas_sphere:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 1.0.0</span></span><br><span class="line">  <span class="comment"># https://github.com/zproo/canvas-ribbon</span></span><br><span class="line">  <span class="attr">canvas_ribbon:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Internal version: 3.3.0</span></span><br><span class="line">  <span class="comment"># https://github.com/ethantw/Han</span></span><br><span class="line">  <span class="attr">han:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># needMoreShare2</span></span><br><span class="line">  <span class="comment"># https://github.com/revir/need-more-share2</span></span><br><span class="line">  <span class="attr">needMoreShare2:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Assets</span></span><br><span class="line"><span class="attr">css:</span> <span class="string">css</span></span><br><span class="line"><span class="attr">js:</span> <span class="string">js</span></span><br><span class="line"><span class="attr">images:</span> <span class="string">images</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Theme version</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">5.1</span><span class="number">.4</span></span><br><span class="line"></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enablad:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">fireworks:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>具体设置可以到<span class="exturl" data-url="aHR0cDovL3RoZW1lLW5leHQuaWlzc25hbi5jb20vZ2V0dGluZy1zdGFydGVkLmh0bWw=">官网<i class="fa fa-external-link-alt"></i></span>上瞅瞅<br>这里主要说一些我遇到的问题<br><span class="exturl" data-url="aHR0cHM6Ly9ub3Rlcy5kb3VibGVtaW5lLm1lLzIwMTUtMTAtMjEtJUU0JUI4JUJBTmV4VCVFNCVCOCVCQiVFOSVBMiU5OCVFNiVCNyVCQiVFNSU4QSVBMCVFNiU5NiU4NyVFNyVBQiVBMCVFOSU5OCU4NSVFOCVBRiVCQiVFOSU4NyU4RiVFNyVCQiU5RiVFOCVBRSVBMSVFNSU4QSU5RiVFOCU4MyVCRC5odG1sIyVFOSU4NSU4RCVFNyVCRCVBRUxlYW5DbG91ZA==">如何为next主题添加文字阅读统计功能<i class="fa fa-external-link-alt"></i></span><br><a href="https://trhsy.github.io/busuanzi">如何为next主题添加不蒜子统计</a></p>
]]></content>
      <categories>
        <category>网站搭建</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>网站搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>如何让搜索引擎收录我们的博客</title>
    <url>/posts/1282adb1/</url>
    <content><![CDATA[<h1 id="如何让搜索引擎收录我们的博客"><a href="#如何让搜索引擎收录我们的博客" class="headerlink" title="如何让搜索引擎收录我们的博客"></a>如何让搜索引擎收录我们的博客</h1><p>各个网站收录地址<br>主动向各个搜索引擎提交博客</p>
<a id="more"></a>

<p><span class="exturl" data-url="aHR0cDovL2Jsb2dzZWFyY2guZ29vZ2xlLmNvbS9waW5n">谷歌博客搜索收录入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb20vc2VhcmNoL3VybF9zdWJtaXQuaHRtbA==">百度收录入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3V0aWxpdHkuYmFpZHUuY29tL2Jsb2dzZWFyY2gvc3VibWl0LnBocA==">百度博客收录入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmluZy5jb20vdG9vbGJveC9zdWJtaXQtc2l0ZS11cmw=">必应Bing收录入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5mcmVld2Vic3VibWlzc2lvbi5jb20v">搜索引擎批量提交:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5zb3NvLmNvbS9oZWxwL3VzYi91cmxzdWJtaXQuc2h0bWw=">soso收录入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL2luZm8uc28uMzYwLmNuL3NpdGVfc3VibWl0Lmh0bWw=">360搜索引擎登录入口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5zb2dvdS5jb20vZmVlZGJhY2svdXJsZmVlZGJhY2sucGhw">搜狗提交入口:<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL29wZW4ucGFuZ3Vzby5jb20vZGF0YS9yZXNvdXJjZS91cmwvbmV3">盘古数据开放平台：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc28uY29tL2FkZF9zaXRlLmh0bWw=">简搜搜索引擎登陆口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3NpdGVtYXAuY24ueWFob28uY29tLw==">雅虎中国网站登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3RlbGxib3QueW91ZGFvLmNvbS9yZXBvcnQ=">网易有道搜索引擎登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3JlZ2lzdGVyLnpob25nc291LmNvbS9OZXRTZWFyY2gvZnJvbnRFbmQvZnJlZV9wcm90b2NvbC5odG0=">中搜免费登录服务：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL2NuLmJpbmcuY29tL2RvY3Mvc3VibWl0LmFzcHg/Rk9STT1XU0REMg==">MSN必应网站登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5hbGV4YS5jb20vaGVscC93ZWJtYXN0ZXJz">Alexa网站登录入口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3NlYXJjaC50b20uY29tL3Rvb2xzL3dlYmxvZy9sb2cucGhw">TOM搜索网站登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3NlYXJjaC5iMmIuY24vcGFnZUluY2x1ZGVkL0FkZFBhZ2UucGhw">铭万网B2B(必途)网址登陆口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5hbnRzby5jb20vYXBwbHkuYXNw">蚁搜搜索网站登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5rdWFpc291LmNvbS9tYWluL2lucHV0d2ViLmFzcA==">快搜搜索网站登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5zdHNvdS5jb20vam9pbi5hc3A=">汕头搜索登录口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5zd2tvbmcuY29tL2FkZC5waHA=">孙悟空搜索网站登录：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL2hvbWUudGlhbndhbmcuY29tL2RlbmdsdS5odG0=">天网网站登陆口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5zdXNvLmNvbS5jbi9zdXNvL2xpbmsuYXNw">速搜全球登陆口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5jb29kaXIuY29tL2FjY291bnRzL2FkZHNpdGUuYXNw">酷帝网站目录提交入口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5rdWFpc291LmNvbS9tYWluL2lucHV0d2ViLmFzcA==">快搜网站登陆口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3Rlc3Quc29tYW8xMjMuY29tL3NlYXJjaC91cmxfc3VibWl0LnBocA==">搜猫搜索引擎登录入口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy56eHl0LmNuL3NlYXJjaC96eHNjLnBocA==">泽许搜索网站登录入口：<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cDovL29wZW4uZXRhby5jb20vYXBwbHlfaW50cm8uaHRtP3NwbT0wLjAuMC40MC45VkY0RlE=">一淘网开放搜索申请入口：<i class="fa fa-external-link-alt"></i></span></p>
<h1 id="首页title优化"><a href="#首页title优化" class="headerlink" title="首页title优化"></a>首页title优化</h1><p> 更改<code>index.swig</code>文件<code>\themes\next\layout</code>;</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% block title %&#125; &#123;&#123; config.title &#125;&#125; &#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>修改为</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% block title %&#125;&#123;&#123; config.title &#125;&#125;&#123;% if theme.index_with_subtitle and config.subtitle %&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;% endif %&#125;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<h1 id="设置站点地图"><a href="#设置站点地图" class="headerlink" title="设置站点地图"></a>设置站点地图</h1><p>安装sitemap站点地图自动生成插件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>
<p>在站点配置文件中添加一下配置(_config.yml)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br></pre></td></tr></table></figure>
<p>在hexo\source中新建文件robots.txt,内容可以参照我的</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># hexo robots.txt</span><br><span class="line">User-agent: * </span><br><span class="line">Allow: /</span><br><span class="line"></span><br><span class="line">Allow: /archives/</span><br><span class="line">Allow: /categories/</span><br><span class="line">Allow: /tags/ </span><br><span class="line">Disallow: /js/</span><br><span class="line">Disallow: /css/</span><br><span class="line">Disallow: /fonts/</span><br><span class="line">Disallow: /vendors/</span><br><span class="line"></span><br><span class="line">Disallow: /categories/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Sitemap: https://123love123.github.io/sitemap.xml</span><br><span class="line"></span><br><span class="line">Sitemap: https://123love123.github.io/baidusitemap.xml</span><br></pre></td></tr></table></figure>
<p>这个文件会随着每次修改配置文件而修改</p>
<h1 id="百度链接优化"><a href="#百度链接优化" class="headerlink" title="百度链接优化"></a>百度链接优化</h1><p>百度站长平台sitemap提交是邀请制的，并没有对所有站长开放，只有网站到一定等级百度才会在你后台开放提交sitemap的入口。<br>1.站点验证<br><img src="https://trhsy.github.io/img/baiduyh.png" alt="百度优化"><br><span class="exturl" data-url="aHR0cHM6Ly96aXl1YW4uYmFpZHUuY29tL3NpdGUvc2l0ZXZlcmlmeQ==">百度搜索引擎提交入口<i class="fa fa-external-link-alt"></i></span> </p>
<p>百度搜索有三种验证方式，我选择Html标签验证，在<code>themes\next\layout\_partials\head.swing</code>中添加验证代码：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--百度链接优化--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"baidu-site-verification"</span> <span class="attr">content</span>=<span class="string">"kGRhxO8VFL"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="谷歌链接优化"><a href="#谷歌链接优化" class="headerlink" title="谷歌链接优化"></a>谷歌链接优化</h1><p>注册<span class="exturl" data-url="aHR0cHM6Ly9zZWFyY2guZ29vZ2xlLmNvbS9zZWFyY2gtY29uc29sZQ==">Google Search Console<i class="fa fa-external-link-alt"></i></span>，添加你的域名后<br><img src="https://trhsy.github.io/img/seo_15.png" alt="seo_15.png"><br>进行站点验证，验证的方式和百度的方式相同<br><img src="https://trhsy.github.io/img/g05.png" alt="g05.png"></p>
<h1 id="设置关键字"><a href="#设置关键字" class="headerlink" title="设置关键字"></a>设置关键字</h1><p>在博客根目录下找到 config.yml 文件，在所示地方添加keywords: 关键字1,关键字2,关键字3…，采用英文逗号隔开，注意keywords与关键词之间的空格<br><code>trhsy,她如花似玉,範範的博客,嫣然De小店,java,hexo,git</code></p>
<h1 id="添加-“nofollow”-标签"><a href="#添加-“nofollow”-标签" class="headerlink" title="添加 “nofollow” 标签"></a>添加 “nofollow” 标签</h1><p><code>\themes\next\layout_partials\footer.swig</code>文件中以下代码修改<br><code>rel=&quot;external nofollow&quot;</code><br>rel这个属性它有许多的属性值，比如next、previous,、chapter、 section等等，比较常见的是rel=”external nofollow”与rel=”nofollow”两种参数的应用！</p>
<p>rel=”nofollow”属性是谷歌为了应对垃圾链接而引入的一个属性值，被各大搜索引擎引用！rel=”external nofollow”只是更相对于rel=”nofollow”参数更加规范一些而已！</p>
<p>rel=”external nofollow”与rel=”nofollow”其功能就中文译文”不要读取” 及”外部链接不要读取”的意思！<br><code>{ __(&#39;footer.powered&#39;, &#39;&lt;a class=&quot;theme-link&quot; target=&quot;_blank&quot; href=&quot;https://trhsy.coding.me&quot; rel=&quot;external nofollow&quot;&gt;trhsy&lt;/a&gt;&#39;)</code><br><code>&lt;a class=&quot;theme-link&quot; target=&quot;_blank&quot; href=&quot;https://shop155378470.taobao.com/&quot; rel=&quot;external nofollow&quot;&gt;</code><br><code>&lt;a href=&quot;&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;</code><br>-&gt;<br><code>&lt;a href=&quot;&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;&lt;/a&gt;</code><br><code>&lt;a href=&quot;https://creativecommons.org/licenses//4.0/" class="cc-opacity" target="_blank">`
->
`<a href="" target="_blank" rel="external nofollow"></a>`
`<a href="https://creativecommons.org/licenses//4.0/&quot; class=&quot;cc-opacity&quot; target=&quot;_blank&quot; rel=&quot;external nofollow&quot;&gt;</code></p>
]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>为网站加上live2d看板娘</title>
    <url>/posts/6ec1c9aa/</url>
    <content><![CDATA[<h1 id="为网站加上live2d看板娘"><a href="#为网站加上live2d看板娘" class="headerlink" title="为网站加上live2d看板娘"></a>为网站加上live2d看板娘</h1><p>上一篇我记录了怎么使用hexo+next搭建GitHub的个人网站，<a href="https://trhsy.github.io/hexo_gethub_build">飞机票</a></p>
<a id="more"></a>
<h2 id="下载hexo-helper-live2d"><a href="#下载hexo-helper-live2d" class="headerlink" title="下载hexo-helper-live2d"></a>下载hexo-helper-live2d</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VZSE4vaGV4by1oZWxwZXItbGl2ZTJkL2Jsb2IvSEVBRC9SRUFETUUuemgtQ04ubWQ=">github地址<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9odWFqaTgudG9wL3Bvc3QvbGl2ZTJkLXBsdWdpbi0yLjAv">这是官网效果<i class="fa fa-external-link-alt"></i></span><br>好了虽然上面已经给出官网地址<br>但是还是给你讲解一下<br>打开dos命令 切换到你博客目录执行<br><code>npm install --save hexo-helper-live2d</code><br>安装完了之后打开package.json会看到你的model<br><img src="https://trhsy.github.io/img/hexo-helper-live2d.png" alt="hexo-helper-live2d"><br>之后下载各种动画model<br><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hpYXpleXUvbGl2ZTJkLXdpZGdldC1tb2RlbHMuZ2l0">https://github.com/xiazeyu/live2d-widget-models.git<i class="fa fa-external-link-alt"></i></span><br>我喜欢这样下载，在dos命令行切换到要下载的地方<br><code>git clone https://github.com/xiazeyu/live2d-widget-models.git</code><br>把packages文件夹下的所有文件复制到node_modules下<br><img src="https://trhsy.github.io/img/live2d-windget.png" alt="live2d-windget"><br>之后在博客的配置文件中添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># Live2D</span><br><span class="line">## https://github.com/EYHN/hexo-helper-live2d</span><br><span class="line"></span><br><span class="line">live2d:</span><br><span class="line">  enable: true #是否开启</span><br><span class="line">  scriptFrom: local #默认</span><br><span class="line">  pluginRootPath: live2dw/ #插件的站点上的根目录（相对路径）</span><br><span class="line">  pluginJsPath: lib/ #脚本文件的相对与插件跟目录路径</span><br><span class="line">  pluginModelPath: assets/ #模型文件对插件跟目录路径</span><br><span class="line">  # scriptFrom: jsdelivr # jsdelivr CDN</span><br><span class="line">  # jsdelivr CDN # unpkg CDN</span><br><span class="line">  # scriptFrom: unpkg</span><br><span class="line">  # unpkg CDN</span><br><span class="line">  # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span><br><span class="line">  </span><br><span class="line">  tagMode: false #标签模式，是否仅替换 live2d tag标签而非插入到所有页面中</span><br><span class="line">  debug: false # 调试, 是否在控制台输出日志</span><br><span class="line">  model:</span><br><span class="line">    #scale: 1</span><br><span class="line">    #hHeadPos: 0.5</span><br><span class="line">    #vHeadPos: 0.618</span><br><span class="line">    use: live2d-widget-model-haru</span><br><span class="line"></span><br><span class="line">    #live2d-widget-model-shizuku</span><br><span class="line">    #live2d-widget-model-haru</span><br><span class="line"></span><br><span class="line">    # npm-module package name</span><br><span class="line"></span><br><span class="line">    # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json</span><br><span class="line">    # 你的自定义 url</span><br><span class="line">  display:</span><br><span class="line">    #superSample: 2</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">    #hOffset: 0</span><br><span class="line">    #vOffset: -20</span><br><span class="line">  mobile:</span><br><span class="line">    show: true</span><br><span class="line">    #scale: 0.5</span><br><span class="line">  #react:</span><br><span class="line">    #opacityDefault: 0.7</span><br><span class="line">    #opacityOnHover: 0.2</span><br></pre></td></tr></table></figure>
<p>完了之后就</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>部署<br><img src="https://trhsy.github.io/img/haru.gif" alt="haru"></p>
<h1 id="看板娘终极进化，可换装"><a href="#看板娘终极进化，可换装" class="headerlink" title="看板娘终极进化，可换装"></a>看板娘终极进化，可换装</h1><p><span class="exturl" data-url="aHR0cHM6Ly96aGFuZ3NodXFpYW8ub3JnLzIwMTgtMDcvJUU1JTlDJUE4JUU3JUJEJTkxJUU5JUExJUI1JUU0JUI4JUFEJUU2JUI3JUJCJUU1JThBJUEwTGl2ZTJEJUU3JTlDJThCJUU2JTlEJUJGJUU1JUE4JTk4Lw==">参考<i class="fa fa-external-link-alt"></i></span><br>下载静态资源包<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0ZXZlbmpvZXpoYW5nL2xpdmUyZC13aWRnZXQ=">https://github.com/stevenjoezhang/live2d-widget<i class="fa fa-external-link-alt"></i></span><br>解压复制文件夹到<code>\themes\next\source</code>下，并到目录下打开autoload.js修改<code>live2d_path</code>,为你命名的目录<code>const live2d_path = &quot;/live2d-widget-master/&quot;;</code><br><code>/themes/next/layout/_layout.swing</code>文件下加入<br><code>&lt;script src=&quot;/live2d-widget-master/autoload.js&quot;&gt;&lt;/script&gt;</code><br>修改waifu-tips.js中</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">	url: "/live2d-widget-master/asteroids.js",</span><br><span class="line">	dataType: "script",</span><br><span class="line">	cache: true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>把原来链接中的js保存到本地，</p>
]]></content>
      <categories>
        <category>看板娘</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>网站搭建</tag>
        <tag>看板娘</tag>
      </tags>
  </entry>
  <entry>
    <title>org.apache.shiro.web.servlet.ShiroHttpServletRequest cannot be cast to org.springframework.web.multipart.MultipartHttpServletRequest</title>
    <url>/posts/e7f9bdf8/</url>
    <content><![CDATA[<p>#类型转换错误<br>做一下笔记记录，若空文件上传则会报错空指针异常</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest)(request);</span><br></pre></td></tr></table></figure>
<p>所以需要后台也进行判断，防止跳过前端jquery控件判断。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">MultipartHttpServletRequest multipartRequest =<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (request <span class="keyword">instanceof</span> MultipartHttpServletRequest) &#123;</span><br><span class="line">multipartRequest = (MultipartHttpServletRequest)(request);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>先判断httpRequest 是否含有文件类型 ,若含文件，则将httpRequest 转换为MultipartHttpServletRequest类型。</p>
]]></content>
      <categories>
        <category>file</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>file</tag>
      </tags>
  </entry>
  <entry>
    <title>给博客添加照片</title>
    <url>/posts/ca1f4130/</url>
    <content><![CDATA[<h1 id="给博客添加照片"><a href="#给博客添加照片" class="headerlink" title="给博客添加照片"></a>给博客添加照片</h1><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在github创建一个新库名字叫Blog_Album，（名字随便起）本地新建文件名字同样叫Blog_Album，打开Git切换到当前文件夹下执行命令<code>git init</code>创建本地库，然后再次执行<code>git remote add origin 你Github仓库ssh地址</code> </p>
<a id="more"></a>
<h2 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMvd2luZG93cy8=">下载地址<i class="fa fa-external-link-alt"></i></span><br>下载安装后打开cmd,切换都python安装目录下<code>Scripts\</code>我的地址<code>D:\work\Python\Python37\Scripts</code> 之后执行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">easy_install-3.7.exe pip</span><br><span class="line">pip install pillow</span><br></pre></td></tr></table></figure>
<p>本地新建的Blog_Album文件下新建一个文件夹/photos，和min_photos文件夹，并且再Blog_Album下新建tool.py文件<br>代码如下:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> Imageprocessing <span class="keyword">import</span> Graphics</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义压缩比，数值越大，压缩越小</span></span><br><span class="line">SIZE_normal = <span class="number">1.0</span></span><br><span class="line">SIZE_small = <span class="number">1.5</span></span><br><span class="line">SIZE_more_small = <span class="number">2.0</span></span><br><span class="line">SIZE_more_small_small = <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_directory</span><span class="params">(directory)</span>:</span></span><br><span class="line">    <span class="string">"""创建目录"""</span></span><br><span class="line">    os.makedirs(directory)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">directory_exists</span><span class="params">(directory)</span>:</span></span><br><span class="line">    <span class="string">"""判断目录是否存在"""</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(directory):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_img_file</span><span class="params">(directory)</span>:</span></span><br><span class="line">    <span class="string">"""列出目录下所有文件，并筛选出图片文件列表返回"""</span></span><br><span class="line">    old_list = os.listdir(directory)</span><br><span class="line">    <span class="comment"># print old_list</span></span><br><span class="line">    new_list = []</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> old_list:</span><br><span class="line">        name, fileformat = filename.split(<span class="string">"."</span>)</span><br><span class="line">        <span class="keyword">if</span> fileformat.lower() == <span class="string">"jpg"</span> <span class="keyword">or</span> fileformat.lower() == <span class="string">"png"</span> <span class="keyword">or</span> fileformat.lower() == <span class="string">"gif"</span>:</span><br><span class="line">            new_list.append(filename)</span><br><span class="line">    <span class="comment"># print new_list</span></span><br><span class="line">    <span class="keyword">return</span> new_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_help</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"""</span></span><br><span class="line"><span class="string">    This program helps compress many image files</span></span><br><span class="line"><span class="string">    you can choose which scale you want to compress your img(jpg/png/etc)</span></span><br><span class="line"><span class="string">    1) normal compress(4M to 1M around)</span></span><br><span class="line"><span class="string">    2) small compress(4M to 500K around)</span></span><br><span class="line"><span class="string">    3) smaller compress(4M to 300K around)</span></span><br><span class="line"><span class="string">    """</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress</span><span class="params">(choose, des_dir, src_dir, file_list)</span>:</span></span><br><span class="line">    <span class="string">"""压缩算法，img.thumbnail对图片进行压缩，</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    参数</span></span><br><span class="line"><span class="string">    -----------</span></span><br><span class="line"><span class="string">    choose: str</span></span><br><span class="line"><span class="string">            选择压缩的比例，有4个选项，越大压缩后的图片越小</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">'1'</span>:</span><br><span class="line">        scale = SIZE_normal</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">'2'</span>:</span><br><span class="line">        scale = SIZE_small</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">'3'</span>:</span><br><span class="line">        scale = SIZE_more_small</span><br><span class="line">    <span class="keyword">if</span> choose == <span class="string">'4'</span>:</span><br><span class="line">        scale = SIZE_more_small_small</span><br><span class="line">    <span class="keyword">for</span> infile <span class="keyword">in</span> file_list:</span><br><span class="line">        img = Image.open(src_dir+infile)</span><br><span class="line">        <span class="comment"># size_of_file = os.path.getsize(infile)</span></span><br><span class="line">        w, h = img.size</span><br><span class="line">        img.thumbnail((int(w/scale), int(h/scale)))</span><br><span class="line">        img.save(des_dir + infile)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress_photo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''调用压缩图片的函数</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    src_dir, des_dir = <span class="string">"photos/"</span>, <span class="string">"min_photos/"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> directory_exists(src_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(src_dir):</span><br><span class="line">            make_directory(src_dir)</span><br><span class="line">        <span class="comment"># business logic</span></span><br><span class="line">        file_list_src = list_img_file(src_dir)</span><br><span class="line">    <span class="keyword">if</span> directory_exists(des_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(des_dir):</span><br><span class="line">            make_directory(des_dir)</span><br><span class="line">        file_list_des = list_img_file(des_dir)</span><br><span class="line">        <span class="comment"># print file_list</span></span><br><span class="line">    <span class="string">'''如果已经压缩了，就不再压缩'''</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(file_list_des)):</span><br><span class="line">        <span class="keyword">if</span> file_list_des[i] <span class="keyword">in</span> file_list_src:</span><br><span class="line">            file_list_src.remove(file_list_des[i])</span><br><span class="line">    compress(<span class="string">'4'</span>, des_dir, src_dir, file_list_src)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_photo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''根据图片的文件名处理成需要的json格式的数据</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    -----------</span></span><br><span class="line"><span class="string">    最后将data.json文件存到博客的source/photos文件夹下</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    src_dir, des_dir = <span class="string">"photos/"</span>, <span class="string">"min_photos/"</span></span><br><span class="line">    file_list = list_img_file(src_dir)</span><br><span class="line">    list_info = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(file_list)):</span><br><span class="line">        filename = file_list[i]</span><br><span class="line">        date_str, *info = filename.split(<span class="string">"_"</span>)</span><br><span class="line">        info=<span class="string">'_'</span>.join(info)</span><br><span class="line">        info, _ = info.split(<span class="string">"."</span>)</span><br><span class="line">        date = datetime.strptime(date_str, <span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">        year_month = date_str[<span class="number">0</span>:<span class="number">7</span>]            </span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:  <span class="comment"># 处理第一个文件</span></span><br><span class="line">            new_dict = &#123;<span class="string">"date"</span>: year_month, <span class="string">"arr"</span>:&#123;<span class="string">'year'</span>: date.year,</span><br><span class="line">                                                                   <span class="string">'month'</span>: date.month,</span><br><span class="line">                                                                   <span class="string">'link'</span>: [filename],</span><br><span class="line">                                                                   <span class="string">'text'</span>: [info],</span><br><span class="line">                                                                   <span class="string">'type'</span>: [<span class="string">'image'</span>]</span><br><span class="line">                                                                   &#125;</span><br><span class="line">                                        &#125; </span><br><span class="line">            list_info.append(new_dict)</span><br><span class="line">        <span class="keyword">elif</span> year_month != list_info[<span class="number">-1</span>][<span class="string">'date'</span>]:  <span class="comment"># 不是最后的一个日期，就新建一个dict</span></span><br><span class="line">            new_dict = &#123;<span class="string">"date"</span>: year_month, <span class="string">"arr"</span>:&#123;<span class="string">'year'</span>: date.year,</span><br><span class="line">                                                   <span class="string">'month'</span>: date.month,</span><br><span class="line">                                                   <span class="string">'link'</span>: [filename],</span><br><span class="line">                                                   <span class="string">'text'</span>: [info],</span><br><span class="line">                                                   <span class="string">'type'</span>: [<span class="string">'image'</span>]</span><br><span class="line">                                                   &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">            list_info.append(new_dict)</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment"># 同一个日期</span></span><br><span class="line">            list_info[<span class="number">-1</span>][<span class="string">'arr'</span>][<span class="string">'link'</span>].append(filename)</span><br><span class="line">            list_info[<span class="number">-1</span>][<span class="string">'arr'</span>][<span class="string">'text'</span>].append(info)</span><br><span class="line">            list_info[<span class="number">-1</span>][<span class="string">'arr'</span>][<span class="string">'type'</span>].append(<span class="string">'image'</span>)</span><br><span class="line">    list_info.reverse()  <span class="comment"># 翻转</span></span><br><span class="line">    final_dict = &#123;<span class="string">"list"</span>: list_info&#125;</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"F:/项目/个人微博/love/themes/next/source/lib/album/data.json"</span>,<span class="string">"w"</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        json.dump(final_dict, fp)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut_photo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""裁剪算法</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    调用Graphics类中的裁剪算法，将src_dir目录下的文件进行裁剪（裁剪成正方形）</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    src_dir = <span class="string">"photos/"</span></span><br><span class="line">    <span class="keyword">if</span> directory_exists(src_dir):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directory_exists(src_dir):</span><br><span class="line">            make_directory(src_dir)</span><br><span class="line">        <span class="comment"># business logic</span></span><br><span class="line">        file_list = list_img_file(src_dir)</span><br><span class="line">        <span class="comment"># print file_list</span></span><br><span class="line">        <span class="keyword">if</span> file_list:</span><br><span class="line">            print_help()</span><br><span class="line">            <span class="keyword">for</span> infile <span class="keyword">in</span> file_list:</span><br><span class="line">                img = Image.open(src_dir+infile)</span><br><span class="line">                Graphics(infile=src_dir+infile, outfile=src_dir + infile).cut_by_ratio()            </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"source directory not exist!"</span>)     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">git_operation</span><span class="params">()</span>:</span></span><br><span class="line">    </span><br><span class="line">    os.system(<span class="string">'git add --all'</span>)</span><br><span class="line">    os.system(<span class="string">'git commit -m "add photos"'</span>)</span><br><span class="line">    os.system(<span class="string">'git push origin master'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># if __name__ == "__main__":</span></span><br><span class="line"><span class="comment">#     cut_photo()        # 裁剪图片，裁剪成正方形，去中间部分</span></span><br><span class="line"><span class="comment">#     compress_photo()   # 压缩图片，并保存到mini_photos文件夹下</span></span><br><span class="line"><span class="comment">#     git_operation()    # 提交到github仓库</span></span><br><span class="line"><span class="comment">#     handle_photo()     # 将文件处理成json格式，存到博客仓库中</span></span><br><span class="line">cut_photo()        <span class="comment"># 裁剪图片，裁剪成正方形，去中间部分</span></span><br><span class="line">compress_photo()   <span class="comment"># 压缩图片，并保存到mini_photos文件夹下</span></span><br><span class="line">git_operation()    <span class="comment"># 提交到github仓库</span></span><br><span class="line">handle_photo()     <span class="comment"># 将文件处理成json格式，存到博客仓库中</span></span><br></pre></td></tr></table></figure>
<p>另外新建一个文件Imageprocessing.py，存放到python安装位置<code>Python\Python35-32\Lib\site-packages</code>下<br>代码如下：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8  </span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image  </span><br><span class="line"><span class="keyword">import</span> shutil  </span><br><span class="line"><span class="keyword">import</span> os  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graphics</span>:</span>  </span><br><span class="line">    <span class="string">'''图片处理类</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    参数</span></span><br><span class="line"><span class="string">    -------</span></span><br><span class="line"><span class="string">    infile: 输入文件路径</span></span><br><span class="line"><span class="string">    outfile: 输出文件路径</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, infile, outfile)</span>:</span></span><br><span class="line">        self.infile = infile</span><br><span class="line">        self.outfile = outfile</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fixed_size</span><span class="params">(self, width, height)</span>:</span>  </span><br><span class="line">        <span class="string">"""按照固定尺寸处理图片"""</span>  </span><br><span class="line">        im = Image.open(self.infile)  </span><br><span class="line">        out = im.resize((width, height),Image.ANTIALIAS)  </span><br><span class="line">        out.save(self.outfile)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">resize_by_width</span><span class="params">(self, w_divide_h)</span>:</span>  </span><br><span class="line">        <span class="string">"""按照宽度进行所需比例缩放"""</span>  </span><br><span class="line">        im = Image.open(self.infile)  </span><br><span class="line">        (x, y) = im.size   </span><br><span class="line">        x_s = x  </span><br><span class="line">        y_s = x/w_divide_h  </span><br><span class="line">        out = im.resize((x_s, y_s), Image.ANTIALIAS)   </span><br><span class="line">        out.save(self.outfile)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">resize_by_height</span><span class="params">(self, w_divide_h)</span>:</span>  </span><br><span class="line">        <span class="string">"""按照高度进行所需比例缩放"""</span>  </span><br><span class="line">        im = Image.open(self.infile)  </span><br><span class="line">        (x, y) = im.size   </span><br><span class="line">        x_s = y*w_divide_h  </span><br><span class="line">        y_s = y  </span><br><span class="line">        out = im.resize((x_s, y_s), Image.ANTIALIAS)   </span><br><span class="line">        out.save(self.outfile)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">resize_by_size</span><span class="params">(self, size)</span>:</span>  </span><br><span class="line">        <span class="string">"""按照生成图片文件大小进行处理(单位KB)"""</span>  </span><br><span class="line">        size *= <span class="number">1024</span>  </span><br><span class="line">        im = Image.open(self.infile)  </span><br><span class="line">        size_tmp = os.path.getsize(self.infile)  </span><br><span class="line">        q = <span class="number">100</span>  </span><br><span class="line">        <span class="keyword">while</span> size_tmp &gt; size <span class="keyword">and</span> q &gt; <span class="number">0</span>:  </span><br><span class="line">            <span class="keyword">print</span> (q)  </span><br><span class="line">            out = im.resize(im.size, Image.ANTIALIAS)  </span><br><span class="line">            out.save(self.outfile, quality=q)  </span><br><span class="line">            size_tmp = os.path.getsize(self.outfile)  </span><br><span class="line">            q -= <span class="number">5</span>  </span><br><span class="line">        <span class="keyword">if</span> q == <span class="number">100</span>:  </span><br><span class="line">            shutil.copy(self.infile, self.outfile)  </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cut_by_ratio</span><span class="params">(self)</span>:</span>  </span><br><span class="line">        <span class="string">"""按照图片长宽进行分割</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        ------------</span></span><br><span class="line"><span class="string">        取中间的部分，裁剪成正方形</span></span><br><span class="line"><span class="string">        """</span>  </span><br><span class="line">        im = Image.open(self.infile)  </span><br><span class="line">        (x, y) = im.size  </span><br><span class="line">        <span class="keyword">if</span> x &gt; y:  </span><br><span class="line">            region = (int(x/<span class="number">2</span>-y/<span class="number">2</span>), <span class="number">0</span>, int(x/<span class="number">2</span>+y/<span class="number">2</span>), y)  </span><br><span class="line">            <span class="comment">#裁切图片  </span></span><br><span class="line">            crop_img = im.crop(region)  </span><br><span class="line">            <span class="comment">#保存裁切后的图片  </span></span><br><span class="line">            crop_img.save(self.outfile)             </span><br><span class="line">        <span class="keyword">elif</span> x &lt; y:  </span><br><span class="line">            region = (<span class="number">0</span>, int(y/<span class="number">2</span>-x/<span class="number">2</span>), x, int(y/<span class="number">2</span>+x/<span class="number">2</span>))</span><br><span class="line">            <span class="comment">#裁切图片  </span></span><br><span class="line">            crop_img = im.crop(region)  </span><br><span class="line">            <span class="comment">#保存裁切后的图片  </span></span><br><span class="line">            crop_img.save(self.outfile)</span><br></pre></td></tr></table></figure>
<p>此外图片名字命名方式以<code>YYYY-MM-DD_描述.jpg</code>，时间年月日描述；<br>上面一切的操作为的是图片处理<br>完了在cmd中切换到你Blog_Album文件下执行命令<code>python tool.py F:\项目\个人微博\Blog_Album\photos</code> 就是你刚刚创建的文件下<br>执行前请修改data.json存放位置，大约在133行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">with open(&quot;F:&#x2F;项目&#x2F;个人微博&#x2F;love&#x2F;themes&#x2F;next&#x2F;source&#x2F;lib&#x2F;album&#x2F;data.json&quot;,&quot;w&quot;) as fp:</span><br><span class="line">修改为</span><br><span class="line">with open(&quot;你的博客项目地址&#x2F;themes&#x2F;next&#x2F;source&#x2F;lib&#x2F;album&#x2F;data.json&quot;,&quot;w&quot;) as fp:</span><br></pre></td></tr></table></figure>
<h2 id="博客相册页面"><a href="#博客相册页面" class="headerlink" title="博客相册页面"></a>博客相册页面</h2><p>在博客项目跟目录下执行<code>hexo n page photos</code>,并再主题配置_config.yml文件中menu选项中添加photos</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="attr">photos:</span> <span class="string">/photos</span>  <span class="string">||</span> <span class="string">camera</span></span><br><span class="line">  <span class="comment">#top: /top/ || signal</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br></pre></td></tr></table></figure>
<p>在photos中的index.md添加代码</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 照片</span><br><span class="line">date: 2018年10月31日17:34:48</span><br><span class="line">tags: photos</span><br><span class="line">type: "photos"</span><br><span class="line">categories: photos</span><br><span class="line">copyright: true</span><br><span class="line">comments: true</span><br><span class="line">fancybox: false</span><br><span class="line">---</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../lib/album/ins.css"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../lib/album/photoswipe.css"</span>&gt;</span></span> </span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../lib/album/default-skin/default-skin.css"</span>&gt;</span></span> </span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"photos-btn-wrap"</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"photos-btn active"</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">rel</span>=<span class="string">"external"</span>&gt;</span></span>Photos<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"instagram itemscope"</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://yourbolg.com"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">class</span>=<span class="string">"open-ins"</span>&gt;</span></span>图片正在加载中…<span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line">  (function() &#123;</span><br><span class="line"><span class="code">    var loadScript = function(path) &#123;</span></span><br><span class="line"><span class="code">      var $script = document.createElement('script')</span></span><br><span class="line"><span class="code">      document.getElementsByTagName('body')[0].appendChild($script)</span></span><br><span class="line"><span class="code">      $script.setAttribute('src', path)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    setTimeout(function() &#123;</span></span><br><span class="line"><span class="code">        loadScript('../lib/album/ins.js')</span></span><br><span class="line"><span class="code">    &#125;, 0)</span></span><br><span class="line">  &#125;)()</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>上述的css&amp;js文件从<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21hbGl6aGlnaXRodWIvSGV4b0FsYnVtRGF0YS90cmVlL21hc3Rlci8=">这里下载<i class="fa fa-external-link-alt"></i></span><br>把相应为文件拷贝到相应的位置，photoswipe-ui-default.min.js, photoswipe.min.js俩文件放到themes/next/source/js/src中。<br>对于ins.js修改，大概在121行左右就是你自己的github中的链接</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minSrc = <span class="string">'https://github.com/123love123/my_album/tree/master/min_photos'</span> + data.link[i];</span><br><span class="line">			</span><br><span class="line"><span class="keyword">var</span> src = <span class="string">'https://github.com/123love123/my_album/tree/master/photos/'</span> + data.link[i];</span><br></pre></td></tr></table></figure>
<p>修改成你的地址就行</p>
<h2 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h2><p>next/layout/_layout.swig的头部head前添加对js文件下修改</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;&#123;&#123; url_for(theme.js) &#125;&#125;&#x2F;src&#x2F;photoswipe.min.js?v&#x3D;&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;&#123;&#123; url_for(theme.js) &#125;&#125;&#x2F;src&#x2F;photoswipe-ui-default.min.js?v&#x3D;&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>body中</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&#123;% if page.type &#x3D;&#x3D;&#x3D; &quot;photos&quot; %&#125;</span><br><span class="line">  &lt;!-- Root element of PhotoSwipe. Must have class pswp. --&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pswp&quot; tabindex&#x3D;&quot;-1&quot; role&#x3D;&quot;dialog&quot; aria-hidden&#x3D;&quot;true&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;pswp__bg&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;pswp__scroll-wrap&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;pswp__container&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;pswp__ui pswp__ui--hidden&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__top-bar&quot;&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;pswp__counter&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;pswp__button pswp__button--close&quot; title&#x3D;&quot;Close (Esc)&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;pswp__button pswp__button--share&quot; title&#x3D;&quot;Share&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;pswp__button pswp__button--fs&quot; title&#x3D;&quot;Toggle fullscreen&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;button class&#x3D;&quot;pswp__button pswp__button--zoom&quot; title&#x3D;&quot;Zoom in&#x2F;out&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">                &lt;!-- Preloader demo http:&#x2F;&#x2F;codepen.io&#x2F;dimsemenov&#x2F;pen&#x2F;yyBWoR --&gt;</span><br><span class="line">                &lt;!-- element will get class pswp__preloader--active when preloader is running --&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;pswp__preloader&quot;&gt;</span><br><span class="line">                    &lt;div class&#x3D;&quot;pswp__preloader__icn&quot;&gt;</span><br><span class="line">                      &lt;div class&#x3D;&quot;pswp__preloader__cut&quot;&gt;</span><br><span class="line">                        &lt;div class&#x3D;&quot;pswp__preloader__donut&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">                      &lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__share-modal pswp__share-modal--hidden pswp__single-tap&quot;&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;pswp__share-tooltip&quot;&gt;&lt;&#x2F;div&gt; </span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;button class&#x3D;&quot;pswp__button pswp__button--arrow--left&quot; title&#x3D;&quot;Previous (arrow left)&quot;&gt;</span><br><span class="line">            &lt;&#x2F;button&gt;</span><br><span class="line">            &lt;button class&#x3D;&quot;pswp__button pswp__button--arrow--right&quot; title&#x3D;&quot;Next (arrow right)&quot;&gt;</span><br><span class="line">            &lt;&#x2F;button&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;pswp__caption&quot;&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;pswp__caption__center&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>在/themes/next/layout/_scripts/pages/post-details.swig中</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#123;&#123; url_for(theme.js) &#125;&#125;&#x2F;src&#x2F;photoswipe.min.js?v&#x3D;&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#123;&#123; url_for(theme.js) &#125;&#125;&#x2F;src&#x2F;photoswipe-ui-default.min.js?v&#x3D;&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>主题配置文件中fancybox设置true,修改/themes/next/layout/_partials/head.swig<br>在</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.fancybox %&#125;</span><br><span class="line">  &#123;% set fancybox_css_uri &#x3D; url_for(theme.vendors._internal + &#39;&#x2F;fancybox&#x2F;source&#x2F;jquery.fancybox.css?v&#x3D;2.1.5&#39;) %&#125;</span><br><span class="line">  &#123;% if theme.vendors.fancybox_css %&#125;</span><br><span class="line">    &#123;% set fancybox_css_uri &#x3D; theme.vendors.fancybox_css %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &lt;link href&#x3D;&quot;&#123;&#123; fancybox_css_uri &#125;&#125;&quot; rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; &#x2F;&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>上方加入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if page.type &#x3D;&#x3D;&#x3D; &quot;photos&quot;  %&#125;</span><br><span class="line">  &#123;% set theme.fancybox &#x3D; false %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;% if page.type !&#x3D;&#x3D; &quot;photos&quot;  %&#125;</span><br><span class="line">  &#123;% set theme.fancybox &#x3D; true %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>照片</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>照片</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo+next 添加网易云音乐外链接</title>
    <url>/posts/108d23af/</url>
    <content><![CDATA[<h2 id="hexo-next-添加网易云音乐外链接"><a href="#hexo-next-添加网易云音乐外链接" class="headerlink" title="hexo+next 添加网易云音乐外链接"></a>hexo+next 添加网易云音乐外链接</h2><p>先登录网易云网页版音乐之后<span class="exturl" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvb3V0Y2hhaW4vMC83ODY5MDkyMDcv">点击<i class="fa fa-external-link-alt"></i></span>就是下面的页面，</p>
<a id="more"></a>
<p><img src="https://trhsy.github.io/img/music_1.png" alt="music_1.png"><br>复制代码放到路径<code>/themes/next/layout/_macro/sidebar.swig</code><br><img src="https://trhsy.github.io/img/music_2.png" alt="music_2.png.png"><br>之后hexo g -d 部署就行了<br><img src="https://trhsy.github.io/img/music_3.png" alt="music_3.png.png"></p>
]]></content>
      <categories>
        <category>music</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>music</tag>
      </tags>
  </entry>
  <entry>
    <title>Navicat15安装及使用</title>
    <url>/posts/dc14fc31/</url>
    <content><![CDATA[<p>Navicat 15<br><span class="exturl" data-url="aHR0cHM6Ly93d3cubmF2aWNhdC5jb20uY24vcHJvZHVjdHM=">安装<i class="fa fa-external-link-alt"></i></span><br><img src="https://img-blog.csdnimg.cn/20200325153556101.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="点击免费试用"><br>软件下载地址</p>
<a id="more"></a>
<p>链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMUpXdnVodWs5eWZ0dGFhQVg5bHdfMXc=">https://pan.baidu.com/s/1JWvuhuk9yfttaaAX9lw_1w<i class="fa fa-external-link-alt"></i></span><br>提取码：963u<br>自己下载吧<br>接下来是安装步骤<br>首先关闭navicat<br>把下载的文件复制到navicat安装目录下，右键管理员启动<br><img src="https://img-blog.csdnimg.cn/2020032515482082.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>上图看着有点乱哈，因为我这边是注册成功后截图的。<br>启动后先执行第1,2,3,4,5,6步骤；<br>若提示<img src="https://img-blog.csdnimg.cn/20200325155042828.png" alt="在这里插入图片描述"><br>则成功，若提示<br><img src="https://img-blog.csdnimg.cn/20200325155110569.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>则注册失败；<br>接下来执行第7,8步骤复制注册码；这时候打开navicat，点击注册，把复制的注册码复制进去并激活<br><img src="https://img-blog.csdnimg.cn/20200325155408952.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200325155426156.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200325155438491.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyNTY2MDAz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击手动激活，把出现的编码复制到第9的输入框点击第10；<br>复制生成的注册码确定即可。</p>
]]></content>
      <categories>
        <category>navicat</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>navicat</tag>
      </tags>
  </entry>
  <entry>
    <title>npm更换镜像</title>
    <url>/posts/4d30fd26/</url>
    <content><![CDATA[<h1 id="npm-install-很慢的解决方法"><a href="#npm-install-很慢的解决方法" class="headerlink" title="npm install 很慢的解决方法"></a>npm install 很慢的解决方法</h1><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;npm get registry  --显示当前的镜像网址</span><br><span class="line">https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class="line">&gt;npm config set registry http:&#x2F;&#x2F;registry.npm.taobao.org  -- 使用淘宝的镜像网址</span><br><span class="line">&gt;npm get registry</span><br><span class="line">http:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQ3.7+springboot2.1.5整合</title>
    <url>/posts/fb6a691a/</url>
    <content><![CDATA[<h1 id="RabbitMQ3-7-springboot2-1-5整合"><a href="#RabbitMQ3-7-springboot2-1-5整合" class="headerlink" title="RabbitMQ3.7+springboot2.1.5整合"></a>RabbitMQ3.7+springboot2.1.5整合</h1><h2 id="了解什么事RabbitMQ"><a href="#了解什么事RabbitMQ" class="headerlink" title="了解什么事RabbitMQ"></a>了解什么事RabbitMQ</h2><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><h3 id="linux-下安装"><a href="#linux-下安装" class="headerlink" title="linux 下安装"></a>linux 下安装</h3><a id="more"></a>
<p>我这边用的是 ubuntu<br>所以首先需要更一下库执行<code>apt-get update</code>接着执行<br><code>apt-get install erlang</code><br><img src="https://trhsy.github.io/img/erlang-install.png" alt="erlang-install"><br>安装完毕后，输入erl查看erlang版本，出现如下图则表示安装成功。<br>然后退出erlang命令行：按下ctrl+c，然后输入a即可。<br><img src="https://trhsy.github.io/img/erl.png" alt="erl"><br>接下来安装rabbitmq：<code>apt-get install rabbitmq-server</code><br><img src="https://trhsy.github.io/img/rabbitmq-install.png" alt="rabbitmq-install"><br>安装完毕后，查看rabbitmq状态：<code>rabbitmqctl status</code><br><img src="https://trhsy.github.io/img/rabbitmq-sataus.png" alt="rabbitmq-sataus"><br>可以通过以下命令操作rabbitmq。<br>启动rabbitmq： <code>service rabbitmq-server start</code><br>停止rabbitmq： <code>service rabbitmq-server stop</code><br>重启rabbitmq： <code>service rabbitmq-server restart</code><br>启动rabbitmq插件：<code>rabbitmq-plugins enable rabbitmq_management</code><br>这个可以启动rabbitmq的web控制台。<br><code>rabbitmqctl set_permissions -p / 用户名 &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</code><br>然后我们登陆出现了问题，提示我们只能本地登陆。<br><img src="https://trhsy.github.io/img/rabbitmq-login.png" alt="rabbitmq-login"><br>问题解决：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">找到这个文件rabbit.app</span><br><span class="line">/usr/lib/rabbitmq/lib/rabbitmq_server-3.7.7/ebin/rabbit.app</span><br><span class="line">将：&#123;loopback_users, [&lt;&lt;”guest”&gt;&gt;]&#125;，</span><br><span class="line">改为：&#123;loopback_users, []&#125;，</span><br><span class="line">原因：rabbitmq从3.3.0开始禁止使用guest/guest权限通过除localhost外的访问</span><br></pre></td></tr></table></figure>
<p><img src="https://trhsy.github.io/img/rabbitmq-wt.png" alt="rabbitmq-wt"><br>完了重新一下就行了</p>
<h3 id="windows下安装"><a href="#windows下安装" class="headerlink" title="windows下安装"></a>windows下安装</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZXJsYW5nLm9yZy9kb3dubG9hZHM=">下载Erlang <i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cucmFiYml0bXEuY29tL2luc3RhbGwtd2luZG93cy5odG1s">下载rabbitmq<i class="fa fa-external-link-alt"></i></span><br>先安装Erlang,之后在安装rabbitmq.</p>
<p> 安装完成后  打开<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDoxNTY3Mg==">http://localhost:15672<i class="fa fa-external-link-alt"></i></span> 可以看到<br><a href="https://trhsy.github.io/img/rabbitmq1.png">rabbitmq1</a></p>
<h2 id="整合到springboot中"><a href="#整合到springboot中" class="headerlink" title="整合到springboot中"></a>整合到springboot中</h2><p>springboot 继承 RabbitMQ,在pom.xml中添加</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>…未完待续…</p>
]]></content>
      <categories>
        <category>RabbitMQ</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>thymeleaf</title>
    <url>/posts/33db93c3/</url>
    <content><![CDATA[<h1 id="为啥不用jsp自定义标签"><a href="#为啥不用jsp自定义标签" class="headerlink" title="为啥不用jsp自定义标签"></a>为啥不用jsp自定义标签</h1><p>jsp自定义标签很强大，但是只适用于jsp页面，在html中就不行了。</p>
<p>准备，首先需要把springboot1.5.4默认的thymeleaf升级为3.0，不然使用不了<br>也就是springboot1.5.4，thymeleaf3.0<br>在posm.xml文件中插入</p>
<a id="more"></a>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf/thymeleaf --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring4<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/nz.net.ultraq.thymeleaf/thymeleaf-layout-dialect --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>nz.net.ultraq.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-layout-dialect<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里升级很危险，必须所有依赖jar包全部都给下载了</p>
<p>前面准备好就开始写代码，我直接帖代码</p>
<h1 id="TagDialect"><a href="#TagDialect" class="headerlink" title="TagDialect"></a>TagDialect</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.thymeleaf.dialect.AbstractProcessorDialect;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.processor.IProcessor;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.standard.StandardDialect;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.standard.processor.StandardXmlNsTagProcessor;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> CustomLabel</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 按钮权限自定义标签名:tags</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Created by asus on 2018/11/2112:02</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TagDialect</span> <span class="keyword">extends</span> <span class="title">AbstractProcessorDialect</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TagDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"Tags Dialect"</span>, <span class="string">"tags"</span>, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Descript</span>元素处理器：“matter”标签。</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Date</span> 16:05 2018/11/21</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Param</span> [s]</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@return</span> java.util.Set&lt;org.thymeleaf.processor.IProcessor&gt;</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;IProcessor&gt; <span class="title">getProcessors</span><span class="params">(<span class="keyword">final</span> String dialectPrefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Set&lt;IProcessor&gt; processors = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        processors.add(<span class="keyword">new</span> DictMyTagProcessor(dialectPrefix));<span class="comment">//添加我们定义的标签</span></span><br><span class="line">        processors.add(<span class="keyword">new</span> StandardXmlNsTagProcessor(TemplateMode.HTML, dialectPrefix));</span><br><span class="line">        <span class="keyword">return</span> processors;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="DictMyTagProcessor"><a href="#DictMyTagProcessor" class="headerlink" title="DictMyTagProcessor"></a>DictMyTagProcessor</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.ITemplateContext;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.model.IModel;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.model.IModelFactory;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.model.IProcessableElementTag;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.processor.element.AbstractElementTagProcessor;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.processor.element.IElementTagStructureHandler;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.spring4.context.SpringContextUtils;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> DictMyTagProcessor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 按钮权限自定义标签：功能类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> Created by asus on 2018/11/2111:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DictMyTagProcessor</span> <span class="keyword">extends</span> <span class="title">AbstractElementTagProcessor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG_NAME  = <span class="string">"tag"</span>;<span class="comment">//标签名 tag 这个玩意就是 自定义标签的 ： tag， 应该是可以定义多个标签</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PRECEDENCE = <span class="number">1000</span>;<span class="comment">//优先级</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DictMyTagProcessor</span><span class="params">(<span class="keyword">final</span> String dialectPrefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(</span><br><span class="line">                TemplateMode.HTML, <span class="comment">// 此处理器将仅应用于HTML模式</span></span><br><span class="line">                dialectPrefix,<span class="comment">// 要应用于名称的匹配前缀</span></span><br><span class="line">                TAG_NAME, <span class="comment">// 标签名称：匹配此名称的特定标签</span></span><br><span class="line">                <span class="keyword">true</span>,<span class="comment">// 没有应用于标签名的前缀</span></span><br><span class="line">                <span class="keyword">null</span>,<span class="comment">// 无属性名称：将通过标签名称匹配</span></span><br><span class="line">                <span class="keyword">false</span>, <span class="comment">// 没有要应用于属性名称的前缀</span></span><br><span class="line">                PRECEDENCE<span class="comment">// 优先(内部方言自己的优先</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Descript</span> context 页面上下文 tag  标签</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Date</span> 10:27 2018/11/23</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@Param</span> [context, tag, structureHandler]</span></span><br><span class="line"><span class="comment">     *<span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doProcess</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">final</span> ITemplateContext context,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">final</span> IProcessableElementTag tag,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">final</span> IElementTagStructureHandler structureHandler)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取应用程序上下文。</span></span><br><span class="line">        ApplicationContext appCtx = SpringContextUtils.getApplicationContext(context);</span><br><span class="line">        ZnlyOperatorService znlyOperatorService=appCtx.getBean(ZnlyOperatorService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        ZnlyUserService znlyUserService=appCtx.getBean(ZnlyUserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Descript</span> 从标签读取“menuId”“operatorType”“tabIndex”属性。标签中的这个可选属性将告诉我们需要什么样的数据</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Date</span> 16:24 2018/11/21</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Param</span> [context, tag, structureHandler]</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        <span class="keyword">final</span> String  menuId= tag.getAttributeValue(<span class="string">"menuId"</span>);<span class="comment">//菜单id</span></span><br><span class="line">        <span class="keyword">final</span> String  operatorType= tag.getAttributeValue(<span class="string">"operatorType"</span>);<span class="comment">//按钮类型</span></span><br><span class="line">        <span class="keyword">final</span> String  tabIndex= tag.getAttributeValue(<span class="string">"tabIndex"</span>);<span class="comment">//标签页</span></span><br><span class="line">        String roleIds = <span class="string">""</span>;<span class="comment">//角色id</span></span><br><span class="line">        <span class="comment">// 1.创建输出的html的流</span></span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		<span class="comment">//此处开始替换要输出的内容</span></span><br><span class="line"></span><br><span class="line">        BaseController b=<span class="keyword">new</span> BaseController();</span><br><span class="line">        ZnlyUser znlyUser=b.getUser();</span><br><span class="line">        List&lt;ZnlyRole&gt; znlyRoleList=znlyUserService.findZnlyUserRoleList(znlyUser.getId());<span class="comment">//获取当前用户角色id</span></span><br><span class="line">        <span class="comment">//编译角色id</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; znlyRoleList.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                roleIds += znlyRoleList.get(i).getRoleId();</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                roleIds += <span class="string">","</span>+znlyRoleList.get(i).getRoleId();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; operList =<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//获取当前用户的操作</span></span><br><span class="line">        operList = znlyOperatorService.getOptionByPageName(roleIds,menuId,operatorType,tabIndex);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        String operatorButtonType=<span class="string">"submit"</span>;</span><br><span class="line">        <span class="keyword">if</span>(operatorType.equals(<span class="string">"1"</span>))&#123;</span><br><span class="line">            <span class="keyword">for</span> (Map&lt;String, Object&gt; oper : operList) &#123;<span class="comment">//&lt;button type="submit" class="btn btn-primary"&gt;查询&lt;/button&gt;</span></span><br><span class="line">                Integer buttonType=Integer.parseInt(oper.get(<span class="string">"operator_button_type"</span>).toString());</span><br><span class="line">                <span class="keyword">if</span>(<span class="number">1</span>!=buttonType)&#123;</span><br><span class="line">                    operatorButtonType=<span class="string">"button"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(<span class="string">"&lt;button type='"</span>+operatorButtonType+<span class="string">"' class='btn "</span>+oper.get(<span class="string">"operator_class"</span>)+<span class="string">"'&gt;"</span>+oper.get(<span class="string">"operator_name"</span>)+<span class="string">"&lt;/button&gt;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(operatorType.equals(<span class="string">"2"</span>))&#123;</span><br><span class="line">            <span class="keyword">for</span> (Map&lt;String, Object&gt; oper : operList) &#123;<span class="comment">//&lt;button type="submit" class="btn btn-primary"&gt;查询&lt;/button&gt;</span></span><br><span class="line">                Integer buttonType=Integer.parseInt(oper.get(<span class="string">"operator_button_type"</span>).toString());</span><br><span class="line">                <span class="keyword">if</span>(<span class="number">1</span>!=buttonType)&#123;</span><br><span class="line">                    operatorButtonType=<span class="string">"button"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(<span class="string">"&lt;button type='"</span>+operatorButtonType+<span class="string">"' class='btn btn-xs "</span>+oper.get(<span class="string">"operator_class"</span>)+<span class="string">"'&gt;"</span>+oper.get(<span class="string">"operator_name"</span>)+<span class="string">"&lt;/button&gt;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//此处结束替换要输出的内容</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Descript</span> 创建将替换自定义标签的DOM结构。logo将显示在“&lt;div&gt;”标签内,因此必须首先创建,然后必须向其中添加一个节点。</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Date</span> 16:25 2018/11/21</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Param</span> [context, tag, structureHandler]</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        <span class="keyword">final</span> IModelFactory modelFactory = context.getModelFactory();</span><br><span class="line">        <span class="keyword">final</span> IModel model = modelFactory.createModel();</span><br><span class="line">        model.add(modelFactory.createText(sb));</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Author</span> asus</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Descript</span>指示引擎用指定的模型替换整个元素。</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Date</span> 16:33 2018/11/21</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@Param</span> [context, tag, structureHandler]</span></span><br><span class="line"><span class="comment">         *<span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        structureHandler.replaceWith(model, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后在Application.java中添加</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TagDialect <span class="title">tagDialect</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TagDialect();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>页面引用<br>在顶部的html中<br><img src="https://trhsy.github.io/img/html01.png" alt="html01"><br><img src="https://trhsy.github.io/img/tags.png" alt="tags"></p>
<p>这里大家可以看到我是用来shiro的控制，但是没自由找到可以动态显示的，就想起jsp 的自定义标签发现thymeleaf3也有方言就是这样，希望对你有帮助</p>
<h1 id="2019年8月14日-更新"><a href="#2019年8月14日-更新" class="headerlink" title="2019年8月14日 更新"></a>2019年8月14日 更新</h1><p> 最近使用新的springboot控件，但是原来的springboot1.5.4版本有点老了，怎么办升级嘛！<br>但是之前讲过springboot和thymeleaf3.0的匹配版本很重要经过最终尝试这里使用的springboot版本为<code>2.1.5.RELEASE</code>;</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf/thymeleaf --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/nz.net.ultraq.thymeleaf/thymeleaf-layout-dialect --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>nz.net.ultraq.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-layout-dialect<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>thymeleaf</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>thymeleaf，springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>TortoiseGit配合git使用</title>
    <url>/posts/824257ee/</url>
    <content><![CDATA[<h1 id="TortoiseGit配合git使用"><a href="#TortoiseGit配合git使用" class="headerlink" title="TortoiseGit配合git使用"></a>TortoiseGit配合git使用</h1><p>Git安装详情<a href="https://trhsy.github.io/git">请移步</a><br><span class="exturl" data-url="aHR0cHM6Ly90b3J0b2lzZWdpdC5vcmcvZG93bmxvYWQv">TortoiseGit下载地址<i class="fa fa-external-link-alt"></i></span><br><img src="https://trhsy.github.io/img/tortoiseGit.png" alt="tortoiseGit"><br>下载完了两个文件这里安装的是64位的不知道32位有没有区别，应该没有<br><img src="https://trhsy.github.io/img/tortoiseGit-64.png" alt="tortoiseGit-64"></p>
<a id="more"></a>
<h1 id="安装-TortoiseGit"><a href="#安装-TortoiseGit" class="headerlink" title="安装 TortoiseGit"></a>安装 TortoiseGit</h1><p>安装界面化管理工具“TortoiseGit”。<br>双击打开“TortoiseGit-2.7.0.0-64bit.msi”。全部默认选择，一路下一步完成安装。<br>完了安装汉化包<br>双击打开“TortoiseGit-LanguagePack-2.7.0.0-64bit-zh_CN.msi”。全部默认选择，一路下一步完成安装。<br>安装完成之后win+d快捷键到桌面右键TortoiseGit-设置<br><img src="https://trhsy.github.io/img/t-y.png" alt="t-y"><br>修改语言<br><img src="https://trhsy.github.io/img/tortoiseGit-l.png" alt="tortoiseGit-l"><br>在设置页面中，点击“常规设置”然后单击“重新运行首次启动向导”。<br><img src="https://trhsy.github.io/img/t-c.png" alt="t-c"><br>设置语言下一步<br><img src="https://trhsy.github.io/img/t1.png" alt="t1"><br>下一步<br><img src="https://trhsy.github.io/img/t2.png" alt="t1"><br>设置git.exe路径<br><img src="https://trhsy.github.io/img/t3.png" alt="t1"></p>
<p>设置git仓库用户名邮箱，这里用的是github的<br><img src="https://trhsy.github.io/img/t5.png" alt="t1"><br>生成密钥<br><img src="https://trhsy.github.io/img/t6.png" alt="t1"><br>选择rsa点击generate生成，鼠标需要在key的格子里移动加速生成<br><img src="https://trhsy.github.io/img/t7.png" alt="t1"><br>把生成的可以复制添加到github仓库中<br><img src="https://trhsy.github.io/img/t8.png" alt="t1"><br>登录到github右上角点击头像settings<br><img src="https://trhsy.github.io/img/settings.jpg" alt="t1"><br>左边菜单ssh and GPG keys 新建new ssh key<br><img src="https://trhsy.github.io/img/sshkeys.jpg" alt="t1"><br>把生成的key容复制进去<br><img src="https://trhsy.github.io/img/addkeys.jpg" alt="t1"><br>保存路径推荐C:\Users\asus.sshc盘用户下.ssh中<br><img src="https://trhsy.github.io/img/t9.png" alt="t1"></p>
]]></content>
      <categories>
        <category>TortoiseGit</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>git</tag>
        <tag>TortoiseGit</tag>
      </tags>
  </entry>
  <entry>
    <title>为你网站添加上评论系统</title>
    <url>/posts/c042c5d3/</url>
    <content><![CDATA[<h1 id="为你网站添加上评论系统"><a href="#为你网站添加上评论系统" class="headerlink" title="为你网站添加上评论系统"></a>为你网站添加上评论系统</h1><p>想想你看过next后你会发现hexo有很多评论系统</p>
<p>1.多说<br>2.网易云跟帖<br>3.畅言<br>4.来必力（LiveRe）<br>5.Disqus<br>6.Hypercomments<br>7.valine</p>
<a id="more"></a>
<p>等等等<del>~</del>很多<br>但是我都看了一遍都贼麻烦只有这一个比较简单<br>首先开启valine<br>打开next的配置文件，搜索<br>valine</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line">  enable: true</span><br><span class="line">  appid:   # your leancloud application appid</span><br><span class="line">  appkey:  # your leancloud application appkey</span><br><span class="line">  notify: false # mail notifier , https://github.com/xCss/Valine/wiki</span><br><span class="line">  verify: false # Verification code</span><br><span class="line">  placeholder: ヾﾉ≧∀≦)o来啊，快活啊! # comment box placeholder</span><br><span class="line">  avatar:  # gravatar style</span><br><span class="line">  guest_info: nick,mail,link # custom comment header</span><br><span class="line">  pageSize: 10 # pagination size</span><br></pre></td></tr></table></figure>
<p>appid<br>appkey<br>这两个值我们注册Leancloud来或许，怎么注册<span class="exturl" data-url="aHR0cHM6Ly9sZWFuY2xvdWQuY24v">飞机票<i class="fa fa-external-link-alt"></i></span><br>注册完以后需要创建一个应用，名字可以随便起，然后 进入应用-&gt;设置-&gt;应用key<br>把appid，appkey配置到主题文件中就行<br>最后！记得在Leancloud -&gt; 设置 -&gt; 安全中心 -&gt; Web 安全域名 把你的域名加进去<br><a href="https://trhsy.github.io">我的博客</a></p>
]]></content>
      <categories>
        <category>valine</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>网站搭建</tag>
        <tag>valine</tag>
      </tags>
  </entry>
  <entry>
    <title>s3 备份记录</title>
    <url>/posts/cac15163/</url>
    <content><![CDATA[<h1 id="关于aws-s3-数据库备份记录"><a href="#关于aws-s3-数据库备份记录" class="headerlink" title="关于aws s3 数据库备份记录"></a>关于aws s3 数据库备份记录</h1><p>最近需要使用mysql备份数据库，防止突发情况。<br>传统的备份一般都是直接备份到本机，或者其他地方，但是都是有点欠妥。比如那天服务器挂掉了，起不来了，传统数据库备份没有卵用。找了很多个备份服务器的，阿里云，腾讯云，亚马逊。为啥选择亚马逊，一是工作需要，而是真的很安全，阿里腾讯外围端口是全部开放的，亚马逊则是你开那个才有默认是全部关闭的。</p>
<a id="more"></a>
<h2 id="安装aws-cli"><a href="#安装aws-cli" class="headerlink" title="安装aws cli"></a>安装aws cli</h2><h3 id="windows下安装"><a href="#windows下安装" class="headerlink" title="windows下安装"></a>windows下安装</h3><p>本机使用的是win7</p>
<h4 id="首先检查现有python版本"><a href="#首先检查现有python版本" class="headerlink" title="首先检查现有python版本"></a>首先检查现有python版本</h4><p>快捷键<code>win+R</code>,输入<code>cmd</code>确定；打开cmd命令行输入<code>python -V</code><br><img src="https://trhsy.github.io/img/aws-pythin-v.png" alt="aws-pythin-v.png"><br>若小于2.7.9，请自行更新pythonb版本，cli官网上瞄到一眼说最低支持版本2.7.9，没研究之前版本会有什么问题，但是为了方便还是按要求来吧。</p>
<h4 id="安装python-pip-安装aws-cli"><a href="#安装python-pip-安装aws-cli" class="headerlink" title="安装python pip 安装aws cli"></a>安装python pip 安装aws cli</h4><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMv">下载python<i class="fa fa-external-link-alt"></i></span>,你可以下载最新的，但是等下安装pip的时候一定要根据安装的版本来。<br>安装完了之后需要配置环境变量，就是把你安装python的路径配置到path;具体操作，我的电脑-右键-属性-高级系统设置-环境变量-系统变量，找到path,编辑在最后填上<code>D:\Python27;D:\Python27\Scripts</code>这是我的，你可以替换成你的安装路径。<br>接着再次打开cmd输入<code>path</code>查看是否配置成功，再次检查python版本<code>python -V</code><br><img src="https://trhsy.github.io/img/aws-python.png" alt="aws-python.png"><br>python安装完毕后需要安装pip，下载地址：<span class="exturl" data-url="aHR0cHM6Ly9weXBpLnB5dGhvbi5vcmcvcHlwaS9waXAjZG93bmxvYWRz">https://pypi.python.org/pypi/pip#downloads<i class="fa fa-external-link-alt"></i></span><br>下载完成之后，解压到一个文件夹，用CMD控制台进入解压目录，输入<br><code>python setup.py install</code><br>正确安装完成之后需要加入path成为内部命令，将python目录下的scripts文件夹放入path中；就是上文中提到的环境配置。<br>输入<code>pip</code>测试是否正常<br><img src="https://trhsy.github.io/img/aws-pip.png" alt="aws-pip"><br>接着使用pip 安装awscli<br>输入<code>pip install awscli</code> 等待安装完毕；输入<code>aws --version</code><br><img src="https://trhsy.github.io/img/aws-v.png" alt="aws-v"></p>
<h4 id="下载及安装-MSI-installer"><a href="#下载及安装-MSI-installer" class="headerlink" title="下载及安装 MSI installer"></a>下载及安装 MSI installer</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL2F3cy1jbGkvQVdTQ0xJNjQubXNp">https://s3.amazonaws.com/aws-cli/AWSCLI64.msi<i class="fa fa-external-link-alt"></i></span><br>下载后直接运行，一路下一步（如果想更改安装位置的话，可以手动修改）<br>安装完成cmd输入<code>aws --version</code><br><img src="https://trhsy.github.io/img/aws-v.png" alt="aws-v"></p>
<h3 id="linux下安装"><a href="#linux下安装" class="headerlink" title="linux下安装"></a>linux下安装</h3><p>本机使用 linux ubuntu</p>
<h4 id="检查安装python"><a href="#检查安装python" class="headerlink" title="检查安装python"></a>检查安装python</h4><p>查看当前版本，我这个是更新过的，原来的版本2.7.4有点低，达不到要求害老夫一顿好整，哎</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">root@fyb:~t# python -V</span><br><span class="line">Python 3.4.3</span><br></pre></td></tr></table></figure>
<p>还原一下原本的更新过程：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 查看现有python版本</span><br><span class="line">python -V</span><br><span class="line"># 若小于2.7.9,卸载当前版本</span><br><span class="line">apt-get remove --auto-remove python</span><br><span class="line">#更新源</span><br><span class="line">sudo apt-get update</span><br><span class="line"># 指定当前安装版本</span><br><span class="line">sudo add-apt-repository ppa:jonathonf/python-3.6</span><br><span class="line"># 安装python</span><br><span class="line">sudo apt-get install python3.6</span><br><span class="line"># 安装pip</span><br><span class="line">sudo apt-get install python3-pip</span><br><span class="line"># 更新pip</span><br><span class="line">sudo pip install --upgrade pip</span><br></pre></td></tr></table></figure>
<p>中间可能会出现一点问题，具体什么问题遇到找度娘，老夫这里不能重现了，已经折腾了一次了不想再被搞一次。</p>
<h4 id="从pip安装awscli"><a href="#从pip安装awscli" class="headerlink" title="从pip安装awscli"></a>从pip安装awscli</h4><p>输入<code>pip install awscli</code>，等待安装完成查看版本<code>aws --version</code></p>
<h3 id="配置awscli"><a href="#配置awscli" class="headerlink" title="配置awscli"></a>配置awscli</h3><p> 通过aws configure命令来进行配置<br> 至少提供访问密钥ID和秘密访问密钥，这将使用你的帐户创建一个带有~/.aws的文件夹（windows下应该在<code>C:\Users\Administrator\.aws</code>）</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">aws configure</span><br><span class="line">Access key ID:your_key_ID</span><br><span class="line">Secret access key:your_access_key</span><br><span class="line">Default region name:your_region_name</span><br><span class="line">Default output format:可忽略(默认json)</span><br></pre></td></tr></table></figure>
<p>aws cli常用命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 创建桶</span><br><span class="line">aws s3 mb s3:&#x2F;&#x2F;your_aws_name</span><br><span class="line"># 查看桶</span><br><span class="line">aws s3 ls</span><br><span class="line"># 查看桶信息</span><br><span class="line">aws s3 ls s3:&#x2F;&#x2F;your_aws_name</span><br><span class="line"># 删除桶</span><br><span class="line">aws s3 rb s3:&#x2F;&#x2F;your_aws_name</span><br><span class="line"># 本地上传s3服务器</span><br><span class="line">aws s3 cp file.xml s3:&#x2F;&#x2F;your_aws_name</span><br><span class="line"># s3服务器下载本地</span><br><span class="line">aws s3 cp s3:&#x2F;&#x2F;your_aws_name .&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="shell-脚本备份mysql并上传到s3"><a href="#shell-脚本备份mysql并上传到s3" class="headerlink" title="shell 脚本备份mysql并上传到s3"></a>shell 脚本备份mysql并上传到s3</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this mysql backups</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> DB_USER=<span class="string">"you-db-user"</span></span><br><span class="line"><span class="built_in">export</span> DB_PASSWORD=<span class="string">"you-db-password"</span></span><br><span class="line"><span class="built_in">export</span> DB_HOST=<span class="string">"you-host"</span></span><br><span class="line"><span class="built_in">export</span> date_format=`date +%a`</span><br><span class="line"><span class="built_in">export</span> db_dir=<span class="string">"/usr/local/fyb_test/<span class="variable">$date_format</span>"</span></span><br><span class="line"><span class="built_in">export</span> dest_backup_file=<span class="string">"/usr/local/fyb_test/<span class="variable">$date_format</span>/mysql-databases-<span class="variable">$date_format</span>.tgz"</span></span><br><span class="line"><span class="built_in">export</span> s3_bucket=<span class="string">"s3://your——name/"</span></span><br><span class="line">rm -rf <span class="variable">$db_dir</span></span><br><span class="line">mkdir -p <span class="variable">$db_dir</span> 2&gt;/dev/null</span><br><span class="line"><span class="comment"># If db_dir does not exist, create it：</span></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="variable">$db_dir</span> ]; <span class="keyword">then</span></span><br><span class="line">mkdir -p <span class="variable">$db_dir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># 将数据库转储到文件中</span></span><br><span class="line"><span class="comment"># Get all MySQL databases</span></span><br><span class="line">mysqldump -u <span class="variable">$DB_USER</span> -h <span class="variable">$DB_HOST</span> -p<span class="variable">$DB_PASSWORD</span> --no-create-db --databases wifidb &gt; <span class="variable">$db_dir</span>/wifidb-<span class="variable">$date_format</span>.sql</span><br><span class="line">tar -zcvf <span class="variable">$dest_backup_file</span> -C <span class="variable">$db_dir</span> .</span><br><span class="line"><span class="comment">#压缩文件传到s3</span></span><br><span class="line">aws s3 cp <span class="variable">$dest_backup_file</span> <span class="variable">$&#123;s3_bucket&#125;</span></span><br><span class="line">aws s3 ls <span class="variable">$&#123;s3_bucket&#125;</span></span><br></pre></td></tr></table></figure>
<p>新建一个文件修改名字为<code>mysql_backups.sh</code>,上传到linux服务器，设置定时任务每天备份或者其他时间</p>
<h3 id="下载安装-cron"><a href="#下载安装-cron" class="headerlink" title="下载安装 cron"></a>下载安装 cron</h3><p>linux下执行命令<code>sudo apt-get install cron</code><br>corn 使用简要说明</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 启动状态</span><br><span class="line">service cron status</span><br><span class="line"># 启动</span><br><span class="line">service cron start</span><br><span class="line"># 关闭</span><br><span class="line">service cron stop</span><br><span class="line"></span><br><span class="line"># 查看当前任务计划</span><br><span class="line">crontab –l</span><br><span class="line"># 编辑</span><br><span class="line">crontab -e</span><br><span class="line"># 移除</span><br><span class="line">crontab –r</span><br><span class="line">-u user：用来设定某个用户的crontab服务；</span><br><span class="line">file：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。</span><br><span class="line">如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。</span><br><span class="line">-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。</span><br><span class="line">-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。</span><br><span class="line">-r：从&#x2F;var&#x2F;spool&#x2F;cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。</span><br><span class="line">-i：在删除用户的crontab文件时给确认提示。</span><br></pre></td></tr></table></figure>
<p>切换到安装路径<code>cd /var/spool/cron</code><br>设置定时任务<code>crontab -e</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">HELL=/bin/sh</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=you-email@163.com</span><br><span class="line"></span><br><span class="line">0 0 * * * /you-path/mysql_backups.sh</span><br><span class="line"></span><br><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59)</span><br><span class="line"># | .------------- hour (0 - 23)</span><br><span class="line"># | | .---------- day of month (1 - 31)</span><br><span class="line"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"># | | | | |</span><br><span class="line"># * * * * * user-name command to be executed</span><br></pre></td></tr></table></figure>
<h2 id="这样就完成了定时备份mysql到s3"><a href="#这样就完成了定时备份mysql到s3" class="headerlink" title="这样就完成了定时备份mysql到s3"></a>这样就完成了定时备份mysql到s3</h2><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>从s3 上下载下来并还原到数据库</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># this mysql download</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> DB_USER=<span class="string">"you-user"</span></span><br><span class="line"><span class="built_in">export</span> DB_PASSWORD=<span class="string">"you-password"</span></span><br><span class="line"><span class="built_in">export</span> DB=<span class="string">"you-db"</span></span><br><span class="line"><span class="built_in">export</span> date_format=`date +%a`</span><br><span class="line"><span class="built_in">export</span> db_dir=<span class="string">"/usr/local/fyb_test/download/<span class="variable">$date_format</span>"</span></span><br><span class="line"><span class="built_in">export</span> s3_bucket=<span class="string">"s3://you-name/mysql-databases-<span class="variable">$date_format</span>.tgz"</span></span><br><span class="line"><span class="comment"># rm -rf $db_dir</span></span><br><span class="line">mkdir -p <span class="variable">$db_dir</span> 2&gt;/dev/null</span><br><span class="line"><span class="comment"># If db_dir does not exist, create it：</span></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="variable">$db_dir</span> ]; <span class="keyword">then</span></span><br><span class="line">mkdir -p <span class="variable">$db_dir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#查看 s3目录</span></span><br><span class="line">aws s3 ls <span class="variable">$&#123;s3_bucket&#125;</span></span><br><span class="line"><span class="comment"># aws s3 cp $&#123;s3_bucket&#125; $db_dir</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$db_dir</span></span><br><span class="line">ls</span><br><span class="line">tar -zxvf <span class="variable">$db_dir</span>/mysql-databases-<span class="variable">$date_format</span>.tgz .</span><br><span class="line">ls</span><br><span class="line"><span class="built_in">cd</span> /usr/sbin</span><br><span class="line">mysql -u <span class="variable">$DB_USER</span> -p<span class="variable">$DB_PASSWORD</span> --default-character-set=utf8 <span class="variable">$DB</span> &lt;<span class="variable">$db_dir</span>/wifidb-<span class="variable">$date_format</span>.sql</span><br></pre></td></tr></table></figure>
<p>新建文件命名为<code>s3-mysql-download.sh</code>,需要还原的时候直接执行文件即可。</p>
]]></content>
      <categories>
        <category>aws</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>mysql</tag>
        <tag>aws</tag>
        <tag>shell</tag>
        <tag>s3</tag>
      </tags>
  </entry>
</search>
